import"./all-D6m5kTcE.js";function xp(){document.addEventListener("DOMContentLoaded",function(){const n=document.getElementById("open-menu"),e=document.getElementById("close-menu"),t=document.querySelector(".mobile-navigation"),r=document.querySelector(".mobile-backdrop");n.addEventListener("click",function(){t.classList.add("open"),document.body.classList.add("overflow-hidden")}),e.addEventListener("click",function(){t.classList.remove("open"),document.body.classList.remove("overflow-hidden")}),r&&r.addEventListener("click",function(){t.classList.remove("open"),document.body.classList.remove("overflow-hidden")}),t.addEventListener("click",function(s){s.target===t&&(t.classList.remove("open"),document.body.classList.remove("overflow-hidden"))}),document.querySelectorAll(".menu-item.has-sub > a").forEach(s=>{s.addEventListener("click",function(o){o.preventDefault();const c=s.parentElement.getAttribute("data-target"),u=document.querySelector(`.submenu-mobile[data-sub="${c}"]`);document.querySelectorAll(".submenu-mobile.open").forEach(h=>{h!==u&&h.classList.remove("open")}),u&&u.classList.toggle("open")})})})}function Sp(){document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".menu-item.has-sub > a").forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const i=e.parentElement.getAttribute("data-target"),s=document.querySelector(`.submenu-container[data-sub="${i}"]`);document.querySelectorAll(".submenu-container.open").forEach(o=>{o!==s&&o.classList.remove("open")}),s&&s.classList.toggle("open")})})})}function Cp(){const n=new Date;let e=n.getHours(),t=n.getMinutes();e=String(e).padStart(2,"0"),t=String(t).padStart(2,"0");const r=`${e}h${t}`;document.getElementById("clock").textContent=r}var tl={exports:{}},xu;function Tp(){return xu||(xu=1,(function(n,e){function t(){var o=document.querySelector("[data-toggle-theme]"),a=o?o.getAttribute("data-key"):null;(function(c=localStorage.getItem(a||"theme")){localStorage.getItem(a||"theme")&&(document.documentElement.setAttribute("data-theme",c),o&&[...document.querySelectorAll("[data-toggle-theme]")].forEach(u=>{u.classList.add(o.getAttribute("data-act-class"))}))})(),o&&[...document.querySelectorAll("[data-toggle-theme]")].forEach(c=>{c.addEventListener("click",function(){var u=c.getAttribute("data-toggle-theme");if(u){var h=u.split(",");document.documentElement.getAttribute("data-theme")==h[0]?h.length==1?(document.documentElement.removeAttribute("data-theme"),localStorage.removeItem(a||"theme")):(document.documentElement.setAttribute("data-theme",h[1]),localStorage.setItem(a||"theme",h[1])):(document.documentElement.setAttribute("data-theme",h[0]),localStorage.setItem(a||"theme",h[0]))}[...document.querySelectorAll("[data-toggle-theme]")].forEach(f=>{f.classList.toggle(this.getAttribute("data-act-class"))})})})}function r(){var o=document.querySelector("[data-set-theme='']"),a=o?o.getAttribute("data-key"):null;(function(c=localStorage.getItem(a||"theme")){if(c!=null&&c!="")if(localStorage.getItem(a||"theme")&&localStorage.getItem(a||"theme")!=""){document.documentElement.setAttribute("data-theme",c);var u=document.querySelector("[data-set-theme='"+c.toString()+"']");u&&([...document.querySelectorAll("[data-set-theme]")].forEach(h=>{h.classList.remove(h.getAttribute("data-act-class"))}),u.getAttribute("data-act-class")&&u.classList.add(u.getAttribute("data-act-class")))}else{var u=document.querySelector("[data-set-theme='']");u.getAttribute("data-act-class")&&u.classList.add(u.getAttribute("data-act-class"))}})(),[...document.querySelectorAll("[data-set-theme]")].forEach(c=>{c.addEventListener("click",function(){document.documentElement.setAttribute("data-theme",this.getAttribute("data-set-theme")),localStorage.setItem(a||"theme",document.documentElement.getAttribute("data-theme")),[...document.querySelectorAll("[data-set-theme]")].forEach(u=>{u.classList.remove(u.getAttribute("data-act-class"))}),c.getAttribute("data-act-class")&&c.classList.add(c.getAttribute("data-act-class"))})})}function i(){var o=document.querySelector("select[data-choose-theme]"),a=o?o.getAttribute("data-key"):null;(function(c=localStorage.getItem(a||"theme")){if(localStorage.getItem(a||"theme")){document.documentElement.setAttribute("data-theme",c);var u=document.querySelector("select[data-choose-theme] [value='"+c.toString()+"']");u&&[...document.querySelectorAll("select[data-choose-theme] [value='"+c.toString()+"']")].forEach(h=>{h.selected=!0})}})(),o&&[...document.querySelectorAll("select[data-choose-theme]")].forEach(c=>{c.addEventListener("change",function(){document.documentElement.setAttribute("data-theme",this.value),localStorage.setItem(a||"theme",document.documentElement.getAttribute("data-theme")),[...document.querySelectorAll("select[data-choose-theme] [value='"+localStorage.getItem(a||"theme")+"']")].forEach(u=>{u.selected=!0})})})}function s(o=!0){o===!0?document.addEventListener("DOMContentLoaded",function(a){t(),i(),r()}):(t(),i(),r())}n.exports={themeChange:s}})(tl)),tl.exports}var Op=Tp();function Ep(){document.addEventListener("DOMContentLoaded",function(){setTimeout(()=>{document.querySelectorAll(".notification").forEach(e=>{e.style.transition="opacity 0.5s ease, max-height 0.5s ease",e.style.opacity="0",e.style.maxHeight="0",setTimeout(()=>{e.remove()},500)})},5e3)})}function sd(n){const e=n.dataset.label,t=document.getElementById("apartment-tooltip");let r="";e&&(r+=`<h3 class="label-tooltip">${e}</h3>`),Object.entries(n.dataset).forEach(([i,s])=>{i==="label"||i==="tooltip"||(r+=`
            <span class="flex gap-1 font-bold">
                ${Ap(i)}: <p class="font-normal">${s}</p>
            </span>
        `)}),t.innerHTML=r}function Ap(n){return n.charAt(0).toUpperCase()+n.slice(1)}function kp(){const n=document.getElementById("apartment-tooltip"),e=document.querySelector(".video-canvas-wrapper");!n||!e||document.querySelectorAll(".interactive-overlay rect").forEach(t=>{t.dataset.tooltip==="true"&&(t.addEventListener("mouseenter",()=>{sd(t),n.style.display="block"}),t.addEventListener("mousemove",r=>{const i=e.getBoundingClientRect(),s=r.clientX-i.left,o=r.clientY-i.top;n.style.left=`${s+15}px`,n.style.top=`${o+15}px`}),t.addEventListener("mouseleave",()=>{n.style.display="none"}))})}function Dp(){const n=document.getElementById("apartment-tooltip"),e=document.querySelector(".video-canvas-wrapper");!n||!e||document.querySelectorAll(".interactive-overlay polygon").forEach(t=>{t.dataset.tooltip==="true"&&(t.addEventListener("mouseenter",()=>{sd(t),n.style.display="block"}),t.addEventListener("mousemove",r=>{const i=e.getBoundingClientRect(),s=r.clientX-i.left,o=r.clientY-i.top;n.style.left=`${s+15}px`,n.style.top=`${o+15}px`}),t.addEventListener("mouseleave",()=>{n.style.display="none"}))})}function Pl(n,e,t){if(!n)return;const r=n.hasAttribute("data-preview-current");if(!e||!t){r?n.innerHTML='<div class="p-8 no-image">Image/Video Not Selected</div>':n.innerHTML="";return}const s=t.type?.startsWith("video/")||t.type==="media"?`<video src="${e}" data-preview></video>`:`<img src="${e}" data-preview/>`;n.innerHTML=s}function Pp(n){const e=n.querySelector("input[type='file']"),t=n.querySelector("[data-change-trigger]"),r=n.querySelector("[data-preview]"),i=n.querySelector("[data-preview-current]"),s=n.querySelector(".upload-new-image");!e||!t||!r||(t.addEventListener("click",o=>{o.preventDefault(),e.click()}),e.addEventListener("change",o=>{const a=o.target.files[0];if(!a)return;const c=URL.createObjectURL(a);Pl(r,c,a),r.classList.remove("hidden"),i.classList.add("hidden"),s&&s.classList.remove("hidden")}))}function Mp(n,e){if(!n||!e)return;const r=/\.(mp4|webm|ogg)$/i.test(e)?`<video src="${e}" class="w-full h-auto rounded-md"></video>`:`<img src="${e}" class="w-full h-auto rounded-md" />`;n.innerHTML=r}function jp(n,e){if(!(!n||!e)){n.innerHTML="";try{const t=JSON.parse(e);Object.entries(t).forEach(([r,i])=>{const s=document.createElement("input");s.type="hidden",s.name=r,s.setAttribute("data-field",r),s.value=i,n.appendChild(s)})}catch(t){console.warn("Invalid JSON in data-details:",t)}}}function Lp(n){const e=n.dataset.target,t=document.getElementById(e);if(!t)return;const r=t.querySelector("[data-preview-current]"),i=t.querySelector("[data-preview]"),s=t.querySelector(".upload-new-image"),o=t.querySelector("input[type='file']"),a=t.querySelector("#hidden-inputs"),c=t.querySelector("[data-change-trigger]");let u=null;n.addEventListener("click",()=>{const f=JSON.parse(n.dataset.details||"{}").image_url||null;if(jp(a,n.dataset.details),u){const p=URL.createObjectURL(u);Pl(i,p,u),i.classList.remove("hidden"),r&&r.classList.add("hidden"),s&&s.classList.remove("hidden")}else Mp(r,f),i.classList.add("hidden"),r&&r.classList.remove("hidden"),s&&s.classList.add("hidden");c&&o&&(c.onclick=()=>o.click(),o.onchange=p=>{const y=p.target.files[0];if(!y)return;u=y;const g=URL.createObjectURL(y);Pl(i,g,y),i.classList.remove("hidden"),r&&r.classList.add("hidden"),s&&s.classList.remove("hidden")})})}function Rp(){const n=document.querySelectorAll(".update-image-area[data-add]"),e=document.querySelectorAll(".open-gallery-modal[data-mode='update']");n.forEach(t=>Pp(t)),e.forEach(t=>Lp(t))}function A(n,e,t){return(e=(function(r){var i=(function(s,o){if(typeof s!="object"||!s)return s;var a=s[Symbol.toPrimitive];if(a!==void 0){var c=a.call(s,o);if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(s)})(r,"string");return typeof i=="symbol"?i:i+""})(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Su(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),t.push.apply(t,r)}return t}function D(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Su(Object(t),!0).forEach((function(r){A(n,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Su(Object(t)).forEach((function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))}))}return n}function wt(n,e){if(n==null)return{};var t,r,i=(function(o,a){if(o==null)return{};var c={};for(var u in o)if({}.hasOwnProperty.call(o,u)){if(a.indexOf(u)>=0)continue;c[u]=o[u]}return c})(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function Vr(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}class Cu{constructor(){A(this,"browserShadowBlurConstant",1),A(this,"DPI",96),A(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),A(this,"perfLimitSizeTotal",2097152),A(this,"maxCacheSideLimit",4096),A(this,"minCacheSideLimit",256),A(this,"disableStyleCopyPaste",!1),A(this,"enableGLFiltering",!0),A(this,"textureSize",4096),A(this,"forceGLPutImageData",!1),A(this,"cachesBoundsOfCurve",!1),A(this,"fontPaths",{}),A(this,"NUM_FRACTION_DIGITS",4)}}const rt=new class extends Cu{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=D(D({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach((n=>{delete this.fontPaths[n]}))}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new Cu,t=n?.reduce(((r,i)=>(r[i]=e[i],r)),{})||e;this.configure(t)}},Sn=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return console[n]("fabric",...t)};class Wr extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class Fp extends Wr{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class Ip{}class Bp extends Ip{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),i=e.createShader(e.FRAGMENT_SHADER);return!!i&&(e.shaderSource(i,r),e.compileShader(i),!!e.getShaderParameter(i,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find((r=>this.testPrecision(t,r))),t.getExtension("WEBGL_lose_context").loseContext(),Sn("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const Np={};let Tu;const zr=()=>Tu||(Tu={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new Bp,dispose(){},copyPasteData:Np}),Fi=()=>zr().document,ra=()=>zr().window,od=()=>{var n;return Math.max((n=rt.devicePixelRatio)!==null&&n!==void 0?n:ra().devicePixelRatio,1)},gs=new class{constructor(){A(this,"charWidthsCache",{}),A(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:r}=n;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const i=this.charWidthsCache[e],s="".concat(t.toLowerCase(),"_").concat((r+"").toLowerCase());return i[s]||(i[s]={}),i[s]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:e}=rt,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},Ml="6.7.1";function Ro(){}const Os=Math.PI/2,zo=2*Math.PI,hc=Math.PI/180,Jt=Object.freeze([1,0,0,1,0,0]),dc=16,wn=.4477152502,Ye="center",at="left",tr="top",jl="bottom",Et="right",rr="none",fc=/\r?\n/,ad="moving",na="scaling",ld="rotating",gc="rotate",cd="skewing",bs="resizing",Hp="modifyPoly",Up="modifyPath",Vo="changed",ia="scale",or="scaleX",pr="scaleY",Ii="skewX",Bi="skewY",Lt="fill",nr="stroke",Xo="modified",mi="json",rl="svg",fe=new class{constructor(){this[mi]=new Map,this[rl]=new Map}has(n){return this[mi].has(n)}getClass(n){const e=this[mi].get(n);if(!e)throw new Wr("No class registered for ".concat(n));return e}setClass(n,e){e?this[mi].set(e,n):(this[mi].set(n.type,n),this[mi].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[rl].get(n)}setSVGClass(n,e){this[rl].set(e??n.type.toLowerCase(),n)}},qo=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach((e=>e.abort())),n}cancelByCanvas(n){if(!n)return[];const e=this.filter((t=>{var r;return t.target===n||typeof t.target=="object"&&((r=t.target)===null||r===void 0?void 0:r.canvas)===n}));return e.forEach((t=>t.abort())),e}cancelByTarget(n){if(!n)return[];const e=this.filter((t=>t.target===n));return e.forEach((t=>t.abort())),e}};class Wp{constructor(){A(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach((r=>{let[i,s]=r;this.on(i,s)})),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if(typeof e=="object"){const r=[];return Object.entries(e).forEach((i=>{let[s,o]=i;r.push(this.once(s,o))})),()=>r.forEach((i=>i()))}if(t){const r=this.on(e,(function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];t.call(this,...s),r()}));return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],i=r.indexOf(t);i>-1&&r.splice(i,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach((r=>{let[i,s]=r;this._removeEventListener(i,s)})):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const i=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(i)for(let s=0;s<i.length;s++)i[s].call(this,t||{})}}const wi=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},ln=n=>{if(n===0)return 1;switch(Math.abs(n)/Os){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},cn=n=>{if(n===0)return 0;const e=n/Os,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};class F{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new F(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new F(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new F(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new F(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new F(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new F(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new F(this.x/e.x,this.y/e.y)}scalarDivide(e){return new F(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new F(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new F(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new F(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new F(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pc;const r=cn(e),i=ln(e),s=this.subtract(t);return new F(s.x*i-s.y*r,s.x*r+s.y*i).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new F(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const pc=new F(0,0),Fo=n=>!!n&&Array.isArray(n._objects);function ud(n){class e extends n{constructor(){super(...arguments),A(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];const o=this._objects.push(...i);return i.forEach((a=>this._onObjectAdded(a))),o}insertAt(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return this._objects.splice(r,0,...s),s.forEach((a=>this._onObjectAdded(a))),this._objects.length}remove(){const r=this._objects,i=[];for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return o.forEach((c=>{const u=r.indexOf(c);u!==-1&&(r.splice(u,1),i.push(c),this._onObjectRemoved(c))})),i}forEachObject(r){this.getObjects().forEach(((i,s,o)=>r(i,s,o)))}getObjects(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length===0?[...this._objects]:this._objects.filter((o=>o.isType(...i)))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,i){return!!this._objects.includes(r)||!!i&&this._objects.some((s=>s instanceof e&&s.contains(r,!0)))}complexity(){return this._objects.reduce(((r,i)=>r+=i.complexity?i.complexity():0),0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(wi(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(wi(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,i){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==0){const o=this.findNewLowerIndex(r,s,i);return wi(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,i){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==this._objects.length-1){const o=this.findNewUpperIndex(r,s,i);return wi(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,i){return r!==this._objects[i]&&(wi(this._objects,r),this._objects.splice(i,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,i,s){let o;if(s){o=i;for(let a=i-1;a>=0;--a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=i-1;return o}findNewUpperIndex(r,i,s){let o;if(s){o=i;for(let a=i+1;a<this._objects.length;++a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=i+1;return o}collectObjects(r){let{left:i,top:s,width:o,height:a}=r,{includeIntersecting:c=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=[],h=new F(i,s),f=h.add(new F(o,a));for(let p=this._objects.length-1;p>=0;p--){const y=this._objects[p];y.selectable&&y.visible&&(c&&y.intersectsWithRect(h,f)||y.isContainedWithinRect(h,f)||c&&y.containsPoint(h)||c&&y.containsPoint(f))&&u.push(y)}return u}}return e}class hd extends Wp{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function Io(n){return ra().requestAnimationFrame(n)}function zp(n){return ra().cancelAnimationFrame(n)}let Vp=0;const Cn=()=>Vp++,un=()=>{const n=Fi().createElement("canvas");if(!n||n.getContext===void 0)throw new Wr("Failed to create `canvas` element");return n},Xp=()=>Fi().createElement("img"),mr=n=>{const e=un();return e.width=n.width,e.height=n.height,e},dd=(n,e,t)=>n.toDataURL("image/".concat(e),t),fd=(n,e,t)=>new Promise(((r,i)=>{n.toBlob(r,"image/".concat(e),t)})),At=n=>n*hc,hn=n=>n/hc,qp=n=>n.every(((e,t)=>e===Jt[t])),er=(n,e,t)=>new F(n).transform(e,t),Dr=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:r,y:i}=new F(n[4],n[5]).transform(t,!0);return t[4]=-r,t[5]=-i,t},Vt=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],mc=(n,e)=>n.reduceRight(((t,r)=>r&&t?Vt(r,t,e):r||t),void 0)||Jt.concat(),gd=n=>{let[e,t]=n;return Math.atan2(t,e)},Yo=n=>{const e=gd(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),r=Math.sqrt(t),i=(n[0]*n[3]-n[2]*n[1])/r,s=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:hn(e),scaleX:r,scaleY:i,skewX:hn(s),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},Es=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Ni(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=At(n),i=ln(r),s=cn(r);return[i,s,-s,i,e?e-(i*e-s*t):0,t?t-(s*e+i*t):0]}const vc=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},pd=n=>Math.tan(At(n)),md=n=>[1,0,pd(n),1,0,0],vd=n=>[1,pd(n),0,1,0,0],sa=n=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:i=!1,skewX:s=0,skewY:o=0}=n,a=vc(r?-e:e,i?-t:t);return s&&(a=Vt(a,md(s),!0)),o&&(a=Vt(a,vd(o),!0)),a},Yp=n=>{const{translateX:e=0,translateY:t=0,angle:r=0}=n;let i=Es(e,t);r&&(i=Vt(i,Ni({angle:r})));const s=sa(n);return qp(s)||(i=Vt(i,s)),i},Bo=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((function(r,i){if(e&&e.aborted)return i(new Fp("loadImage"));const s=Xp();let o;e&&(o=function(c){s.src="",i(c)},e.addEventListener("abort",o,{once:!0}));const a=function(){s.onload=s.onerror=null,o&&e?.removeEventListener("abort",o),r(s)};n?(s.onload=a,s.onerror=function(){o&&e?.removeEventListener("abort",o),i(new Wr("Error loading ".concat(s.src)))},t&&(s.crossOrigin=t),s.src=n):a()}))},_s=function(n){let{signal:e,reviver:t=Ro}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(((r,i)=>{const s=[];e&&e.addEventListener("abort",i,{once:!0}),Promise.all(n.map((o=>fe.getClass(o.type).fromObject(o,{signal:e}).then((a=>(t(o,a),s.push(a),a)))))).then(r).catch((o=>{s.forEach((a=>{a.dispose&&a.dispose()})),i(o)})).finally((()=>{e&&e.removeEventListener("abort",i)}))}))},oa=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(((t,r)=>{const i=[];e&&e.addEventListener("abort",r,{once:!0});const s=Object.values(n).map((a=>a&&a.type&&fe.has(a.type)?_s([a],{signal:e}).then((c=>{let[u]=c;return i.push(u),u})):a)),o=Object.keys(n);Promise.all(s).then((a=>a.reduce(((c,u,h)=>(c[o[h]]=u,c)),{}))).then(t).catch((a=>{i.forEach((c=>{c.dispose&&c.dispose()})),r(a)})).finally((()=>{e&&e.removeEventListener("abort",r)}))}))},Hi=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce(((e,t)=>(t in n&&(e[t]=n[t]),e)),{})},yc=(n,e)=>Object.keys(n).reduce(((t,r)=>(e(n[r],r,n)&&(t[r]=n[r]),t)),{}),pt=(n,e)=>parseFloat(Number(n).toFixed(e)),ws=n=>"matrix("+n.map((e=>pt(e,rt.NUM_FRACTION_DIGITS))).join(" ")+")",gr=n=>!!n&&n.toLive!==void 0,Ou=n=>!!n&&typeof n.toObject=="function",Eu=n=>!!n&&n.offsetX!==void 0&&"source"in n,Fn=n=>!!n&&"multiSelectionStacking"in n;function yd(n){const e=n&&kr(n);let t=0,r=0;if(!n||!e)return{left:t,top:r};let i=n;const s=e.documentElement,o=e.body||{scrollLeft:0,scrollTop:0};for(;i&&(i.parentNode||i.host)&&(i=i.parentNode||i.host,i===e?(t=o.scrollLeft||s.scrollLeft||0,r=o.scrollTop||s.scrollTop||0):(t+=i.scrollLeft||0,r+=i.scrollTop||0),i.nodeType!==1||i.style.position!=="fixed"););return{left:t,top:r}}const kr=n=>n.ownerDocument||null,bd=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},_d=function(n,e,t){let{width:r,height:i}=t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=r,n.height=i,s>1&&(n.setAttribute("width",(r*s).toString()),n.setAttribute("height",(i*s).toString()),e.scale(s,s))},Ll=(n,e)=>{let{width:t,height:r}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(n.style.height=typeof r=="number"?"".concat(r,"px"):r)};function Au(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=rr,n}class wd{constructor(e){A(this,"_originalCanvasStyle",void 0),A(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&r.getContext!==void 0?e:e&&Fi().getElementById(e)||un();var r;if(t.hasAttribute("data-fabric"))throw new Wr("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:i}=this.lower;i.classList.remove("lower-canvas"),i.removeAttribute("data-fabric"),i.setAttribute("width","".concat(t)),i.setAttribute("height","".concat(r)),i.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:i}=this.lower;_d(r,i,e,t)}setCSSDimensions(e){Ll(this.lower.el,e)}calcOffset(){return(function(e){var t;const r=e&&kr(e),i={left:0,top:0};if(!r)return i;const s=((t=bd(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};i.left+=parseInt(s.borderLeftWidth,10)||0,i.top+=parseInt(s.borderTopWidth,10)||0,i.left+=parseInt(s.paddingLeft,10)||0,i.top+=parseInt(s.paddingTop,10)||0;let o={left:0,top:0};const a=r.documentElement;e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect());const c=yd(e);return{left:o.left+c.left-(a.clientLeft||0)+i.left,top:o.top+c.top-(a.clientTop||0)+i.top}})(this.lower.el)}dispose(){zr().dispose(this.lower.el),delete this.lower}}const $p={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...Jt]};class As extends ud(hd){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return As.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new wd(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];const s=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(Sn("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?od():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const i=D({width:this.width,height:this.height},e);this.elements.setDimensions(i,this.getRetinaScaling()),this.hasLostContext=!0,this.width=i.width,this.height=i.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,i=[...this.viewportTransform],s=er(e,Dr(i));i[0]=t,i[3]=t;const o=er(s,i);i[4]+=r.x-o.x,i[5]+=r.y-o.y,this.setViewportTransform(i)}setZoom(e){this.zoomToPoint(new F(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new F(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Io((()=>this.renderAndReset())))}calcViewportBoundaries(){const e=this.width,t=this.height,r=Dr(this.viewportTransform),i=er({x:0,y:0},r),s=er({x:e,y:t},r),o=i.min(s),a=i.max(s);return this.vptCoords={tl:o,tr:new F(a.x,o.y),bl:new F(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(zp(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,i=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),i&&(i._set("canvas",this),i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,i)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,i=t.length;r<i;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],i=this["".concat(t,"Image")],s=this.viewportTransform,o=this["".concat(t,"Vpt")];if(!r&&!i)return;const a=gr(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?r.toLive(e):r,o&&e.transform(...s),a){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const c=r.gradientTransform||r.patternTransform;c&&e.transform(...c)}e.fill(),e.restore()}if(i){e.save();const{skipOffscreen:c}=this;this.skipOffscreen=o,o&&e.transform(...s),i.render(e),this.skipOffscreen=c,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new F(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new F(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new F(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new F(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new F(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return er(this.getCenterPoint(),Dr(this.viewportTransform))}_centerObject(e,t){e.setXY(t,Ye,Ye),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,i=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return D(D(D({version:Ml},Hi(this,t)),{},{objects:this._objects.filter((s=>!s.excludeFromExport)).map((s=>this._toObject(s,e,t)))},this.__serializeBgOverlay(e,t)),i?{clipPath:i}:null)}_toObject(e,t,r){let i;this.includeDefaultValues||(i=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!i),s}__serializeBgOverlay(e,t){const r={},i=this.backgroundImage,s=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return gr(o)?o.excludeFromExport||(r.background=o.toObject(t)):o&&(r.background=o),gr(a)?a.excludeFromExport||(r.overlay=a.toObject(t)):a&&(r.overlay=a),i&&!i.excludeFromExport&&(r.backgroundImage=this._toObject(i,e,t)),s&&!s.excludeFromExport&&(r.overlayImage=this._toObject(s,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),i=t.height||"".concat(this.height),s=rt.NUM_FRACTION_DIGITS,o=t.viewBox;let a;if(o)a='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const c=this.viewportTransform;a='viewBox="'.concat(pt(-c[4]/c[0],s)," ").concat(pt(-c[5]/c[3],s)," ").concat(pt(this.width/c[0],s)," ").concat(pt(this.height/c[3],s),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',i,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Ml,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(Cn()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map((e=>{const t=this["".concat(e,"Color")];if(gr(t)){const r=this["".concat(e,"Vpt")],i=this.viewportTransform,s={isType:()=>!1,width:this.width/(r?i[0]:1),height:this.height/(r?i[3]:1)};return t.toSVG(s,{additionalTransform:r?ws(i):""})}})).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=rt.fontPaths;this._objects.forEach((function s(o){e.push(o),Fo(o)&&o._objects.forEach(s)})),e.forEach((s=>{if(!(o=s)||typeof o._renderText!="function")return;var o;const{styles:a,fontFamily:c}=s;!t[c]&&r[c]&&(t[c]=!0,a&&Object.values(a).forEach((u=>{Object.values(u).forEach((h=>{let{fontFamily:f=""}=h;!t[f]&&r[f]&&(t[f]=!0)}))})))}));const i=Object.keys(t).map((s=>`		@font-face {
			font-family: '`.concat(s,`';
			src: url('`).concat(r[s],`');
		}
`))).join("");return i?`	<style type="text/css"><![CDATA[
`.concat(i,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject((r=>{r.excludeFromExport||this._setSVGObject(e,r,t)}))}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const i=this[t];i&&!i.excludeFromExport&&i.toSVG&&e.push(i.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(gr(r)){const i=r.repeat||"",s=this.width,o=this.height,a=this["".concat(t,"Vpt")]?ws(Dr(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(s/2,",").concat(o/2,')" x="').concat(r.offsetX-s/2,'" y="').concat(r.offsetY-o/2,'" width="').concat(i!=="repeat-y"&&i!=="no-repeat"||!Eu(r)?s:r.source.width,'" height="').concat(i!=="repeat-x"&&i!=="no-repeat"||!Eu(r)?o:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Wr("`json` is undefined"));const i=typeof e=="string"?JSON.parse(e):e,{objects:s=[],backgroundImage:o,background:a,overlayImage:c,overlay:u,clipPath:h}=i,f=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([_s(s,{reviver:t,signal:r}),oa({backgroundImage:o,backgroundColor:a,overlayImage:c,overlayColor:u,clipPath:h},{signal:r})]).then((p=>{let[y,g]=p;return this.clear(),this.add(...y),this.set(i),this.set(g),this.renderOnAddRemove=f,this}))}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=mr(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:i=1,enableRetinaScaling:s=!1}=e,o=i*(s?this.getRetinaScaling():1);return dd(this.toCanvasElement(o,e),t,r)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:i=1,enableRetinaScaling:s=!1}=e,o=i*(s?this.getRetinaScaling():1);return fd(this.toCanvasElement(o,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:i,top:s,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||this.width)*e,c=(r||this.height)*e,u=this.getZoom(),h=this.width,f=this.height,p=this.skipControlsDrawing,y=u*e,g=this.viewportTransform,v=[y,0,0,y,(g[4]-(i||0))*e,(g[5]-(s||0))*e],b=this.enableRetinaScaling,_=mr({width:a,height:c}),C=o?this._objects.filter((E=>o(E))):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=v,this.width=a,this.height=c,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(_.getContext("2d"),C),this.viewportTransform=g,this.width=h,this.height=f,this.calcViewportBoundaries(),this.enableRetinaScaling=b,this.skipControlsDrawing=p,_}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),qo.cancelByCanvas(this),this.disposed=!0,new Promise(((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()}))}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject((e=>e.dispose())),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}A(As,"ownDefaults",$p);const Gp=["touchstart","touchmove","touchend"],Kp=n=>{const e=yd(n.target),t=(function(r){const i=r.changedTouches;return i&&i[0]?i[0]:r})(n);return new F(t.clientX+e.left,t.clientY+e.top)},Rl=n=>Gp.includes(n.type)||n.pointerType==="touch",ku=n=>{n.preventDefault(),n.stopPropagation()},on=n=>{let e=0,t=0,r=0,i=0;for(let s=0,o=n.length;s<o;s++){const{x:a,y:c}=n[s];(a>r||!s)&&(r=a),(a<e||!s)&&(e=a),(c>i||!s)&&(i=c),(c<t||!s)&&(t=c)}return{left:e,top:t,width:r-e,height:i-t}},Jp=["translateX","translateY","scaleX","scaleY"],Zp=(n,e)=>$o(n,Vt(e,n.calcOwnMatrix())),$o=(n,e)=>{const t=Yo(e),{translateX:r,translateY:i,scaleX:s,scaleY:o}=t,a=wt(t,Jp),c=new F(r,i);n.flipX=!1,n.flipY=!1,Object.assign(n,a),n.set({scaleX:s,scaleY:o}),n.setPositionByOrigin(c,Ye,Ye)},Qp=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},xd=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),bc=(n,e,t)=>{const r=n/2,i=e/2,s=[new F(-r,-i),new F(r,-i),new F(-r,i),new F(r,i)].map((a=>a.transform(t))),o=on(s);return new F(o.width,o.height)},aa=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Jt;return Vt(Dr(arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jt),n)},Di=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Jt;return n.transform(aa(e,t))},em=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Jt;return n.transform(aa(e,t),!0)},tm=(n,e,t)=>{const r=aa(e,t);return $o(n,Vt(r,n.calcOwnMatrix())),r},Sd=(n,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(n),D(D({},e),{},{target:r})),r.fire(n,e)},rm={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Mt=n=>typeof n=="string"?rm[n]:n-.5,Go="not-allowed";function Cd(n){return Mt(n.originX)===Mt(Ye)&&Mt(n.originY)===Mt(Ye)}function Du(n){return .5-Mt(n)}const Mr=(n,e)=>n[e],Td=(n,e,t,r)=>({e:n,transform:e,pointer:new F(t,r)});function Od(n,e){const t=n.getTotalAngle()+hn(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function _c(n,e,t,r,i){var s;let{target:o,corner:a}=n;const c=o.controls[a],u=((s=o.canvas)===null||s===void 0?void 0:s.getZoom())||1,h=o.padding/u,f=(function(p,y,g,v){const b=p.getRelativeCenterPoint(),_=g!==void 0&&v!==void 0?p.translateToGivenOrigin(b,Ye,Ye,g,v):new F(p.left,p.top);return(p.angle?y.rotate(-At(p.angle),b):y).subtract(_)})(o,new F(r,i),e,t);return f.x>=h&&(f.x-=h),f.x<=-h&&(f.x+=h),f.y>=h&&(f.y-=h),f.y<=h&&(f.y+=h),f.x-=c.offsetX,f.y-=c.offsetY,f}const nm=(n,e,t,r)=>{const{target:i,offsetX:s,offsetY:o}=e,a=t-s,c=r-o,u=!Mr(i,"lockMovementX")&&i.left!==a,h=!Mr(i,"lockMovementY")&&i.top!==c;return u&&i.set(at,a),h&&i.set(tr,c),(u||h)&&Sd(ad,Td(n,e,t,r)),u||h},Pu={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},nl=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),Mu=(n,e,t,r)=>{n/=255,e/=255,t/=255;const i=Math.max(n,e,t),s=Math.min(n,e,t);let o,a;const c=(i+s)/2;if(i===s)o=a=0;else{const u=i-s;switch(a=c>.5?u/(2-i-s):u/(i+s),i){case n:o=(e-t)/u+(e<t?6:0);break;case e:o=(t-n)/u+2;break;case t:o=(n-e)/u+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*c),r]},ju=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},lo=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),Lu=n=>{let[e,t,r,i=1]=n;const s=Math.round(.3*e+.59*t+.11*r);return[s,s,s,i]};class ht{constructor(e){if(A(this,"isUnrecognised",!1),e)if(e instanceof ht)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,i,s=1]=e;this.setSource([t,r,i,s])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Pu&&(e=Pu[e]),e==="transparent"?[255,255,255,0]:ht.sourceFromHex(e)||ht.sourceFromRgb(e)||ht.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=Mu(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,i]=Mu(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(i,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,i]=this.getSource();return"".concat(lo(e)).concat(lo(t)).concat(lo(r)).concat(lo(Math.round(255*i)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Lu(this.getSource())),this}toBlackWhite(e){const[t,,,r]=Lu(this.getSource()),i=t<(e||127)?0:255;return this.setSource([i,i,i,r]),this}overlayWith(e){e instanceof ht||(e=new ht(e));const t=this.getSource(),r=e.getSource(),[i,s,o]=t.map(((a,c)=>Math.round(.5*a+.5*r[c])));return this.setSource([i,s,o,t[3]]),this}static fromRgb(e){return ht.fromRgba(e)}static fromRgba(e){return new ht(ht.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[r,i,s]=t.slice(1,4).map((o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(2.55*a):a}));return[r,i,s,ju(t[4])]}}static fromHsl(e){return ht.fromHsla(e)}static fromHsla(e){return new ht(ht.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(ht.parseAngletoDegrees(t[1])%360+360)%360/360,i=parseFloat(t[2])/100,s=parseFloat(t[3])/100;let o,a,c;if(i===0)o=a=c=s;else{const u=s<=.5?s*(i+1):s+i-s*i,h=2*s-u;o=nl(h,u,r+1/3),a=nl(h,u,r),c=nl(h,u,r-1/3)}return[Math.round(255*o),Math.round(255*a),Math.round(255*c),ju(t[4])]}static fromHex(e){return new ht(ht.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map((c=>c+c)):t.match(/.{2}/g);const[i,s,o,a=255]=r.map((c=>parseInt(c,16)));return[i,s,o,a/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?hn(r):t.includes("turn")?360*r:r}}const Pi=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dc;const t=/\D{0,2}$/.exec(n),r=parseFloat(n),i=rt.DPI;switch(t?.[0]){case"mm":return r*i/25.4;case"cm":return r*i/2.54;case"in":return r*i;case"pt":return r*i/72;case"pc":return r*i/72*12;case"em":return r*e;default:return r}},im=n=>{const[e,t]=n.trim().split(" "),[r,i]=(s=e)&&s!==rr?[s.slice(1,4),s.slice(5,8)]:s===rr?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:t||"meet",alignX:r,alignY:i}},xs=function(n,e){let t,r,i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const s=new ht(e),o=s.getAlpha();t=s.toRgb(),o!==1&&(r=o.toString())}else t="none";return i?"".concat(n,": ").concat(t,"; ").concat(r?"".concat(n,"-opacity: ").concat(r,"; "):""):"".concat(n,'="').concat(t,'" ').concat(r?"".concat(n,'-opacity="').concat(r,'" '):"")};class Ed{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):rr,s=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",c=this.strokeMiterLimit?this.strokeMiterLimit:"4",u=this.opacity!==void 0?this.opacity:"1",h=this.visible?"":" visibility: hidden;",f=e?"":this.getSvgFilter(),p=xs(Lt,this.fill);return[xs(nr,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",c,"; ",p,"fill-rule: ",t,"; ","opacity: ",u,";",f,h].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),i='transform="'.concat(ws(r));return"".concat(i).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=i,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:i,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=i?'style="'.concat(this.getSvgFilter(),'" '):"",c=this.clipPath,u=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=c&&c.absolutePositioned,f=this.stroke,p=this.fill,y=this.shadow,g=[],v=e.indexOf("COMMON_PARTS");let b;c&&(c.clipPathId="CLIPPATH_".concat(Cn()),b='<clipPath id="'.concat(c.clipPathId,`" >
`).concat(c.toClipPathSVG(r),`</clipPath>
`)),h&&g.push("<g ",a,this.getSvgCommons(),` >
`),g.push("<g ",this.getSvgTransform(!1),h?"":a+this.getSvgCommons(),` >
`);const _=[o,u,t?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return e[v]=_,gr(p)&&g.push(p.toSVG(this)),gr(f)&&g.push(f.toSVG(this)),y&&g.push(y.toSVG(this)),c&&g.push(b),g.push(e.join("")),g.push(`</g>
`),h&&g.push(`</g>
`),r?r(g.join("")):g.join("")}addPaintOrder(){return this.paintFirst!==Lt?' paint-order="'.concat(this.paintFirst,'" '):""}}function la(n){return new RegExp("^("+n.join("|")+")\\b","i")}const Yn="textDecorationThickness",Ad=["fontSize","fontWeight","fontFamily","fontStyle"],kd=["underline","overline","linethrough"],Dd=[...Ad,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],Pd=[...Dd,...kd,"textBackgroundColor","direction",Yn],sm=[...Ad,...kd,nr,"strokeWidth",Lt,"deltaY","textBackgroundColor",Yn],om={_reNewline:fc,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:at,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:at,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[Yn]:66.667},Hr="justify",Ko="justify-left",ps="justify-right",ms="justify-center";var Ru,Fu,Iu;const Pr=String.raw(Ru||(Ru=Vr(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),il=String.raw(Fu||(Fu=Vr(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),am=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Pr+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Pr+"))?\\s+(.*)"),lm={cx:at,x:at,r:"radius",cy:tr,y:tr,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":Yn},sl="font-size",ol="clip-path";la(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);la(["symbol","image","marker","pattern","view","svg"]);const Bu=la(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(Iu||(Iu=Vr(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),Pr,il,Pr,il,Pr,il,Pr));const cm=new F(1,0),Md=new F,jd=(n,e)=>n.rotate(e),Fl=(n,e)=>new F(e).subtract(n),Il=n=>n.distanceFrom(Md),Bl=(n,e)=>Math.atan2(vs(n,e),hm(n,e)),um=n=>Bl(cm,n),wc=n=>n.eq(Md)?n:n.scalarDivide(Il(n)),Ld=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return wc(new F(-n.y,n.x).scalarMultiply(e?1:-1))},vs=(n,e)=>n.x*e.y-n.y*e.x,hm=(n,e)=>n.x*e.x+n.y*e.y,Nu=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const r=vs(e,t),i=vs(e,n),s=vs(t,n);return r>=0?i>=0&&s<=0:!(i<=0&&s>=0)},Hu="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Uu=new RegExp("(?:\\s|^)"+Hu+Hu+"("+Pr+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class an{constructor(e){const t=typeof e=="string"?an.parseShadow(e):e;Object.assign(this,an.ownDefaults,t),this.id=Cn()}static parseShadow(e){const t=e.trim(),[,r=0,i=0,s=0]=(Uu.exec(t)||[]).map((o=>parseFloat(o)||0));return{color:(t.replace(Uu,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:i,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=jd(new F(this.offsetX,this.offsetY),At(-e.angle)),r=new ht(this.color);let i=40,s=40;return e.width&&e.height&&(i=100*pt((Math.abs(t.x)+this.blur)/e.width,rt.NUM_FRACTION_DIGITS)+20,s=100*pt((Math.abs(t.y)+this.blur)/e.height,rt.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(i,'%" width="').concat(100+2*i,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(pt(this.blur?this.blur/2:0,rt.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(pt(t.x,rt.NUM_FRACTION_DIGITS),'" dy="').concat(pt(t.y,rt.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=an.ownDefaults;return this.includeDefaultValues?e:yc(e,((r,i)=>r!==t[i]))}static async fromObject(e){return new this(e)}}A(an,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),A(an,"type","shadow"),fe.setClass(an,"shadow");const Li=(n,e,t)=>Math.max(n,Math.min(e,t)),dm=[tr,at,or,pr,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Ii,Bi],gn=[Lt,nr,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],fm={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:at,originY:tr,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Lt,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},gm=(n,e,t,r)=>-t*Math.cos(n/r*Os)+t+e,pm=()=>!1;class xc{constructor(e){let{startValue:t,byValue:r,duration:i=500,delay:s=0,easing:o=gm,onStart:a=Ro,onChange:c=Ro,onComplete:u=Ro,abort:h=pm,target:f}=e;A(this,"_state","pending"),A(this,"durationProgress",0),A(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=i,this.delay=s,this.easing=o,this._onStart=a,this._onChange=c,this._onComplete=u,this._abort=h,this.target=f,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout((()=>Io(e)),this.delay):Io(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:i,valueProgress:s}=this.calculate(r);this.value=Object.freeze(i),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Io(this.tick)))}register(){qo.push(this)}unregister(){qo.remove(this)}abort(){this._state="aborted",this.unregister()}}const mm=["startValue","endValue"];class vm extends xc{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(D(D({},wt(e,mm)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const ym=["startValue","endValue"];class bm extends xc{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(D(D({},wt(e,ym)),{},{startValue:t,byValue:r.map(((i,s)=>i-t[s]))}))}calculate(e){const t=this.startValue.map(((r,i)=>this.easing(e,r,this.byValue[i],this.duration,i)));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const _m=["startValue","endValue","easing","onChange","onComplete","abort"],wm=(n,e,t,r)=>e+t*(1-Math.cos(n/r*Os)),al=n=>n&&((e,t,r)=>n(new ht(e).toRgba(),t,r));class xm extends xc{constructor(e){let{startValue:t,endValue:r,easing:i=wm,onChange:s,onComplete:o,abort:a}=e,c=wt(e,_m);const u=new ht(t).getSource(),h=new ht(r).getSource();super(D(D({},c),{},{startValue:u,byValue:h.map(((f,p)=>f-u[p])),easing:i,onChange:al(s),onComplete:al(o),abort:al(a)}))}calculate(e){const[t,r,i,s]=this.startValue.map(((a,c)=>this.easing(e,a,this.byValue[c],this.duration,c))),o=[...[t,r,i].map(Math.round),Li(0,s,1)];return{value:o,valueProgress:o.map(((a,c)=>this.byValue[c]!==0?Math.abs((a-this.startValue[c])/this.byValue[c]):0)).find((a=>a!==0))||0}}}function Rd(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new bm(n):new vm(n);return e.start(),e}function Sm(n){const e=new xm(n);return e.start(),e}class Tt{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some((t=>t.eq(e)))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter((i=>!this.includes(i)))),this}static isPointContained(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(i||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(i||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const s=Fl(t,r),o=Fl(t,e).divide(s);return i?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(e,t){const r=new F(e).setX(Math.min(e.x-1,...t.map((s=>s.x))));let i=0;for(let s=0;s<t.length;s++){const o=this.intersectSegmentSegment(t[s],t[(s+1)%t.length],e,r);if(o.includes(e))return!0;i+=+(o.status==="Intersection")}return i%2==1}static intersectLineLine(e,t,r,i){let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=t.x-e.x,c=t.y-e.y,u=i.x-r.x,h=i.y-r.y,f=e.x-r.x,p=e.y-r.y,y=u*p-h*f,g=a*p-c*f,v=h*a-u*c;if(v!==0){const b=y/v,_=g/v;return(s||0<=b&&b<=1)&&(o||0<=_&&_<=1)?new Tt("Intersection").append(new F(e.x+b*a,e.y+b*c)):new Tt}if(y===0||g===0){const b=s||o||Tt.isPointContained(e,r,i)||Tt.isPointContained(t,r,i)||Tt.isPointContained(r,e,t)||Tt.isPointContained(i,e,t);return new Tt(b?"Coincident":void 0)}return new Tt("Parallel")}static intersectSegmentLine(e,t,r,i){return Tt.intersectLineLine(e,t,r,i,!1,!0)}static intersectSegmentSegment(e,t,r,i){return Tt.intersectLineLine(e,t,r,i,!1,!1)}static intersectLinePolygon(e,t,r){let i=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=new Tt,o=r.length;for(let a,c,u,h=0;h<o;h++){if(a=r[h],c=r[(h+1)%o],u=Tt.intersectLineLine(e,t,a,c,i,!1),u.status==="Coincident")return u;s.append(...u.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,t,r){return Tt.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new Tt,i=e.length,s=[];for(let o=0;o<i;o++){const a=e[o],c=e[(o+1)%i],u=Tt.intersectSegmentPolygon(a,c,t);u.status==="Coincident"?(s.push(u),r.append(a,c)):r.append(...u.points)}return s.length>0&&s.length===e.length?new Tt("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const i=t.min(r),s=t.max(r),o=new F(s.x,i.y),a=new F(i.x,s.y);return Tt.intersectPolygonPolygon(e,[i,o,s,a])}}class Cm extends hd{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?er(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=er(e,Dr(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new F(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:i}=this.aCoords||(this.aCoords=this.calcACoords()),s=[e,t,r,i];if(this.group){const o=this.group.calcTransformMatrix();return s.map((a=>er(a,o)))}return s}intersectsWithRect(e,t){return Tt.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=Tt.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every((t=>e.containsPoint(t)))}isContainedWithinRect(e,t){const{left:r,top:i,width:s,height:o}=this.getBoundingRect();return r>=e.x&&r+s<=t.x&&i>=e.y&&i+o<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Tt.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some((r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y))||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every((r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y)))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return on(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(or,e),this._set(pr,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?hn(gd(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||Jt.concat()}calcACoords(){const e=Ni({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),i=Es(t,r),s=Vt(i,e),o=this._getTransformedDimensions(),a=o.x/2,c=o.y/2;return{tl:er({x:-a,y:-c},s),tr:er({x:a,y:-c},s),bl:er({x:-a,y:c},s),br:er({x:a,y:c},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Mt(this.originX),Mt(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),i=this.matrixCache;return i&&i.key.every(((s,o)=>s===r[o]))?i.value:(this.group&&(t=Vt(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),i={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=Yp(i);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new F(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=D({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let i=r,s=0;this.strokeUniform&&(i=0,s=r);const o=t.width+i,a=t.height+i;let c;return c=t.skewX===0&&t.skewY===0?new F(o*t.scaleX,a*t.scaleY):bc(o,a,sa(t)),c.scalarAdd(s)}translateToGivenOrigin(e,t,r,i,s){let o=e.x,a=e.y;const c=Mt(i)-Mt(t),u=Mt(s)-Mt(r);if(c||u){const h=this._getTransformedDimensions();o+=c*h.x,a+=u*h.y}return new F(o,a)}translateToCenterPoint(e,t,r){if(t===Ye&&r===Ye)return e;const i=this.translateToGivenOrigin(e,t,r,Ye,Ye);return this.angle?i.rotate(At(this.angle),e):i}translateToOriginPoint(e,t,r){const i=this.translateToGivenOrigin(e,Ye,Ye,t,r);return this.angle?i.rotate(At(this.angle),e):i}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?er(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new F(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const i=this.translateToCenterPoint(e,t,r),s=this.translateToOriginPoint(i,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),at,tr)}}const Tm=["type"],Om=["extraParam"];let Zr=class No extends Cm{static getDefaults(){return No.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){Sn("warn","Setting type has no effect",e)}constructor(e){super(),A(this,"_cacheContext",null),Object.assign(this,No.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=un(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,i=rt.maxCacheSideLimit,s=rt.minCacheSideLimit;if(t<=i&&r<=i&&t*r<=rt.perfLimitSizeTotal)return t<s&&(e.width=s),r<s&&(e.height=s),e;const o=t/r,[a,c]=gs.limitDimsByArea(o),u=Li(s,a,i),h=Li(s,c,i);return t>u&&(e.zoomX/=t/u,e.width=u,e.capped=!0),r>h&&(e.zoomY/=r/h,e.height=h,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,i=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(i+2),zoomX:e.x,zoomY:e.y,x:r,y:i}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:i,zoomX:s,zoomY:o,x:a,y:c}=this._limitCacheSize(this._getCacheCanvasDimensions()),u=r!==e.width||i!==e.height,h=this.zoomX!==s||this.zoomY!==o;if(!e||!t)return!1;if(u||h){r!==e.width||i!==e.height?(e.width=r,e.height=i):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const f=a/2,p=c/2;return this.cacheTranslationX=Math.round(e.width/2-f)+f,this.cacheTranslationY=Math.round(e.height/2-p)+p,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(s,o),this.zoomX=s,this.zoomY=o,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new F(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Yo(this.calcTransformMatrix());return new F(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==or&&e!==pr||(t=this._constrainScale(t)),e===or&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof an||(t=new an(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:i,cacheTranslationY:s}=this,{width:o,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:i,cacheTranslationY:s,width:o,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===nr&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const i=this.fill,s=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=i,this.stroke=s}createClipPathLayer(e,t){const r=mr(t),i=r.getContext("2d");if(i.translate(t.cacheTranslationX,t.cacheTranslationY),i.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach((s=>{s.transform(i)})),t.parentClipPaths.push(e),e.absolutePositioned){const s=Dr(this.calcTransformMatrix());i.transform(s[0],s[1],s[2],s[3],s[4],s[5])}return e.transform(i),e.drawObject(i,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const i=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,i)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,gr(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(gr(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,i=this.getCanvasRetinaScaling(),[s,,,o]=r?.viewportTransform||Jt,a=s*i,c=o*i,u=t.nonScaling?new F(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*rt.browserShadowBlurConstant*(a+c)*(u.x+u.y)/4,e.shadowOffsetX=t.offsetX*a*u.x,e.shadowOffsetY=t.offsetY*c*u.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!gr(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,i=-this.width/2+t.offsetX||0,s=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,i,s):e.transform(1,0,0,1,i,s),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:i,offsetY:s}}_renderPaintInOrder(e){this.paintFirst===nr?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const i=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),o=i.x/this.scaleX/s,a=i.y/this.scaleY/s,c=mr({width:Math.ceil(o),height:Math.ceil(a)}),u=c.getContext("2d");u&&(u.beginPath(),u.moveTo(0,0),u.lineTo(o,0),u.lineTo(o,a),u.lineTo(0,a),u.closePath(),u.translate(o/2,a/2),u.scale(i.zoomX/this.scaleX/s,i.zoomY/this.scaleY/s),this._applyPatternGradientTransform(u,t),u.fillStyle=t.toLive(e),u.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(s*this.scaleX/i.zoomX,s*this.scaleY/i.zoomY),e.strokeStyle=(r=u.createPattern(c,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new F(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(fe.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=xd(this),r=this.group,i=this.shadow,s=Math.abs,o=e.enableRetinaScaling?od():1,a=(e.multiplier||1)*o,c=e.canvasProvider||(C=>new As(C,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&Qp(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&tm(this,this.getViewportTransform()),this.setCoords();const u=un(),h=this.getBoundingRect(),f=this.shadow,p=new F;if(f){const C=f.blur,E=f.nonScaling?new F(1,1):this.getObjectScaling();p.x=2*Math.round(s(f.offsetX)+C)*s(E.x),p.y=2*Math.round(s(f.offsetY)+C)*s(E.y)}const y=h.width+p.x,g=h.height+p.y;u.width=Math.ceil(y),u.height=Math.ceil(g);const v=c(u);e.format==="jpeg"&&(v.backgroundColor="#fff"),this.setPositionByOrigin(new F(v.width/2,v.height/2),Ye,Ye);const b=this.canvas;v._objects=[this],this.set("canvas",v),this.setCoords();const _=v.toCanvasElement(a||1,e);return this.set("canvas",b),this.shadow=i,r&&(this.group=r),this.set(t),this.setCoords(),v._objects=[],v.destroy(),_}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return dd(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return fd(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:i}=this;if(t){const{x:s,y:o}=this.getRelativeCenterPoint();this.originX=Ye,this.originY=Ye,this.left=s,this.top=o}if(this.set("angle",e),t){const{x:s,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,i);this.left=s,this.top=o,this.originX=r,this.originY=i}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){qo.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&zr().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce(((r,i)=>{let[s,o]=i;return r[s]=this._animate(s,o,t),r}),{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=e.split("."),s=this.constructor.colorProperties.includes(i[i.length-1]),{abort:o,startValue:a,onChange:c,onComplete:u}=r,h=D(D({},r),{},{target:this,startValue:a??i.reduce(((f,p)=>f[p]),this),endValue:t,abort:o?.bind(this),onChange:(f,p,y)=>{i.reduce(((g,v,b)=>(b===i.length-1&&(g[v]=f),g[v])),this),c&&c(f,p,y)},onComplete:(f,p,y)=>{this.setCoords(),u&&u(f,p,y)}});return s?Sm(h):Rd(h)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(t.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let i,s=0;s<t.length;s++){if(i=t[s],i===e)return{fork:[this,...t.slice(0,s)],otherFork:[],common:t.slice(s)};for(let o=0;o<r.length;o++){if(this===r[o])return{fork:[],otherFork:[e,...r.slice(0,o)],common:[this,...t]};if(i===r[o])return{fork:[this,...t.slice(0,s)],otherFork:[e,...r.slice(0,o)],common:t.slice(s)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const i=t.fork.pop(),s=t.otherFork.pop(),o=r._objects.indexOf(i),a=r._objects.indexOf(s);return o>-1&&o>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(No.customProperties,this.constructor.customProperties||[]);let t;const r=rt.NUM_FRACTION_DIGITS,{clipPath:i,fill:s,stroke:o,shadow:a,strokeDashArray:c,left:u,top:h,originX:f,originY:p,width:y,height:g,strokeWidth:v,strokeLineCap:b,strokeDashOffset:_,strokeLineJoin:C,strokeUniform:E,strokeMiterLimit:j,scaleX:I,scaleY:V,angle:L,flipX:P,flipY:X,opacity:ne,visible:se,backgroundColor:G,fillRule:oe,paintFirst:ge,globalCompositeOperation:Re,skewX:Fe,skewY:Ie}=this;i&&!i.excludeFromExport&&(t=i.toObject(e.concat("inverted","absolutePositioned")));const Ce=ut=>pt(ut,r),ct=D(D({},Hi(this,e)),{},{type:this.constructor.type,version:Ml,originX:f,originY:p,left:Ce(u),top:Ce(h),width:Ce(y),height:Ce(g),fill:Ou(s)?s.toObject():s,stroke:Ou(o)?o.toObject():o,strokeWidth:Ce(v),strokeDashArray:c&&c.concat(),strokeLineCap:b,strokeDashOffset:_,strokeLineJoin:C,strokeUniform:E,strokeMiterLimit:Ce(j),scaleX:Ce(I),scaleY:Ce(V),angle:Ce(L),flipX:P,flipY:X,opacity:Ce(ne),shadow:a&&a.toObject(),visible:se,backgroundColor:G,fillRule:oe,paintFirst:ge,globalCompositeOperation:Re,skewX:Ce(Fe),skewY:Ce(Ie)},t?{clipPath:t}:null);return this.includeDefaultValues?ct:this._removeDefaultValues(ct)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return yc(e,((i,s)=>{if(s===at||s===tr||s==="type")return!0;const o=r[s];return i!==o&&!(Array.isArray(i)&&Array.isArray(o)&&i.length===0&&o.length===0)}))}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=wt(e,Tm),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:i}=r,s=wt(r,Om);return oa(t,s).then((o=>i?(delete o[i],new this(t[i],o)):new this(o)))}static fromObject(e,t){return this._fromObject(e,t)}};A(Zr,"stateProperties",dm),A(Zr,"cacheProperties",gn),A(Zr,"ownDefaults",fm),A(Zr,"type","FabricObject"),A(Zr,"colorProperties",[Lt,nr,"backgroundColor"]),A(Zr,"customProperties",[]),fe.setClass(Zr),fe.setClass(Zr,"object");const Ui=(n,e,t)=>(r,i,s,o)=>{const a=e(r,i,s,o);return a&&Sd(n,D(D({},Td(r,i,s,o)),t)),a};function Wi(n){return(e,t,r,i)=>{const{target:s,originX:o,originY:a}=t,c=s.getRelativeCenterPoint(),u=s.translateToOriginPoint(c,o,a),h=n(e,t,r,i);return s.setPositionByOrigin(u,t.originX,t.originY),h}}const Wu=Ui(bs,Wi(((n,e,t,r)=>{const i=_c(e,e.originX,e.originY,t,r);if(Mt(e.originX)===Mt(Ye)||Mt(e.originX)===Mt(Et)&&i.x<0||Mt(e.originX)===Mt(at)&&i.x>0){const{target:s}=e,o=s.strokeWidth/(s.strokeUniform?s.scaleX:1),a=Cd(e)?2:1,c=s.width,u=Math.abs(i.x*a/s.scaleX)-o;return s.set("width",Math.max(u,1)),c!==s.width}return!1})));function Em(n,e,t,r,i){r=r||{};const s=this.sizeX||r.cornerSize||i.cornerSize,o=this.sizeY||r.cornerSize||i.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:i.transparentCorners,c=a?nr:Lt,u=!a&&(r.cornerStrokeColor||i.cornerStrokeColor);let h,f=e,p=t;n.save(),n.fillStyle=r.cornerColor||i.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||i.cornerStrokeColor||"",s>o?(h=s,n.scale(1,o/s),p=t*s/o):o>s?(h=o,n.scale(s/o,1),f=e*o/s):h=s,n.beginPath(),n.arc(f,p,h/2,0,zo,!1),n[c](),u&&n.stroke(),n.restore()}function Am(n,e,t,r,i){r=r||{};const s=this.sizeX||r.cornerSize||i.cornerSize,o=this.sizeY||r.cornerSize||i.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:i.transparentCorners,c=a?nr:Lt,u=!a&&(r.cornerStrokeColor||i.cornerStrokeColor),h=s/2,f=o/2;n.save(),n.fillStyle=r.cornerColor||i.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||i.cornerStrokeColor||"",n.translate(e,t);const p=i.getTotalAngle();n.rotate(At(p)),n["".concat(c,"Rect")](-h,-f,s,o),u&&n.strokeRect(-h,-f,s,o),n.restore()}class Er{constructor(e){A(this,"visible",!0),A(this,"actionName",ia),A(this,"angle",0),A(this,"x",0),A(this,"y",0),A(this,"offsetX",0),A(this,"offsetY",0),A(this,"sizeX",0),A(this,"sizeY",0),A(this,"touchSizeX",0),A(this,"touchSizeY",0),A(this,"cursorStyle","crosshair"),A(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,i){var s;let{tl:o,tr:a,br:c,bl:u}=i;return((s=t.canvas)===null||s===void 0?void 0:s.getActiveObject())===t&&t.isControlVisible(e)&&Tt.isPointInPolygon(r,[o,a,c,u])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,i;return(r=(i=e._controlsVisibility)===null||i===void 0?void 0:i[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,i){return new F(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,i,s,o){const a=mc([Es(r,i),Ni({angle:e}),vc((s?this.touchSizeX:this.sizeX)||t,(s?this.touchSizeY:this.sizeY)||t)]);return{tl:new F(-.5,-.5).transform(a),tr:new F(.5,-.5).transform(a),br:new F(.5,.5).transform(a),bl:new F(-.5,.5).transform(a)}}render(e,t,r,i,s){((i=i||{}).cornerStyle||s.cornerStyle)==="circle"?Em.call(this,e,t,r,i,s):Am.call(this,e,t,r,i,s)}}const km=(n,e,t)=>t.lockRotation?Go:e.cursorStyle,Dm=Ui(ld,Wi(((n,e,t,r)=>{let{target:i,ex:s,ey:o,theta:a,originX:c,originY:u}=e;const h=i.translateToOriginPoint(i.getRelativeCenterPoint(),c,u);if(Mr(i,"lockRotation"))return!1;const f=Math.atan2(o-h.y,s-h.x),p=Math.atan2(r-h.y,t-h.x);let y=hn(p-f+a);if(i.snapAngle&&i.snapAngle>0){const v=i.snapAngle,b=i.snapThreshold||v,_=Math.ceil(y/v)*v,C=Math.floor(y/v)*v;Math.abs(y-C)<b?y=C:Math.abs(y-_)<b&&(y=_)}y<0&&(y=360+y),y%=360;const g=i.angle!==y;return i.angle=y,g})));function Fd(n,e){const t=e.canvas,r=n[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function Id(n,e,t){const r=Mr(n,"lockScalingX"),i=Mr(n,"lockScalingY");if(r&&i||!e&&(r||i)&&t||r&&e==="x"||i&&e==="y")return!0;const{width:s,height:o,strokeWidth:a}=n;return s===0&&a===0&&e!=="y"||o===0&&a===0&&e!=="x"}const Pm=["e","se","s","sw","w","nw","n","ne","e"],hs=(n,e,t)=>{const r=Fd(n,t);if(Id(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",r))return Go;const i=Od(t,e);return"".concat(Pm[i],"-resize")};function Sc(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=e.target,o=i.by,a=Fd(n,s);let c,u,h,f,p,y;if(Id(s,o,a))return!1;if(e.gestureScale)u=e.scaleX*e.gestureScale,h=e.scaleY*e.gestureScale;else{if(c=_c(e,e.originX,e.originY,t,r),p=o!=="y"?Math.sign(c.x||e.signX||1):1,y=o!=="x"?Math.sign(c.y||e.signY||1):1,e.signX||(e.signX=p),e.signY||(e.signY=y),Mr(s,"lockScalingFlip")&&(e.signX!==p||e.signY!==y))return!1;if(f=s._getTransformedDimensions(),a&&!o){const b=Math.abs(c.x)+Math.abs(c.y),{original:_}=e,C=b/(Math.abs(f.x*_.scaleX/s.scaleX)+Math.abs(f.y*_.scaleY/s.scaleY));u=_.scaleX*C,h=_.scaleY*C}else u=Math.abs(c.x*s.scaleX/f.x),h=Math.abs(c.y*s.scaleY/f.y);Cd(e)&&(u*=2,h*=2),e.signX!==p&&o!=="y"&&(e.originX=Du(e.originX),u*=-1,e.signX=p),e.signY!==y&&o!=="x"&&(e.originY=Du(e.originY),h*=-1,e.signY=y)}const g=s.scaleX,v=s.scaleY;return o?(o==="x"&&s.set(or,u),o==="y"&&s.set(pr,h)):(!Mr(s,"lockScalingX")&&s.set(or,u),!Mr(s,"lockScalingY")&&s.set(pr,h)),g!==s.scaleX||v!==s.scaleY}const co=Ui(na,Wi(((n,e,t,r)=>Sc(n,e,t,r)))),Mm=Ui(na,Wi(((n,e,t,r)=>Sc(n,e,t,r,{by:"x"})))),jm=Ui(na,Wi(((n,e,t,r)=>Sc(n,e,t,r,{by:"y"})))),Lm=["target","ex","ey","skewingSide"],ll={x:{counterAxis:"y",scale:or,skew:Ii,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:pr,skew:Bi,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},Rm=["ns","nesw","ew","nwse"],Fm=(n,e,t)=>{if(e.x!==0&&Mr(t,"lockSkewingY")||e.y!==0&&Mr(t,"lockSkewingX"))return Go;const r=Od(t,e)%4;return"".concat(Rm[r],"-resize")};function Bd(n,e,t,r,i){const{target:s}=t,{counterAxis:o,origin:a,lockSkewing:c,skew:u,flip:h}=ll[n];if(Mr(s,c))return!1;const{origin:f,flip:p}=ll[o],y=Mt(t[f])*(s[p]?-1:1),g=-Math.sign(y)*(s[h]?-1:1),v=.5*-((s[u]===0&&_c(t,Ye,Ye,r,i)[n]>0||s[u]>0?1:-1)*g)+.5;return Ui(cd,Wi(((_,C,E,j)=>(function(I,V,L){let{target:P,ex:X,ey:ne,skewingSide:se}=V,G=wt(V,Lm);const{skew:oe}=ll[I],ge=L.subtract(new F(X,ne)).divide(new F(P.scaleX,P.scaleY))[I],Re=P[oe],Fe=G[oe],Ie=Math.tan(At(Fe)),Ce=I==="y"?P._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:P._getTransformedDimensions({scaleX:1,scaleY:1}).y,ct=2*ge*se/Math.max(Ce,1)+Ie,ut=hn(Math.atan(ct));P.set(oe,ut);const be=Re!==P[oe];if(be&&I==="y"){const{skewX:ve,scaleX:ke}=P,_e=P._getTransformedDimensions({skewY:Re}),we=P._getTransformedDimensions(),ee=ve!==0?_e.x/we.x:1;ee!==1&&P.set(or,ee*ke)}return be})(n,C,new F(E,j)))))(e,D(D({},t),{},{[a]:v,skewingSide:g}),r,i)}const Im=(n,e,t,r)=>Bd("x",n,e,t,r),Bm=(n,e,t,r)=>Bd("y",n,e,t,r);function ca(n,e){return n[e.canvas.altActionKey]}const uo=(n,e,t)=>{const r=ca(n,t);return e.x===0?r?Ii:pr:e.y===0?r?Bi:or:""},Ci=(n,e,t)=>ca(n,t)?Fm(0,e,t):hs(n,e,t),zu=(n,e,t,r)=>ca(n,e.target)?Bm(n,e,t,r):Mm(n,e,t,r),Vu=(n,e,t,r)=>ca(n,e.target)?Im(n,e,t,r):jm(n,e,t,r),Nd=()=>({ml:new Er({x:-.5,y:0,cursorStyleHandler:Ci,actionHandler:zu,getActionName:uo}),mr:new Er({x:.5,y:0,cursorStyleHandler:Ci,actionHandler:zu,getActionName:uo}),mb:new Er({x:0,y:.5,cursorStyleHandler:Ci,actionHandler:Vu,getActionName:uo}),mt:new Er({x:0,y:-.5,cursorStyleHandler:Ci,actionHandler:Vu,getActionName:uo}),tl:new Er({x:-.5,y:-.5,cursorStyleHandler:hs,actionHandler:co}),tr:new Er({x:.5,y:-.5,cursorStyleHandler:hs,actionHandler:co}),bl:new Er({x:-.5,y:.5,cursorStyleHandler:hs,actionHandler:co}),br:new Er({x:.5,y:.5,cursorStyleHandler:hs,actionHandler:co}),mtr:new Er({x:0,y:-.5,actionHandler:Dm,cursorStyleHandler:km,offsetY:-40,withConnection:!0,actionName:gc})}),Nm=()=>({mr:new Er({x:.5,y:0,actionHandler:Wu,cursorStyleHandler:Ci,actionName:bs}),ml:new Er({x:-.5,y:0,actionHandler:Wu,cursorStyleHandler:Ci,actionName:bs})}),Hm=()=>D(D({},Nd()),Nm());class Ss extends Zr{static getDefaults(){return D(D({},super.getDefaults()),Ss.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Ss.ownDefaults),this.setOptions(e)}static createControls(){return{controls:Nd()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,i=t.action;if(this===r&&i&&i.startsWith(ia))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let i=r.length-1;i>=0;i--){const[s,o]=r[i],a=this.controls[s];if(a.shouldActivate(s,this,e,t?o.touchCorner:o.corner))return this.__corner=s,{key:s,control:a,coord:this.oCoords[s]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=Es(t.x,t.y),i=Ni({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=Vt(r,i),o=Vt(e,s),a=Vt(o,[1/e[0],0,0,1/e[3],0,0]),c=this.group?Yo(this.calcTransformMatrix()):void 0;c&&(c.scaleX=Math.abs(c.scaleX),c.scaleY=Math.abs(c.scaleY));const u=this._calculateCurrentDimensions(c),h={};return this.forEachControl(((f,p)=>{const y=f.positionHandler(u,a,this,f);h[p]=Object.assign(y,this._calcCornerCoords(f,y))})),h}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),i=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/i[0],1/i[3]),e.rotate(At(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=D({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=i.borderColor,this._setLineDash(e,i.borderDashArray),this.strokeBorders(e,t),i.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:i}=this,s=D({hasBorders:r,hasControls:i},t),o=this.getViewportTransform(),a=s.hasBorders,c=s.hasControls,u=Vt(o,this.calcTransformMatrix()),h=Yo(u);e.save(),e.translate(h.translateX,h.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(h.angle-=180),e.rotate(At(this.group?h.angle:this.angle)),a&&this.drawBorders(e,h,t),c&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let i;if(r&&r.forActiveSelection||this.group){const s=bc(this.width,this.height,sa(t)),o=this.isStrokeAccountedForInDimensions()?pc:(this.strokeUniform?new F().scalarAdd(this.canvas?this.canvas.getZoom():1):new F(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);i=s.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else i=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,i,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl(((i,s)=>{i.withConnection&&i.getVisibility(this,s)&&(r=!0,e.moveTo(i.x*t.x,i.y*t.y),e.lineTo(i.x*t.x+i.offsetX,i.y*t.y+i.offsetY))})),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:i,cornerDashArray:s,cornerColor:o}=this,a=D({cornerStrokeColor:i,cornerDashArray:s,cornerColor:o},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl(((c,u)=>{if(c.getVisibility(this,u)){const h=this.oCoords[u];c.render(e,h.x,h.y,a,this)}})),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach((t=>{let[r,i]=t;return this.setControlVisible(r,i)}))}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const i=this.width+4,s=this.height+4;return t.clearRect(-i/2,-s/2,i,s),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function Hd(n,e){return e.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))}))})),n}A(Ss,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class qt extends Ss{}Hd(qt,[Ed]),fe.setClass(qt),fe.setClass(qt,"object");const Um=(n,e,t,r)=>{const i=2*(r=Math.round(r))+1,{data:s}=n.getImageData(e-r,t-r,i,i);for(let o=3;o<s.length;o+=4)if(s[o]>0)return!1;return!0};class Ud{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new F(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new F(1/this.options.scaleX,1/this.options.scaleY):new F(1,1)}createSideVector(e,t){const r=Fl(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new F(e);return t.y+=t.x*Math.tan(At(this.options.skewY)),t.x+=t.y*Math.tan(At(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const Wm=new F;class Mi extends Ud{static getOrthogonalRotationFactor(e,t){const r=t?Bl(e,t):um(e);return Math.abs(r)<Os?-1:1}constructor(e,t,r,i){super(i),A(this,"AB",void 0),A(this,"AC",void 0),A(this,"alpha",void 0),A(this,"bisector",void 0),this.A=new F(e),this.B=new F(t),this.C=new F(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Bl(this.AB,this.AC),this.bisector=wc(jd(this.AB.eq(Wm)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t),s=Ld(i),o=Mi.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,r*o)}projectBevel(){const e=[];return(this.alpha%zo==0?[this.B]:[this.B,this.C]).forEach((t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))})),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),i=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),s=this.options.strokeUniform?Il(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return Il(i)/this.strokeProjectionMagnitude<=s&&e.push(this.applySkew(this.A.add(i))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],i=new F(Mi.getOrthogonalRotationFactor(this.bisector),Mi.getOrthogonalRotationFactor(new F(this.bisector.y,this.bisector.x)));return[new F(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i),new F(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i)].forEach((s=>{Nu(s,e,t)&&r.push(this.A.add(s))})),r}projectRoundWithSkew(e,t){const r=[],{skewX:i,skewY:s,scaleX:o,scaleY:a,strokeUniform:c}=this.options,u=new F(Math.tan(At(i)),Math.tan(At(s))),h=this.strokeProjectionMagnitude,f=c?h/a/Math.sqrt(1/a**2+1/o**2*u.y**2):h/Math.sqrt(1+u.y**2),p=new F(Math.sqrt(Math.max(h**2-f**2,0)),f),y=c?h/Math.sqrt(1+u.x**2*(1/a)**2/(1/o+1/o*u.x*u.y)**2):h/Math.sqrt(1+u.x**2/(1+u.x*u.y)**2),g=new F(y,Math.sqrt(Math.max(h**2-y**2,0)));return[g,g.scalarMultiply(-1),p,p.scalarMultiply(-1)].map((v=>this.applySkew(c?v.multiply(this.strokeUniformScalar):v))).forEach((v=>{Nu(v,e,t)&&r.push(this.applySkew(this.A).add(v))})),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%zo==0,r=this.applySkew(this.A),i=e[t?0:2].subtract(r),s=e[t?1:0].subtract(r),o=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=vs(i,o)>0,c=a?i:s,u=a?s:i;return this.isSkewed()?e.push(...this.projectRoundWithSkew(c,u)):e.push(...this.projectRoundNoSkew(c,u)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map((e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector})))}}class Xu extends Ud{constructor(e,t,r){super(r),this.A=new F(e),this.T=new F(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t);return this.scaleUnitVector(Ld(i),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new F(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new Mi(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new F(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(wc(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),i=this.A.add(r);e.push(i.add(t),i.subtract(t))}return e.map((t=>this.applySkew(t)))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map((e=>({originPoint:this.A,projectedPoint:e})))}}const zm=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(n.length===0)return r;const i=n.reduce(((s,o)=>(s[s.length-1].eq(o)||s.push(new F(o)),s)),[new F(n[0])]);if(i.length===1)t=!0;else if(!t){const s=i[0],o=((a,c)=>{for(let u=a.length-1;u>=0;u--)if(c(a[u],u,a))return u;return-1})(i,(a=>!a.eq(s)));i.splice(o+1)}return i.forEach(((s,o,a)=>{let c,u;o===0?(u=a[1],c=t?s:a[a.length-1]):o===a.length-1?(c=a[o-1],u=t?s:a[0]):(c=a[o-1],u=a[o+1]),t&&a.length===1?r.push(...new Xu(s,s,e).project()):!t||o!==0&&o!==a.length-1?r.push(...new Mi(s,c,u,e).project()):r.push(...new Xu(s,o===0?u:c,e).project())})),r},Cc=n=>{const e={};return Object.keys(n).forEach((t=>{e[t]={},Object.keys(n[t]).forEach((r=>{e[t][r]=D({},n[t][r])}))})),e},Vm=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let as;const Tc=n=>{if(as||as||(as="Intl"in ra()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),as){const e=as.segment(n);return Array.from(e).map((t=>{let{segment:r}=t;return r}))}return Xm(n)},Xm=n=>{const e=[];for(let t,r=0;r<n.length;r++)(t=qm(n,r))!==!1&&e.push(t);return e},qm=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const i=n.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=n.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},Oc=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textDecorationThickness!==e.textDecorationThickness||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},Ym=(n,e)=>{const t=e.split(`
`),r=[];let i=-1,s={};n=Cc(n);for(let o=0;o<t.length;o++){const a=Tc(t[o]);if(n[o])for(let c=0;c<a.length;c++){i++;const u=n[o][c];u&&Object.keys(u).length>0&&(Oc(s,u,!0)?r.push({start:i,end:i+1,style:u}):r[r.length-1].end++),s=u||{}}else i+=a.length,s={}}return r},$m=(n,e)=>{if(!Array.isArray(n))return Cc(n);const t=e.split(fc),r={};let i=-1,s=0;for(let o=0;o<t.length;o++){const a=Tc(t[o]);for(let c=0;c<a.length;c++)i++,n[s]&&n[s].start<=i&&i<n[s].end&&(r[o]=r[o]||{},r[o][c]=D({},n[s].style),i===n[s].end-1&&s++)}return r},Tn=["display","transform",Lt,"fill-opacity","fill-rule","opacity",nr,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function qu(n,e){const t=n.nodeName,r=n.getAttribute("class"),i=n.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+t,"i"),e=e.replace(o,""),i&&e.length&&(o=new RegExp("#"+i+s,"i"),e=e.replace(o,"")),r&&e.length){const a=r.split(" ");for(let c=a.length;c--;)o=new RegExp("\\."+a[c]+s,"i"),e=e.replace(o,"")}return e.length===0}function Gm(n,e){let t=!0;const r=qu(n,e.pop());return r&&e.length&&(t=(function(i,s){let o,a=!0;for(;i.parentElement&&i.parentElement.nodeType===1&&s.length;)a&&(o=s.pop()),a=qu(i=i.parentElement,o);return s.length===0})(n,e)),r&&t&&e.length===0}const Km=n=>{var e;return(e=lm[n])!==null&&e!==void 0?e:n},Jm=new RegExp("(".concat(Pr,")"),"gi"),Zm=n=>n.replace(Jm," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Yu,$u,Gu,Ku,Ju,Zu,Qu;const Kt="(".concat(Pr,")"),Qm=String.raw(Yu||(Yu=Vr(["(skewX)(",")"],["(skewX)\\(","\\)"])),Kt),ev=String.raw($u||($u=Vr(["(skewY)(",")"],["(skewY)\\(","\\)"])),Kt),tv=String.raw(Gu||(Gu=Vr(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Kt,Kt,Kt),rv=String.raw(Ku||(Ku=Vr(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Kt,Kt),nv=String.raw(Ju||(Ju=Vr(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Kt,Kt),iv=String.raw(Zu||(Zu=Vr(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Kt,Kt,Kt,Kt,Kt,Kt),Ec="(?:".concat(iv,"|").concat(nv,"|").concat(tv,"|").concat(rv,"|").concat(Qm,"|").concat(ev,")"),sv="(?:".concat(Ec,"*)"),ov=String.raw(Qu||(Qu=Vr(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),sv),av=new RegExp(ov),lv=new RegExp(Ec),cv=new RegExp(Ec,"g");function Nl(n){const e=[];if(!(n=Zm(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!av.test(n))return[...Jt];for(const t of n.matchAll(cv)){const r=lv.exec(t[0]);if(!r)continue;let i=Jt;const s=r.filter((g=>!!g)),[,o,...a]=s,[c,u,h,f,p,y]=a.map((g=>parseFloat(g)));switch(o){case"translate":i=Es(c,u);break;case gc:i=Ni({angle:c},{x:u,y:h});break;case ia:i=vc(c,u);break;case Ii:i=md(c);break;case Bi:i=vd(c);break;case"matrix":i=[c,u,h,f,p,y]}e.push(i)}return mc(e)}function uv(n,e,t,r){const i=Array.isArray(e);let s,o=e;if(n!==Lt&&n!==nr||e!==rr){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")o=e===rr?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")o=t&&t.transformMatrix?Vt(t.transformMatrix,Nl(e)):Nl(e);else if(n==="visible")o=e!==rr&&e!=="hidden",t&&t.visible===!1&&(o=!1);else if(n==="opacity")o=parseFloat(e),t&&t.opacity!==void 0&&(o*=t.opacity);else if(n==="textAnchor")o=e==="start"?at:e==="end"?Et:Ye;else if(n==="charSpacing"||n===Yn)s=Pi(e,r)/r*1e3;else if(n==="paintFirst"){const a=e.indexOf(Lt),c=e.indexOf(nr);o=Lt,(a>-1&&c>-1&&c<a||a===-1&&c>-1)&&(o=nr)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";s=i?e.map(Pi):Pi(e,r)}}else o="";return!i&&isNaN(s)?o:s}function hv(n,e){const t=n.match(am);if(!t)return;const r=t[1],i=t[3],s=t[4],o=t[5],a=t[6];r&&(e.fontStyle=r),i&&(e.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),s&&(e.fontSize=Pi(s)),a&&(e.fontFamily=a),o&&(e.lineHeight=o==="normal"?1:o)}function dv(n,e){n.replace(/;\s*$/,"").split(";").forEach((t=>{if(!t)return;const[r,i]=t.split(":");e[r.trim().toLowerCase()]=i.trim()}))}function fv(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?dv(t,e):(function(r,i){Object.entries(r).forEach((s=>{let[o,a]=s;a!==void 0&&(i[o.toLowerCase()]=a)}))})(t,e)),e}const gv={stroke:"strokeOpacity",fill:"fillOpacity"};function pn(n,e,t){if(!n)return{};let r,i={},s=dc;n.parentNode&&Bu.test(n.parentNode.nodeName)&&(i=pn(n.parentElement,e,t),i.fontSize&&(r=s=Pi(i.fontSize)));const o=D(D(D({},e.reduce(((u,h)=>{const f=n.getAttribute(h);return f&&(u[h]=f),u}),{})),(function(u){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f={};for(const p in h)Gm(u,p.split(" "))&&(f=D(D({},f),h[p]));return f})(n,t)),fv(n));o[ol]&&n.setAttribute(ol,o[ol]),o[sl]&&(r=Pi(o[sl],s),o[sl]="".concat(r));const a={};for(const u in o){const h=Km(u),f=uv(h,o[u],i,r);a[h]=f}a&&a.font&&hv(a.font,a);const c=D(D({},i),a);return Bu.test(n.nodeName)?c:(function(u){const h=qt.getDefaults();return Object.entries(gv).forEach((f=>{let[p,y]=f;if(u[y]===void 0||u[p]==="")return;if(u[p]===void 0){if(!h[p])return;u[p]=h[p]}if(u[p].indexOf("url(")===0)return;const g=new ht(u[p]);u[p]=g.setAlpha(pt(g.getAlpha()*u[y],2)).toRgba()})),u})(c)}const pv=["left","top","width","height","visible"],Wd=["rx","ry"];class Ar extends qt{static getDefaults(){return D(D({},super.getDefaults()),Ar.ownDefaults)}constructor(e){super(),Object.assign(this,Ar.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,i=-t/2,s=-r/2,o=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,r/2):0,c=o!==0||a!==0;e.beginPath(),e.moveTo(i+o,s),e.lineTo(i+t-o,s),c&&e.bezierCurveTo(i+t-wn*o,s,i+t,s+wn*a,i+t,s+a),e.lineTo(i+t,s+r-a),c&&e.bezierCurveTo(i+t,s+r-wn*a,i+t-wn*o,s+r,i+t-o,s+r),e.lineTo(i+o,s+r),c&&e.bezierCurveTo(i+wn*o,s+r,i,s+r-wn*a,i,s+r-a),e.lineTo(i,s+a),c&&e.bezierCurveTo(i,s+wn*a,i+wn*o,s,i+o,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Wd,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:i}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(i,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,r){const i=pn(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:o=0,width:a=0,height:c=0,visible:u=!0}=i,h=wt(i,pv);return new this(D(D(D({},t),h),{},{left:s,top:o,width:a,height:c,visible:!!(u&&a&&c)}))}}A(Ar,"type","Rect"),A(Ar,"cacheProperties",[...gn,...Wd]),A(Ar,"ownDefaults",{rx:0,ry:0}),A(Ar,"ATTRIBUTE_NAMES",[...Tn,"x","y","rx","ry","width","height"]),fe.setClass(Ar),fe.setSVGClass(Ar);const rn="initialization",Jo="added",Ac="removed",Zo="imperative",zd=(n,e)=>{const{strokeUniform:t,strokeWidth:r,width:i,height:s,group:o}=e,a=o&&o!==n?aa(o.calcTransformMatrix(),n.calcTransformMatrix()):null,c=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),u=!e.isStrokeAccountedForInDimensions(),h=t&&u?em(new F(r,r),void 0,n.calcTransformMatrix()):pc,f=!t&&u?r:0,p=bc(i+f,s+f,mc([a,e.calcOwnMatrix()],!0)).add(h).scalarDivide(2);return[c.subtract(p),c.add(p)]};class ua{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:i}=e;return t===rn||t===Zo||!!r&&i!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==rn&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:i}=t;if(r===Zo&&t.overrides)return t.overrides;if(e.length===0)return;const{left:s,top:o,width:a,height:c}=on(e.map((f=>zd(i,f))).reduce(((f,p)=>f.concat(p)),[])),u=new F(a,c),h=new F(s,o).add(u.scalarDivide(2));if(r===rn){const f=this.getInitialSize(t,{size:u,center:h});return{center:h,relativeCorrection:new F(0,0),size:f}}return{center:h.transform(i.calcOwnMatrix()),size:u}}}A(ua,"type","strategy");class Hl extends ua{shouldPerformLayout(e){return!0}}A(Hl,"type","fit-content"),fe.setClass(Hl);const mv=["strategy"],vv=["target","strategy","bubbles","prevStrategy"],Vd="layoutManager";class Cs{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Hl;A(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=D(D({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[Xo,ad,bs,ld,na,cd,Vo,Hp,Up].map((i=>e.on(i,(s=>this.performLayout(i===Xo?{type:"object_modified",trigger:i,e:s,target:r}:{type:"object_modifying",trigger:i,e:s,target:r})))))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach((r=>r())),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach((t=>this.unsubscribe(t,e)))}subscribeTargets(e){e.targets.forEach((t=>this.subscribe(t,e)))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:i}=t;if(r===rn||r===Jo?this.subscribeTargets(e):r===Ac&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),i&&i.fire("object:layout:before",{target:t,context:e}),r===Zo&&e.deep){const s=wt(e,mv);t.forEachObject((o=>o.layoutManager&&o.layoutManager.performLayout(D(D({},s),{},{bubbles:!1,target:o}))))}}getLayoutResult(e){const{target:t,strategy:r,type:i}=e,s=r.calcLayoutResult(e,t.getObjects());if(!s)return;const o=i===rn?new F:t.getRelativeCenterPoint(),{center:a,correction:c=new F,relativeCorrection:u=new F}=s,h=o.subtract(a).add(c).transform(i===rn?Jt:Dr(t.calcOwnMatrix()),!0).add(u);return{result:s,prevCenter:o,nextCenter:a,offset:h}}commitLayout(e,t){const{target:r}=e,{result:{size:i},nextCenter:s}=t;var o,a;r.set({width:i.x,height:i.y}),this.layoutObjects(e,t),e.type===rn?r.set({left:(o=e.x)!==null&&o!==void 0?o:s.x+i.x*Mt(r.originX),top:(a=e.y)!==null&&a!==void 0?a:s.y+i.y*Mt(r.originY)}):(r.setPositionByOrigin(s,Ye,Ye),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject((i=>{i.group===r&&this.layoutObject(e,t,i)})),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:i}=t;r.set({left:r.left+i.x,top:r.top+i.y})}onAfterLayout(e,t){const{target:r,strategy:i,bubbles:s,prevStrategy:o}=e,a=wt(e,vv),{canvas:c}=r;r.fire("layout:after",{context:e,result:t}),c&&c.fire("object:layout:after",{context:e,result:t,target:r});const u=r.parent;s&&u!=null&&u.layoutManager&&((a.path||(a.path=[])).push(r),u.layoutManager.performLayout(D(D({},a),{},{target:u}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach((t=>t.forEach((r=>r())))),e.clear()}toObject(){return{type:Vd,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}fe.setClass(Cs,Vd);const yv=["type","objects","layoutManager"];class bv extends Cs{performLayout(){}}class Xn extends ud(qt){static getDefaults(){return D(D({},super.getDefaults()),Xn.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),A(this,"_activeObjects",[]),A(this,"__objectSelectionTracker",void 0),A(this,"__objectSelectionDisposer",void 0),Object.assign(this,Xn.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject((i=>{this.enterGroup(i,!1)})),this.layoutManager=(r=t.layoutManager)!==null&&r!==void 0?r:new Cs,this.layoutManager.performLayout({type:rn,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(Sn("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(Sn("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter(((t,r,i)=>this.canEnterGroup(t)&&i.indexOf(t)===r))}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const i=this._filterObjectsBeforeEnteringGroup(t),s=super.add(...i);return this._onAfterObjectsChange(Jo,i),s}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];const s=this._filterObjectsBeforeEnteringGroup(r),o=super.insertAt(e,...s);return this._onAfterObjectsChange(Jo,s),o}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(Ac,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&(this._objects||[]).forEach((i=>{i._set(e,t)})),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const i=this._activeObjects;if(e)i.push(r),this._set("dirty",!0);else if(i.length>0){const s=i.indexOf(r);s>-1&&(i.splice(s,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&$o(e,Vt(Dr(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||($o(e,Vt(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=qt.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let s=0;s<this._objects.length;s++){var i;const o=this._objects[s];(i=this.canvas)!==null&&i!==void 0&&i.preserveObjectStacking&&o.group!==this?(e.save(),e.transform(...Dr(this.calcTransformMatrix())),o.render(e),e.restore()):o.group===this&&o.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject((e=>e.setCoords()))}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(D({target:this,type:Zo},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter((function(i){return!i.excludeFromExport})).map((function(i){const s=i.includeDefaultValues;i.includeDefaultValues=r;const o=i[e||"toObject"](t);return i.includeDefaultValues=s,o}))}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return D(D(D({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject((e=>{this._watchObject(!1,e),e.dispose()})),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=Ar.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const i=t.join("");return e?e(i):i}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let i=0;i<this._objects.length;i++)t.push("		",this._objects[i].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let i=0;i<this._objects.length;i++)t.push("	",this._objects[i].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:i=[],layoutManager:s}=e,o=wt(e,yv);return Promise.all([_s(i,t),oa(o,t)]).then((a=>{let[c,u]=a;const h=new this(c,D(D(D({},o),u),{},{layoutManager:new bv}));if(s){const f=fe.getClass(s.type),p=fe.getClass(s.strategy);h.layoutManager=new f(new p)}else h.layoutManager=new Cs;return h.layoutManager.subscribeTargets({type:rn,target:h,targets:h.getObjects()}),h.setCoords(),h}))}}A(Xn,"type","Group"),A(Xn,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),fe.setClass(Xn);const _v=(n,e)=>Math.min(e.width/n.width,e.height/n.height),wv=(n,e)=>Math.max(e.width/n.width,e.height/n.height),Ul="\\s*,?\\s*",ls="".concat(Ul,"(").concat(Pr,")"),xv="".concat(ls).concat(ls).concat(ls).concat(Ul,"([01])").concat(Ul,"([01])").concat(ls).concat(ls),Sv={m:"l",M:"L"},Cv=(n,e,t,r,i,s,o,a,c,u,h)=>{const f=ln(n),p=cn(n),y=ln(e),g=cn(e),v=t*i*y-r*s*g+o,b=r*i*y+t*s*g+a;return["C",u+c*(-t*i*p-r*s*f),h+c*(-r*i*p+t*s*f),v+c*(t*i*g+r*s*y),b+c*(r*i*g-t*s*y),v,b]},eh=(n,e,t,r)=>{const i=Math.atan2(e,n),s=Math.atan2(r,t);return s>=i?s-i:2*Math.PI-(i-s)};function th(n,e,t,r,i,s,o,a){let c;if(rt.cachesBoundsOfCurve&&(c=[...arguments].join(),gs.boundsOfCurveCache[c]))return gs.boundsOfCurveCache[c];const u=Math.sqrt,h=Math.abs,f=[],p=[[0,0],[0,0]];let y=6*n-12*t+6*i,g=-3*n+9*t-9*i+3*o,v=3*t-3*n;for(let j=0;j<2;++j){if(j>0&&(y=6*e-12*r+6*s,g=-3*e+9*r-9*s+3*a,v=3*r-3*e),h(g)<1e-12){if(h(y)<1e-12)continue;const X=-v/y;0<X&&X<1&&f.push(X);continue}const I=y*y-4*v*g;if(I<0)continue;const V=u(I),L=(-y+V)/(2*g);0<L&&L<1&&f.push(L);const P=(-y-V)/(2*g);0<P&&P<1&&f.push(P)}let b=f.length;const _=b,C=Xd(n,e,t,r,i,s,o,a);for(;b--;){const{x:j,y:I}=C(f[b]);p[0][b]=j,p[1][b]=I}p[0][_]=n,p[1][_]=e,p[0][_+1]=o,p[1][_+1]=a;const E=[new F(Math.min(...p[0]),Math.min(...p[1])),new F(Math.max(...p[0]),Math.max(...p[1]))];return rt.cachesBoundsOfCurve&&(gs.boundsOfCurveCache[c]=E),E}const Tv=(n,e,t)=>{let[r,i,s,o,a,c,u,h]=t;const f=((p,y,g,v,b,_,C)=>{if(g===0||v===0)return[];let E=0,j=0,I=0;const V=Math.PI,L=C*hc,P=cn(L),X=ln(L),ne=.5*(-X*p-P*y),se=.5*(-X*y+P*p),G=g**2,oe=v**2,ge=se**2,Re=ne**2,Fe=G*oe-G*ge-oe*Re;let Ie=Math.abs(g),Ce=Math.abs(v);if(Fe<0){const ae=Math.sqrt(1-Fe/(G*oe));Ie*=ae,Ce*=ae}else I=(b===_?-1:1)*Math.sqrt(Fe/(G*ge+oe*Re));const ct=I*Ie*se/Ce,ut=-I*Ce*ne/Ie,be=X*ct-P*ut+.5*p,ve=P*ct+X*ut+.5*y;let ke=eh(1,0,(ne-ct)/Ie,(se-ut)/Ce),_e=eh((ne-ct)/Ie,(se-ut)/Ce,(-ne-ct)/Ie,(-se-ut)/Ce);_===0&&_e>0?_e-=2*V:_===1&&_e<0&&(_e+=2*V);const we=Math.ceil(Math.abs(_e/V*2)),ee=[],Ge=_e/we,xt=8/3*Math.sin(Ge/4)*Math.sin(Ge/4)/Math.sin(Ge/2);let te=ke+Ge;for(let ae=0;ae<we;ae++)ee[ae]=Cv(ke,te,X,P,Ie,Ce,be,ve,xt,E,j),E=ee[ae][5],j=ee[ae][6],ke=te,te+=Ge;return ee})(u-n,h-e,i,s,a,c,o);for(let p=0,y=f.length;p<y;p++)f[p][1]+=n,f[p][2]+=e,f[p][3]+=n,f[p][4]+=e,f[p][5]+=n,f[p][6]+=e;return f},Ov=n=>{let e=0,t=0,r=0,i=0;const s=[];let o,a=0,c=0;for(const u of n){const h=[...u];let f;switch(h[0]){case"l":h[1]+=e,h[2]+=t;case"L":e=h[1],t=h[2],f=["L",e,t];break;case"h":h[1]+=e;case"H":e=h[1],f=["L",e,t];break;case"v":h[1]+=t;case"V":t=h[1],f=["L",e,t];break;case"m":h[1]+=e,h[2]+=t;case"M":e=h[1],t=h[2],r=h[1],i=h[2],f=["M",e,t];break;case"c":h[1]+=e,h[2]+=t,h[3]+=e,h[4]+=t,h[5]+=e,h[6]+=t;case"C":a=h[3],c=h[4],e=h[5],t=h[6],f=["C",h[1],h[2],a,c,e,t];break;case"s":h[1]+=e,h[2]+=t,h[3]+=e,h[4]+=t;case"S":o==="C"?(a=2*e-a,c=2*t-c):(a=e,c=t),e=h[3],t=h[4],f=["C",a,c,h[1],h[2],e,t],a=f[3],c=f[4];break;case"q":h[1]+=e,h[2]+=t,h[3]+=e,h[4]+=t;case"Q":a=h[1],c=h[2],e=h[3],t=h[4],f=["Q",a,c,e,t];break;case"t":h[1]+=e,h[2]+=t;case"T":o==="Q"?(a=2*e-a,c=2*t-c):(a=e,c=t),e=h[1],t=h[2],f=["Q",a,c,e,t];break;case"a":h[6]+=e,h[7]+=t;case"A":Tv(e,t,h).forEach((p=>s.push(p))),e=h[6],t=h[7];break;case"z":case"Z":e=r,t=i,f=["Z"]}f?(s.push(f),o=f[0]):o=""}return s},Qo=(n,e,t,r)=>Math.sqrt((t-n)**2+(r-e)**2),Xd=(n,e,t,r,i,s,o,a)=>c=>{const u=c**3,h=(y=>3*y**2*(1-y))(c),f=(y=>3*y*(1-y)**2)(c),p=(y=>(1-y)**3)(c);return new F(o*u+i*h+t*f+n*p,a*u+s*h+r*f+e*p)},qd=n=>n**2,Yd=n=>2*n*(1-n),$d=n=>(1-n)**2,Ev=(n,e,t,r,i,s,o,a)=>c=>{const u=qd(c),h=Yd(c),f=$d(c),p=3*(f*(t-n)+h*(i-t)+u*(o-i)),y=3*(f*(r-e)+h*(s-r)+u*(a-s));return Math.atan2(y,p)},Av=(n,e,t,r,i,s)=>o=>{const a=qd(o),c=Yd(o),u=$d(o);return new F(i*a+t*c+n*u,s*a+r*c+e*u)},kv=(n,e,t,r,i,s)=>o=>{const a=1-o,c=2*(a*(t-n)+o*(i-t)),u=2*(a*(r-e)+o*(s-r));return Math.atan2(u,c)},rh=(n,e,t)=>{let r=new F(e,t),i=0;for(let s=1;s<=100;s+=1){const o=n(s/100);i+=Qo(r.x,r.y,o.x,o.y),r=o}return i},Dv=(n,e)=>{let t,r=0,i=0,s={x:n.x,y:n.y},o=D({},s),a=.01,c=0;const u=n.iterator,h=n.angleFinder;for(;i<e&&a>1e-4;)o=u(r),c=r,t=Qo(s.x,s.y,o.x,o.y),t+i>e?(r-=a,a/=2):(s=o,r+=a,i+=t);return D(D({},o),{},{angle:h(c)})},Gd=n=>{let e,t,r=0,i=0,s=0,o=0,a=0;const c=[];for(const u of n){const h={x:i,y:s,command:u[0],length:0};switch(u[0]){case"M":t=h,t.x=o=i=u[1],t.y=a=s=u[2];break;case"L":t=h,t.length=Qo(i,s,u[1],u[2]),i=u[1],s=u[2];break;case"C":e=Xd(i,s,u[1],u[2],u[3],u[4],u[5],u[6]),t=h,t.iterator=e,t.angleFinder=Ev(i,s,u[1],u[2],u[3],u[4],u[5],u[6]),t.length=rh(e,i,s),i=u[5],s=u[6];break;case"Q":e=Av(i,s,u[1],u[2],u[3],u[4]),t=h,t.iterator=e,t.angleFinder=kv(i,s,u[1],u[2],u[3],u[4]),t.length=rh(e,i,s),i=u[3],s=u[4];break;case"Z":t=h,t.destX=o,t.destY=a,t.length=Qo(i,s,o,a),i=o,s=a}r+=t.length,c.push(t)}return c.push({length:r,x:i,y:s}),c},Pv=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gd(n),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const i=t[r],s=e/i.length,o=n[r];switch(i.command){case"M":return{x:i.x,y:i.y,angle:0};case"Z":return D(D({},new F(i.x,i.y).lerp(new F(i.destX,i.destY),s)),{},{angle:Math.atan2(i.destY-i.y,i.destX-i.x)});case"L":return D(D({},new F(i.x,i.y).lerp(new F(o[1],o[2]),s)),{},{angle:Math.atan2(o[2]-i.y,o[1]-i.x)});case"C":case"Q":return Dv(i,e)}},Mv=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),nh=new RegExp(xv,"g"),jv=new RegExp(Pr,"gi"),Lv={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Rv=n=>{var e;const t=[],r=(e=n.match(Mv))!==null&&e!==void 0?e:[];for(const i of r){const s=i[0];if(s==="z"||s==="Z"){t.push([s]);continue}const o=Lv[s.toLowerCase()];let a=[];if(s==="a"||s==="A"){nh.lastIndex=0;for(let c=null;c=nh.exec(i);)a.push(...c.slice(1))}else a=i.match(jv)||[];for(let c=0;c<a.length;c+=o){const u=new Array(o),h=Sv[s];u[0]=c>0&&h?h:s;for(let f=0;f<o;f++)u[f+1]=parseFloat(a[c+f]);t.push(u)}}return t},Fv=(n,e)=>n.map((t=>t.map(((r,i)=>i===0||e===void 0?r:pt(r,e))).join(" "))).join(" ");function Wl(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach((r=>{let[i,s]=r;return t.setProperty(i,s)})))}class Iv extends wd{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),A(this,"upper",void 0),A(this,"container",void 0);const{el:i}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(i,{allowTouchScrolling:t}),this.applyCanvasStyle(s,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(r),i.parentNode&&i.parentNode.replaceChild(o,i),o.append(i,s),this.container=o}createUpperCanvas(){const{el:e}=this.lower,t=un();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Fi().createElement("div");return e.setAttribute("data-fabric","wrapper"),Wl(e,{position:"relative"}),Au(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:i}=t;Wl(e,D(D({},r),{},{"touch-action":i?"manipulation":rr})),Au(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:i}=this.upper;_d(r,i,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),Ll(this.upper.el,e),Ll(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:i}=this.upper;super.cleanupDOM(e),t.removeChild(i),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),zr().dispose(this.upper.el),delete this.upper,delete this.container}}class ha extends As{constructor(){super(...arguments),A(this,"targets",[]),A(this,"_hoveredTargets",[]),A(this,"_objectsToRender",void 0),A(this,"_currentTransform",null),A(this,"_groupSelector",null),A(this,"contextTopDirty",!1)}static getDefaults(){return D(D({},super.getDefaults()),ha.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new Iv(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter((t=>!t.group&&t!==e)).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const i=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-t+i,-r+i),s.transform(...this.viewportTransform);const o=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=o,s.restore();const a=Math.round(i*this.getRetinaScaling());return Um(s,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find((r=>!!r&&e[r]===!0)):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),i=this._activeObject;return!!(!t||t&&i&&r.length>1&&r.indexOf(t)===-1&&i!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&i&&i!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let i;return t===ia||t===or||t===pr||t===bs?i=this.centeredScaling||e.centeredScaling:t===gc&&(i=this.centeredRotation||e.centeredRotation),i?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?r.x=Et:["mr","tr","br"].includes(t)&&(r.x=at),["tl","mt","tr"].includes(t)?r.y=jl:["bl","mb","br"].includes(t)&&(r.y=tr)),r}_setupCurrentTransform(e,t,r){var i;const s=t.group?Di(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:o="",control:a}=t.getActiveControl()||{},c=r&&a?(i=a.getActionHandler(e,t,a))===null||i===void 0?void 0:i.bind(a):nm,u=((y,g,v,b)=>{if(!g||!y)return"drag";const _=b.controls[g];return _.getActionName(v,_,b)})(r,o,e,t),h=e[this.centeredKey],f=this._shouldCenterTransform(t,u,h)?{x:Ye,y:Ye}:this._getOriginFromCorner(t,o),p={target:t,action:u,actionHandler:c,actionPerformed:!1,corner:o,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:s.x-t.left,offsetY:s.y-t.top,originX:f.x,originY:f.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:At(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:h,original:D(D({},xd(t)),{},{originX:f.x,originY:f.y})};this._currentTransform=p,this.fire("before:transform",{e,transform:p})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:i,deltaY:s}=this._groupSelector,o=new F(t,r).transform(this.viewportTransform),a=new F(t+i,r+s).transform(this.viewportTransform),c=this.selectionLineWidth/2;let u=Math.min(o.x,a.x),h=Math.min(o.y,a.y),f=Math.max(o.x,a.x),p=Math.max(o.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(u,h,f-u,p-h)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,u+=c,h+=c,f-=c,p-=c,qt.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(u,h,f-u,p-h))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,i=this.getActiveObjects();if(this.targets=[],r&&i.length>=1){if(r.findControl(t,Rl(e))||i.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const s=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&o&&o!==r?(this.targets=s,r):o}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const i=this.getZoom(),s=e.padding/i;if(s){const[o,a,c,u]=r,h=Math.atan2(a.y-o.y,a.x-o.x),f=ln(h)*s,p=cn(h)*s,y=f+p,g=f-p;r=[new F(o.x-g,o.y-y),new F(a.x+y,a.y-g),new F(c.x+g,c.y+y),new F(u.x-y,u.y+g)]}return Tt.isPointInPolygon(t,r)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Di(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const i=e[r];if(this._checkTarget(i,t)){if(Fo(i)&&i.subTargetCheck){const s=this._searchPossibleTargets(i._objects,t);s&&this.targets.push(s)}return i}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&Fo(r)&&r.interactive&&this.targets[0]){const i=this.targets;for(let s=i.length-1;s>0;s--){const o=i[s];if(!Fo(o)||!o.interactive)return o}return i[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,i=r.getBoundingClientRect();let s=Kp(e),o=i.width||0,a=i.height||0;o&&a||(tr in i&&jl in i&&(a=Math.abs(i.top-i.bottom)),Et in i&&at in i&&(o=Math.abs(i.right-i.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,t||(s=Di(s,void 0,this.viewportTransform));const c=this.getRetinaScaling();c!==1&&(s.x/=c,s.y/=c);const u=o===0||a===0?new F(1,1):new F(r.width/o,r.height/a);return s.multiply(u)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=un(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Fn(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,i=!1;const s=this.getActiveObjects(),o=[],a=[];e.forEach((c=>{s.includes(c)||(r=!0,c.fire("deselected",{e:t,target:c}),a.push(c))})),s.forEach((c=>{e.includes(c)||(r=!0,c.fire("selected",{e:t,target:c}),o.push(c))})),e.length>0&&s.length>0?(i=!0,r&&this.fire("selection:updated",{e:t,selected:o,deselected:a})):s.length>0?(i=!0,this.fire("selection:created",{e:t,selected:o})):e.length>0&&(i=!0,this.fire("selection:cleared",{e:t,deselected:a})),i&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),i=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),i}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Fn(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),Fn(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const i=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),i}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,i={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",i),r.fire(Xo,i))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Fn(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const i=this._realizeGroupTransformOnObject(e),s=super._toObject(e,t,r);return e.set(i),s}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Fn(t)&&this._activeObject===t){const r=Hi(e,["angle","flipX","flipY",at,or,pr,Ii,Bi,tr]);return Zp(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const i=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(i)}}A(ha,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class Bv{constructor(e){A(this,"targets",[]),A(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:i}=e.getActiveObject()||{};i&&i.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach((e=>{e.isEditing&&e.exitEditing()}))}add(e){this.targets.push(e)}remove(e){this.unregister(e),wi(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const Nv=["target","oldTarget","fireCanvas","e"],ar={passive:!1},vi=(n,e)=>{const t=n.getViewportPoint(e),r=n.getScenePoint(e);return{viewportPoint:t,scenePoint:r,pointer:t,absolutePointer:r}},xn=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.addEventListener(...t)},ur=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.removeEventListener(...t)},Hv={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class zl extends ha{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),A(this,"_isClick",void 0),A(this,"textEditingManager",new Bv(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach((t=>{this[t]=this[t].bind(this)})),this.addOrRemove(xn,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,i=this._getEventPrefix();e(bd(r),"resize",this._onResize),e(r,i+"down",this._onMouseDown),e(r,"".concat(i,"move"),this._onMouseMove,ar),e(r,"".concat(i,"out"),this._onMouseOut),e(r,"".concat(i,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"click",this._onClick),e(r,"dblclick",this._onClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,ar)}removeListeners(){this.addOrRemove(ur,"remove");const e=this._getEventPrefix(),t=kr(this.upperCanvasEl);ur(t,"".concat(e,"up"),this._onMouseUp),ur(t,"touchend",this._onTouchEnd,ar),ur(t,"".concat(e,"move"),this._onMouseMove,ar),ur(t,"touchmove",this._onMouseMove,ar),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=D({e},vi(this,e));this.fire("mouse:out",D(D({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",D({},r)),this._hoveredTargets.forEach((i=>{this.fire("mouse:out",D(D({},r),{},{target:i})),i&&i.fire("mouseout",D({},r))})),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",D({e},vi(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void xn(this.upperCanvasEl,"drag",this._onDragProgress)}ku(e)}_renderDragEffects(e,t,r){let i=!1;const s=this._dropTarget;s&&s!==t&&s!==r&&(s.clearContextTop(),i=!0),t?.clearContextTop(),r!==t&&r?.clearContextTop();const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),t&&(o.save(),t.transform(o),t.renderDragSourceEffect(e),o.restore(),i=!0),r&&(o.save(),r.transform(o),r.renderDropTargetEffect(e),o.restore(),i=!0),o.restore(),i&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==rr,r=t?this._activeObject:void 0,i={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};ur(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",i),this._dragSource&&this._dragSource.fire("dragend",i),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:i}=this.findDragTargets(e),s=this._dragSource,o={e,target:r,subTargets:i,dragSource:s,canDrop:!1,dropTarget:void 0};let a;this.fire(t,o),this._fireEnterLeaveEvents(r,o),r&&(r.canDrop(e)&&(a=r),r.fire(t,o));for(let c=0;c<i.length;c++){const u=i[c];u.canDrop(e)&&(a=u),u.fire(t,o)}this._renderDragEffects(e,s,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),i={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",i),this._fireEnterLeaveEvents(t,i)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),i=this._basicEventHandler("drop:before",D({e,target:t,subTargets:r,dragSource:this._dragSource},vi(this,e)));i.didDrop=!1,i.dropTarget=void 0,this._basicEventHandler("drop",i),this.fire("drop:after",i)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],i=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&ku(e),this._basicEventHandler("contextmenu",i),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),t==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),t==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const i=this.upperCanvasEl,s=this._getEventPrefix(),o=kr(i);xn(o,"touchend",this._onTouchEnd,ar),t&&xn(o,"touchmove",this._onMouseMove,ar),ur(i,"".concat(s,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();ur(t,"".concat(r,"move"),this._onMouseMove,ar);const i=kr(t);xn(i,"".concat(r,"up"),this._onMouseUp),xn(i,"".concat(r,"move"),this._onMouseMove,ar)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=kr(this.upperCanvasEl);ur(r,"touchend",this._onTouchEnd,ar),ur(r,"touchmove",this._onMouseMove,ar),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((()=>{xn(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0}),400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const i=kr(this.upperCanvasEl);ur(i,"".concat(r,"up"),this._onMouseUp),ur(i,"".concat(r,"move"),this._onMouseMove,ar),xn(t,"".concat(r,"move"),this._onMouseMove,ar)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,i=this._isClick,s=this._target,{button:o}=e;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,c,u=!1;if(r&&(this._finalizeCurrentTransform(e),u=r.actionPerformed),!i){const h=s===this._activeObject;this.handleSelection(e),u||(u=this._shouldRender(s)||!h&&s===this._activeObject)}if(s){const h=s.findControl(this.getViewportPoint(e),Rl(e)),{key:f,control:p}=h||{};if(c=f,s.selectable&&s!==this._activeObject&&s.activeOn==="up")this.setActiveObject(s,e),u=!0;else if(p){const y=p.getMouseUpHandler(e,s,p);y&&(a=this.getScenePoint(e),y.call(p,e,r,a.x,a.y))}s.isMoving=!1}if(r&&(r.target!==s||r.corner!==c)){const h=r.target&&r.target.controls[r.corner],f=h&&h.getMouseUpHandler(e,r.target,h);a=a||this.getScenePoint(e),f&&f.call(h,e,r,a.x,a.y)}this._setCursorFromEvent(e,s),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),u?this.requestRenderAll():i||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:i=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let s=0;s<i.length;s++)i[s]!==r&&i[s].fire(e,t);return t}_handleEvent(e,t,r){const i=this._target,s=this.targets||[],o=D(D(D({e,target:i,subTargets:s},vi(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),t==="down:before"||t==="down"?r:{});this.fire("mouse:".concat(t),o),i&&i.fire("mouse".concat(t),o);for(let a=0;a<s.length;a++)s[a]!==i&&s[a].fire("mouse".concat(t),o)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,r=!!t&&t===this._activeObject;const{button:i}=e;if(i)return(this.fireMiddleClick&&i===1||this.fireRightClick&&i===2)&&this._handleEvent(e,"down",{alreadySelected:r}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let s=this._shouldRender(t),o=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,o=!0,s=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const a=this.getScenePoint(e);this._groupSelector={x:a.x,y:a.y,deltaY:0,deltaX:0}}if(r=!!t&&t===this._activeObject,t){t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const a=t.findControl(this.getViewportPoint(e),Rl(e));if(t===this._activeObject&&(a||!o)){this._setupCurrentTransform(e,t,r);const c=a?a.control:void 0,u=this.getScenePoint(e),h=c&&c.getMouseDownHandler(e,t,c);h&&h.call(c,e,this._currentTransform,u.x,u.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:r}),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Di(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,i=this._hoveredTargets,s=this.targets,o=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("mouse",{e,target:s[a],oldTarget:i[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,i=this._hoveredTargets,s=this.targets,o=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("drag",D(D({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("drag",D(D({},t),{},{target:s[a],oldTarget:i[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:i,fireCanvas:s,e:o}=t,a=wt(t,Nv);const{targetIn:c,targetOut:u,canvasIn:h,canvasOut:f}=Hv[e],p=i!==r;if(i&&p){const y=D(D({},a),{},{e:o,target:i,nextTarget:r},vi(this,o));s&&this.fire(f,y),i.fire(u,y)}if(r&&p){const y=D(D({},a),{},{e:o,target:r,previousTarget:i},vi(this,o));s&&this.fire(h,y),r.fire(c,y)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,i=r.target,s=i.group?Di(t,void 0,i.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,s),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:i,actionHandler:s,target:o}=t,a=!!s&&s(e,t,r.x,r.y);a&&o.setCoords(),i==="drag"&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const i=Fn(this._activeObject)?this._activeObject:null,s=(!i||t.group!==i)&&t.findControl(this.getViewportPoint(e));if(s){const o=s.control;this.setCursor(o.cursorStyleHandler(e,o,t))}else t.subTargetCheck&&this.targets.concat().reverse().map((o=>{r=o.hoverCursor||r})),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,i=Fn(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||i)&&(i||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.getActiveControl()){if(i){const s=r.getObjects();if(t===r){const o=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(s,o)||this.searchPossibleTargets(this._objects,o))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(s,e)}else{r.isEditing&&r.exitEditing();const s=new(fe.getClass("ActiveSelection"))([],{canvas:this});s.multiSelectAdd(r,t),this._hoveredTarget=s,this._setActiveObject(s,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:i,deltaY:s}=this._groupSelector,o=new F(t,r),a=o.add(new F(i,s)),c=o.min(a),u=o.max(a).subtract(c),h=this.collectObjects({left:c.x,top:c.y,width:u.x,height:u.y},{includeIntersecting:!this.selectionFullyContained}),f=o.eq(a)?h[0]?[h[0]]:[]:h.length>1?h.filter((p=>!p.onSelect({e}))).reverse():h;if(f.length===1)this.setActiveObject(f[0],e);else if(f.length>1){const p=fe.getClass("ActiveSelection");this.setActiveObject(new p(f,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const Kd={x1:0,y1:0,x2:0,y2:0},Uv=D(D({},Kd),{},{r1:0,r2:0}),Ti=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,Wv=/^(\d+\.\d+)%|(\d+)%$/;function Jd(n){return n&&Wv.test(n)}function Zd(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(Jd(n)?100:1):NaN;return Li(0,Ti(t,e),1)}const zv=/\s*;\s*/,Vv=/\s*:\s*/;function Xv(n,e){let t,r;const i=n.getAttribute("style");if(i){const o=i.split(zv);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[c,u]=o[a].split(Vv).map((h=>h.trim()));c==="stop-color"?t=u:c==="stop-opacity"&&(r=u)}}const s=new ht(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:Zd(n.getAttribute("offset"),0),color:s.toRgb(),opacity:Ti(parseFloat(r||n.getAttribute("stop-opacity")||""),1)*s.getAlpha()*e}}function qv(n,e){const t=[],r=n.getElementsByTagName("stop"),i=Zd(e,1);for(let s=r.length;s--;)t.push(Xv(r[s],i));return t}function Qd(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function ef(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Cr(n,e){return n.getAttribute(e)}function Yv(n,e){return(function(t,r){let i,{width:s,height:o,gradientUnits:a}=r;return Object.keys(t).reduce(((c,u)=>{const h=t[u];return h==="Infinity"?i=1:h==="-Infinity"?i=0:(i=typeof h=="string"?parseFloat(h):h,typeof h=="string"&&Jd(h)&&(i*=.01,a==="pixels"&&(u!=="x1"&&u!=="x2"&&u!=="r2"||(i*=s),u!=="y1"&&u!=="y2"||(i*=o)))),c[u]=i,c}),{})})(Qd(n)==="linear"?(function(t){return{x1:Cr(t,"x1")||0,y1:Cr(t,"y1")||0,x2:Cr(t,"x2")||"100%",y2:Cr(t,"y2")||0}})(n):(function(t){return{x1:Cr(t,"fx")||Cr(t,"cx")||"50%",y1:Cr(t,"fy")||Cr(t,"cy")||"50%",r1:0,x2:Cr(t,"cx")||"50%",y2:Cr(t,"cy")||"50%",r2:Cr(t,"r")||"50%"}})(n),D(D({},e),{},{gradientUnits:ef(n)}))}class ho{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:i={},colorStops:s=[],offsetX:o=0,offsetY:a=0,gradientTransform:c,id:u}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:D(D({},t==="radial"?Uv:Kd),i),colorStops:s,offsetX:o,offsetY:a,gradientTransform:c,id:u?"".concat(u,"_").concat(Cn()):Cn()})}addColorStop(e){for(const t in e){const r=new ht(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return D(D({},Hi(this,e)),{},{type:this.type,coords:D({},this.coords),colorStops:this.colorStops.map((t=>D({},t))),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],i=this.gradientTransform?this.gradientTransform.concat():Jt.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map((f=>D({},f))).sort(((f,p)=>f.offset-p.offset));let a=-this.offsetX,c=-this.offsetY;var u;s==="objectBoundingBox"?(a/=e.width,c/=e.height):(a+=e.width/2,c+=e.height/2),(u=e)&&typeof u._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,c-=e.pathOffset.y),i[4]-=a,i[5]-=c;const h=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(ws(i),'"'),""].join(" ");if(this.type==="linear"){const{x1:f,y1:p,x2:y,y2:g}=this.coords;r.push("<linearGradient ",h,' x1="',f,'" y1="',p,'" x2="',y,'" y2="',g,`">
`)}else if(this.type==="radial"){const{x1:f,y1:p,x2:y,y2:g,r1:v,r2:b}=this.coords,_=v>b;r.push("<radialGradient ",h,' cx="',_?f:y,'" cy="',_?p:g,'" r="',_?v:b,'" fx="',_?y:f,'" fy="',_?g:p,`">
`),_&&(o.reverse(),o.forEach((E=>{E.offset=1-E.offset})));const C=Math.min(v,b);if(C>0){const E=C/Math.max(v,b);o.forEach((j=>{j.offset+=E*(1-j.offset)}))}}return o.forEach((f=>{let{color:p,offset:y,opacity:g}=f;r.push("<stop ",'offset="',100*y+"%",'" style="stop-color:',p,g!==void 0?";stop-opacity: "+g:";",`"/>
`)})),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:t,y1:r,x2:i,y2:s,r1:o,r2:a}=this.coords,c=this.type==="linear"?e.createLinearGradient(t,r,i,s):e.createRadialGradient(t,r,o,i,s,a);return this.colorStops.forEach((u=>{let{color:h,opacity:f,offset:p}=u;c.addColorStop(p,f!==void 0?new ht(h).setAlpha(f).toRgba():h)})),c}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(D(D({},e),{},{colorStops:t?t.map((i=>D({},i))):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const i=ef(e),s=t._findCenterFromElement();return new this(D({id:e.getAttribute("id")||void 0,type:Qd(e),coords:Yv(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:qv(e,r.opacity),gradientUnits:i,gradientTransform:Nl(e.getAttribute("gradientTransform")||"")},i==="pixels"?{offsetX:t.width/2-s.x,offsetY:t.height/2-s.y}:{offsetX:0,offsetY:0}))}}A(ho,"type","Gradient"),fe.setClass(ho,"gradient"),fe.setClass(ho,"linear"),fe.setClass(ho,"radial");const $v=["type","source","patternTransform"];class cl{get type(){return"pattern"}set type(e){Sn("warn","Setting type has no effect",e)}constructor(e){A(this,"repeat","repeat"),A(this,"offsetX",0),A(this,"offsetY",0),A(this,"crossOrigin",""),this.id=Cn(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return D(D({},Hi(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:pt(this.offsetX,rt.NUM_FRACTION_DIGITS),offsetY:pt(this.offsetY,rt.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:i,repeat:s,id:o}=this,a=Ti(this.offsetX/t,0),c=Ti(this.offsetY/r,0),u=s==="repeat-y"||s==="no-repeat"?1+Math.abs(a||0):Ti(i.width/t,0),h=s==="repeat-x"||s==="no-repeat"?1+Math.abs(c||0):Ti(i.height/r,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(a,'" y="').concat(c,'" width="').concat(u,'" height="').concat(h,'">'),'<image x="0" y="0" width="'.concat(i.width,'" height="').concat(i.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:r,source:i,patternTransform:s}=e,o=wt(e,$v);const a=await Bo(i,D(D({},t),{},{crossOrigin:o.crossOrigin}));return new this(D(D({},o),{},{patternTransform:s&&s.slice(0),source:a}))}}A(cl,"type","Pattern"),fe.setClass(cl),fe.setClass(cl,"pattern");const Gv=["path","left","top"],Kv=["d"];class In extends qt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:i,top:s}=t,o=wt(t,Gv);super(),Object.assign(this,In.ownDefaults),this.setOptions(o),this._setPath(e||[],!0),typeof i=="number"&&this.set(at,i),typeof s=="number"&&this.set(tr,s)}_setPath(e,t){this.path=Ov(Array.isArray(e)?e:Rv(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new F(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const i of this.path)switch(i[0]){case"L":e.lineTo(i[1]+t,i[2]+r);break;case"M":e.moveTo(i[1]+t,i[2]+r);break;case"C":e.bezierCurveTo(i[1]+t,i[2]+r,i[3]+t,i[4]+r,i[5]+t,i[6]+r);break;case"Q":e.quadraticCurveTo(i[1]+t,i[2]+r,i[3]+t,i[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(e)),{},{path:this.path.map((t=>t.slice()))})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=Fv(this.path,rt.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=rt.NUM_FRACTION_DIGITS;return" translate(".concat(pt(-this.pathOffset.x,e),", ").concat(pt(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:i}=this._calcDimensions();this.set({width:t,height:r,pathOffset:i}),e&&this.setPositionByOrigin(i,Ye,Ye)}_calcBoundsFromPath(){const e=[];let t=0,r=0,i=0,s=0;for(const o of this.path)switch(o[0]){case"L":i=o[1],s=o[2],e.push({x:t,y:r},{x:i,y:s});break;case"M":i=o[1],s=o[2],t=i,r=s;break;case"C":e.push(...th(i,s,o[1],o[2],o[3],o[4],o[5],o[6])),i=o[5],s=o[6];break;case"Q":e.push(...th(i,s,o[1],o[2],o[1],o[2],o[3],o[4])),i=o[3],s=o[4];break;case"Z":i=t,s=r}return on(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return D(D({},e),{},{pathOffset:new F(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const i=pn(e,this.ATTRIBUTE_NAMES,r),{d:s}=i;return new this(s,D(D(D({},wt(i,Kv)),t),{},{left:void 0,top:void 0}))}}A(In,"type","Path"),A(In,"cacheProperties",[...gn,"path","fillRule"]),A(In,"ATTRIBUTE_NAMES",[...Tn,"d"]),fe.setClass(In),fe.setSVGClass(In);const Jv=["left","top","radius"],tf=["radius","startAngle","endAngle","counterClockwise"];class en extends qt{static getDefaults(){return D(D({},super.getDefaults()),en.ownDefaults)}constructor(e){super(),Object.assign(this,en.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,At(this.startAngle),At(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(or)}getRadiusY(){return this.get("radius")*this.get(pr)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...tf,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,r=At(this.startAngle),i=At(this.endAngle),s=ln(r)*t,o=cn(r)*t,a=ln(i)*t,c=cn(i)*t,u=e>180?1:0,h=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(o," A ").concat(t," ").concat(t," 0 ").concat(u," ").concat(h," ").concat(a," ").concat(c,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,r){const i=pn(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:o=0,radius:a=0}=i;return new this(D(D({},wt(i,Jv)),{},{radius:a,left:s-a,top:o-a}))}static fromObject(e){return super._fromObject(e)}}A(en,"type","Circle"),A(en,"cacheProperties",[...gn,...tf]),A(en,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),A(en,"ATTRIBUTE_NAMES",["cx","cy","r",...Tn]),fe.setClass(en),fe.setSVGClass(en);const Zv=["x1","y1","x2","y2"],Qv=["x1","y1","x2","y2"],Vl=["x1","x2","y1","y2"];class Bn extends qt{constructor(){let[e,t,r,i]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Bn.ownDefaults),this.setOptions(s),this.x1=e,this.x2=r,this.y1=t,this.y2=i,this._setWidthHeight();const{left:o,top:a}=s;typeof o=="number"&&this.set(at,o),typeof a=="number"&&this.set(tr,a)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:i}=this;this.width=Math.abs(r-e),this.height=Math.abs(i-t);const{left:s,top:o,width:a,height:c}=on([{x:e,y:t},{x:r,y:i}]),u=new F(s+a/2,o+c/2);this.setPositionByOrigin(u,Ye,Ye)}_set(e,t){return super._set(e,t),Vl.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var i;gr(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(i=this.stroke)!==null&&i!==void 0?i:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new F((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:i,width:s,height:o}=this,a=e<=t?-1:1,c=r<=i?-1:1;return{x1:a*s/2,x2:a*-s/2,y1:c*o/2,y2:c*-o/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:i}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(i,`" />
`)]}static async fromElement(e,t,r){const i=pn(e,this.ATTRIBUTE_NAMES,r),{x1:s=0,y1:o=0,x2:a=0,y2:c=0}=i;return new this([s,o,a,c],wt(i,Zv))}static fromObject(e){let{x1:t,y1:r,x2:i,y2:s}=e,o=wt(e,Qv);return this._fromObject(D(D({},o),{},{points:[t,r,i,s]}),{extraParam:"points"})}}A(Bn,"type","Line"),A(Bn,"cacheProperties",[...gn,...Vl]),A(Bn,"ATTRIBUTE_NAMES",Tn.concat(Vl)),fe.setClass(Bn),fe.setSVGClass(Bn);class Hn extends qt{static getDefaults(){return D(D({},super.getDefaults()),Hn.ownDefaults)}constructor(e){super(),Object.assign(this,Hn.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}A(Hn,"type","Triangle"),A(Hn,"ownDefaults",{width:100,height:100}),fe.setClass(Hn),fe.setSVGClass(Hn);const rf=["rx","ry"];class tn extends qt{static getDefaults(){return D(D({},super.getDefaults()),tn.ownDefaults)}constructor(e){super(),Object.assign(this,tn.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(or)}getRy(){return this.get("ry")*this.get(pr)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...rf,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,zo,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const i=pn(e,this.ATTRIBUTE_NAMES,r);return i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,new this(i)}}function ey(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let r=0;r<e.length;r+=2)t.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])});return t}A(tn,"type","Ellipse"),A(tn,"cacheProperties",[...gn,...rf]),A(tn,"ownDefaults",{rx:0,ry:0}),A(tn,"ATTRIBUTE_NAMES",[...Tn,"cx","cy","rx","ry"]),fe.setClass(tn),fe.setSVGClass(tn);const ty=["left","top"],nf={exactBoundingBox:!1};class dr extends qt{static getDefaults(){return D(D({},super.getDefaults()),dr.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),A(this,"strokeDiff",void 0),Object.assign(this,dr.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:i}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(at,r),typeof i=="number"&&this.set(tr,i)}isOpen(){return!0}_projectStrokeOnPoints(e){return zm(this.points,e,this.isOpen())}_calcDimensions(e){e=D({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map((u=>u.projectedPoint)):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new F,strokeOffset:new F,strokeDiff:new F};const r=on(t),i=sa(D(D({},e),{},{scaleX:1,scaleY:1})),s=on(this.points.map((u=>er(u,i,!0)))),o=new F(this.scaleX,this.scaleY);let a=r.left+r.width/2,c=r.top+r.height/2;return this.exactBoundingBox&&(a-=c*Math.tan(At(this.skewX)),c-=a*Math.tan(At(this.skewY))),D(D({},r),{},{pathOffset:new F(a,c),strokeOffset:new F(s.left,s.top).subtract(new F(r.left,r.top)).multiply(o),strokeDiff:new F(r.width,r.height).subtract(new F(s.width,s.height)).multiply(o)})}_findCenterFromElement(){const e=on(this.points);return new F(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:i,height:s,pathOffset:o,strokeOffset:a,strokeDiff:c}=this._calcDimensions();this.set({width:i,height:s,pathOffset:o,strokeOffset:a,strokeDiff:c}),e&&this.setPositionByOrigin(new F(t+i/2,r+s/2),Ye,Ye)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new F(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(e).some((a=>this.strokeUniform||this.constructor.layoutProperties.includes(a)))){var t,r;const{width:a,height:c}=this._calcDimensions(e);o=new F((t=e.width)!==null&&t!==void 0?t:a,(r=e.height)!==null&&r!==void 0?r:c)}else{var i,s;o=new F((i=e.width)!==null&&i!==void 0?i:this.width,(s=e.height)!==null&&s!==void 0?s:this.height)}return o.multiply(new F(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,i=super._set(e,t);return this.exactBoundingBox&&r&&((e===or||e===pr)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),i}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(e)),{},{points:this.points.map((t=>{let{x:r,y:i}=t;return{x:r,y:i}}))})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,i=rt.NUM_FRACTION_DIGITS;for(let s=0,o=this.points.length;s<o;s++)e.push(pt(this.points[s].x-t,i),",",pt(this.points[s].y-r,i)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,i=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-i);for(let s=0;s<t;s++){const o=this.points[s];e.lineTo(o.x-r,o.y-i)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(ey(e.getAttribute("points")),D(D({},wt(pn(e,this.ATTRIBUTE_NAMES,r),ty)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}A(dr,"ownDefaults",nf),A(dr,"type","Polyline"),A(dr,"layoutProperties",[Ii,Bi,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),A(dr,"cacheProperties",[...gn,"points"]),A(dr,"ATTRIBUTE_NAMES",[...Tn]),fe.setClass(dr),fe.setSVGClass(dr);class ds extends dr{isOpen(){return!1}}A(ds,"ownDefaults",nf),A(ds,"type","Polygon"),fe.setClass(ds),fe.setSVGClass(ds);class sf extends qt{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const r in t)for(const i in t[r])for(const s in t[r][i])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const r=t===void 0?this.styles:{0:this.styles[t]};for(const i in r)for(const s in r[i])if(r[i][s][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,i,s=0,o=!0,a=0;for(const c in t){r=0;for(const u in t[c]){const h=t[c][u]||{};s++,h[e]!==void 0?(i?h[e]!==i&&(o=!1):i=h[e],h[e]===this[e]&&delete h[e]):o=!1,Object.keys(h).length!==0?r++:delete t[c][u]}r===0&&delete t[c]}for(let c=0;c<this._textLines.length;c++)a+=this._textLines[c].length;o&&s===a&&(this[e]=i,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,i,s;for(i in t){for(s in r=t[i],r)delete r[s][e],Object.keys(r[s]).length===0&&delete r[s];Object.keys(r).length===0&&delete t[i]}}_extendStyles(e,t){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const s=yc(D(D({},this._getStyleDeclaration(r,i)),t),(o=>o!==void 0));this._setStyleDeclaration(r,i,s)}getSelectionStyles(e,t,r){const i=[];for(let s=e;s<(t||e);s++)i.push(this.getStyleAtPosition(s,r));return i}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,i):this._getStyleDeclaration(r,i)}setSelectionStyles(e,t,r){for(let i=t;i<(r||t);i++)this._extendStyles(i,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const i=this.styles&&this.styles[e];return i&&(r=i[t])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,t){return D(D({},Hi(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}A(sf,"_styleProperties",sm);const ry=/  +/g,ny=/"/g;function ul(n,e,t,r,i){return"		".concat((function(s,o){let{left:a,top:c,width:u,height:h}=o,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rt.NUM_FRACTION_DIGITS;const p=xs(Lt,s,!1),[y,g,v,b]=[a,c,u,h].map((_=>pt(_,f)));return"<rect ".concat(p,' x="').concat(y,'" y="').concat(g,'" width="').concat(v,'" height="').concat(b,'"></rect>')})(n,{left:e,top:t,width:r,height:i}),`
`)}const iy=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let hl;class Gt extends sf{static getDefaults(){return D(D({},super.getDefaults()),Gt.ownDefaults)}constructor(e,t){super(),A(this,"__charBounds",[]),Object.assign(this,Gt.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=Gd(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Hr)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,i,s,o,a;for(let c=0,u=this._textLines.length;c<u;c++)if((this.textAlign===Hr||c!==u-1&&!this.isEndOfWrapping(c))&&(i=0,s=this._textLines[c],t=this.getLineWidth(c),t<this.width&&(a=this.textLines[c].match(this._reSpacesAndTabs)))){r=a.length,e=(this.width-t)/r;for(let h=0;h<=s.length;h++)o=this.__charBounds[c][h],this._reSpaceAndTab.test(s[h])?(o.width+=e,o.kernedWidth+=e,o.left+=i,i+=e):o.left+=i}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let i;for(i=0;i<r.length;i++){if(e<=r[i].length)return{lineIndex:i,charIndex:e};e-=r[i].length+this.missingNewlineOffset(i,t)}return{lineIndex:i-1,charIndex:r[i-1].length<e?r[i-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===nr?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Ye:e.textBaseline="middle";break;case"ascender":e.textBaseline=tr;break;case"descender":e.textBaseline=jl}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const i=this.getLineWidth(t);i>e&&(e=i)}return e}_renderTextLine(e,t,r,i,s,o){this._renderChars(e,t,r,i,s,o)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let i=this._getTopOffset();for(let s=0,o=this._textLines.length;s<o;s++){const a=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){i+=a;continue}const c=this._textLines[s].length,u=this._getLineLeftOffset(s);let h,f,p=0,y=0,g=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let v=0;v<c;v++){const b=this.__charBounds[s][v];f=this.getValueOfPropertyAt(s,v,"textBackgroundColor"),this.path?(e.save(),e.translate(b.renderLeft,b.renderTop),e.rotate(b.angle),e.fillStyle=f,f&&e.fillRect(-b.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),b.width,a/this.lineHeight),e.restore()):f!==g?(h=r+u+y,this.direction==="rtl"&&(h=this.width-h-p),e.fillStyle=g,g&&e.fillRect(h,i,p,a/this.lineHeight),y=b.left,p=b.width,g=f):p+=b.kernedWidth}f&&!this.path&&(h=r+u+y,this.direction==="rtl"&&(h=this.width-h-p),e.fillStyle=f,e.fillRect(h,i,p,a/this.lineHeight)),i+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,i){const s=gs.getFontCache(t),o=this._getFontDeclaration(t),a=r+e,c=r&&o===this._getFontDeclaration(i),u=t.fontSize/this.CACHE_FONT_SIZE;let h,f,p,y;if(r&&s[r]!==void 0&&(p=s[r]),s[e]!==void 0&&(y=h=s[e]),c&&s[a]!==void 0&&(f=s[a],y=f-p),h===void 0||p===void 0||f===void 0){const g=(function(){return hl||(hl=mr({width:0,height:0}).getContext("2d")),hl})();this._setTextStyles(g,t,!0),h===void 0&&(y=h=g.measureText(e).width,s[e]=h),p===void 0&&c&&r&&(p=g.measureText(r).width,s[r]=p),c&&f===void 0&&(f=g.measureText(a).width,s[a]=f,y=f-p)}return{width:h*u,kernedWidth:y*u}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,i=0;const s=this.pathSide===Et,o=this.path,a=this._textLines[e],c=a.length,u=new Array(c);this.__charBounds[e]=u;for(let h=0;h<c;h++){const f=a[h];r=this._getGraphemeBox(f,e,h,t),u[h]=r,i+=r.kernedWidth,t=f}if(u[c]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let h=0;const f=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case at:h=s?f-i:0;break;case Ye:h=(f-i)/2;break;case Et:h=s?0:f-i}h+=this.pathStartOffset*(s?-1:1);for(let p=s?c-1:0;s?p>=0:p<c;s?p--:p++)r=u[p],h>f?h%=f:h<0&&(h+=f),this._setGraphemeOnPath(h,r),h+=r.kernedWidth}return{width:i,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,i=this.path,s=Pv(i.path,r,i.segmentsInfo);t.renderLeft=s.x-i.pathOffset.x,t.renderTop=s.y-i.pathOffset.y,t.angle=s.angle+(this.pathSide===Et?Math.PI:0)}_getGraphemeBox(e,t,r,i,s){const o=this.getCompleteStyleDeclaration(t,r),a=i?this.getCompleteStyleDeclaration(t,r-1):{},c=this._measureChar(e,o,i,a);let u,h=c.kernedWidth,f=c.width;this.charSpacing!==0&&(u=this._getWidthOfCharSpacing(),f+=u,h+=u);const p={width:f,left:0,height:o.fontSize,kernedWidth:h,deltaY:o.deltaY};if(r>0&&!s){const y=this.__charBounds[t][r-1];p.left=y.left+y.width+c.kernedWidth-c.width}return p}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,i=this._textLines[e].length;r<i;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,i=this._textLines.length;r<i;r++)e=this.getHeightOfLine(r),t+=r===i-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const i=this._getLeftOffset(),s=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++){const c=this.getHeightOfLine(o),u=c/this.lineHeight,h=this._getLineLeftOffset(o);this._renderTextLine(t,e,this._textLines[o],i+h,s+r+u,o),r+=c}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Lt))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,i,s,o){const a=this.getHeightOfLine(o),c=this.textAlign.includes(Hr),u=this.path,h=!c&&this.charSpacing===0&&this.isEmptyStyles(o)&&!u,f=this.direction==="ltr",p=this.direction==="ltr"?1:-1,y=t.direction;let g,v,b,_,C,E="",j=0;if(t.save(),y!==this.direction&&(t.canvas.setAttribute("dir",f?"ltr":"rtl"),t.direction=f?"ltr":"rtl",t.textAlign=f?at:Et),s-=a*this._fontSizeFraction/this.lineHeight,h)return this._renderChar(e,t,o,0,r.join(""),i,s),void t.restore();for(let I=0,V=r.length-1;I<=V;I++)_=I===V||this.charSpacing||u,E+=r[I],b=this.__charBounds[o][I],j===0?(i+=p*(b.kernedWidth-b.width),j+=b.width):j+=b.kernedWidth,c&&!_&&this._reSpaceAndTab.test(r[I])&&(_=!0),_||(g=g||this.getCompleteStyleDeclaration(o,I),v=this.getCompleteStyleDeclaration(o,I+1),_=Oc(g,v,!1)),_&&(u?(t.save(),t.translate(b.renderLeft,b.renderTop),t.rotate(b.angle),this._renderChar(e,t,o,I,E,-j/2,0),t.restore()):(C=i,this._renderChar(e,t,o,I,E,C,s)),E="",g=v,i+=p*j,j=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,i=mr({width:t,height:r}),s=i.getContext("2d");return i.width=t,i.height=r,s.beginPath(),s.moveTo(0,0),s.lineTo(t,0),s.lineTo(t,r),s.lineTo(0,r),s.closePath(),s.translate(t/2,r/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(i,"no-repeat")}handleFiller(e,t,r){let i,s;return gr(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(i=-this.width/2,s=-this.height/2,e.translate(i,s),e[t]=this._applyPatternGradientTransformText(r),{offsetX:i,offsetY:s}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:i}=t;return e.lineWidth=i,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,i,s,o,a){const c=this._getStyleDeclaration(r,i),u=this.getCompleteStyleDeclaration(r,i),h=e==="fillText"&&u.fill,f=e==="strokeText"&&u.stroke&&u.strokeWidth;if(f||h){if(t.save(),t.font=this._getFontDeclaration(u),c.textBackgroundColor&&this._removeShadow(t),c.deltaY&&(a+=c.deltaY),h){const p=this._setFillStyles(t,u);t.fillText(s,o-p.offsetX,a-p.offsetY)}if(f){const p=this._setStrokeStyles(t,u);t.strokeText(s,o-p.offsetX,a-p.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const i=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),o=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),a={fontSize:s*r.size,deltaY:o+s*r.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,i=this.textAlign,s=this.direction,o=this.isEndOfWrapping(e);let a=0;return i===Hr||i===ms&&!o||i===ps&&!o||i===Ko&&!o?0:(i===Ye&&(a=r/2),i===Et&&(a=r),i===ms&&(a=r/2),i===ps&&(a=r),s==="rtl"&&(i===Et||i===Hr||i===ps?a=0:i===at||i===Ko?a=-r:i!==Ye&&i!==ms||(a=-r/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var i;return(i=this._getStyleDeclaration(e,t)[r])!==null&&i!==void 0?i:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const i=this._getLeftOffset(),s=this.path,o=this._getWidthOfCharSpacing(),a=t==="linethrough"?.5:t==="overline"?1:0,c=this.offsets[t];for(let u=0,h=this._textLines.length;u<h;u++){const f=this.getHeightOfLine(u);if(!this[t]&&!this.styleHas(t,u)){r+=f;continue}const p=this._textLines[u],y=f/this.lineHeight,g=this._getLineLeftOffset(u);let v=0,b=0,_=this.getValueOfPropertyAt(u,0,t),C=this.getValueOfPropertyAt(u,0,Lt),E=this.getValueOfPropertyAt(u,0,Yn),j=_,I=C,V=E;const L=r+y*(1-this._fontSizeFraction);let P=this.getHeightOfChar(u,0),X=this.getValueOfPropertyAt(u,0,"deltaY");for(let G=0,oe=p.length;G<oe;G++){const ge=this.__charBounds[u][G];j=this.getValueOfPropertyAt(u,G,t),I=this.getValueOfPropertyAt(u,G,Lt),V=this.getValueOfPropertyAt(u,G,Yn);const Re=this.getHeightOfChar(u,G),Fe=this.getValueOfPropertyAt(u,G,"deltaY");if(s&&j&&I){const Ie=this.fontSize*V/1e3;e.save(),e.fillStyle=C,e.translate(ge.renderLeft,ge.renderTop),e.rotate(ge.angle),e.fillRect(-ge.kernedWidth/2,c*Re+Fe-a*Ie,ge.kernedWidth,Ie),e.restore()}else if((j!==_||I!==C||Re!==P||V!==E||Fe!==X)&&b>0){const Ie=this.fontSize*E/1e3;let Ce=i+g+v;this.direction==="rtl"&&(Ce=this.width-Ce-b),_&&C&&E&&(e.fillStyle=C,e.fillRect(Ce,L+c*P+X-a*Ie,b,Ie)),v=ge.left,b=ge.width,_=j,E=V,C=I,P=Re,X=Fe}else b+=ge.kernedWidth}let ne=i+g+v;this.direction==="rtl"&&(ne=this.width-ne-b),e.fillStyle=I;const se=this.fontSize*V/1e3;j&&I&&V&&e.fillRect(ne,L+c*P+X-a*se,b-o,se),r+=f}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:i=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const o=e.includes("'")||e.includes('"')||e.includes(",")||Gt.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(s?this.CACHE_FONT_SIZE:i,"px"),o].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return Tc(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),i=[`
`];let s=[];for(let o=0;o<t.length;o++)r[o]=this.graphemeSplit(t[o]),s=s.concat(r[o],i);return s.pop(),{_unwrappedLines:r,lines:t,graphemeText:s,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject([...Pd,...e])),{},{styles:Ym(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let i=!1,s=!1;if(typeof e=="object")for(const o in e)o==="path"&&this.setPathInfo(),i=i||r.includes(o),s=s||o==="path";else i=r.includes(e),s=e==="path";return s&&this.setPathInfo(),i&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const i=pn(e,Gt.ATTRIBUTE_NAMES,r),s=D(D({},t),i),{textAnchor:o=at,textDecoration:a="",dx:c=0,dy:u=0,top:h=0,left:f=0,fontSize:p=dc,strokeWidth:y=1}=s,g=wt(s,iy),v=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),D({left:f+c,top:h+u,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:p},g)),b=v.getScaledHeight()/v.height,_=((v.height+v.strokeWidth)*v.lineHeight-v.height)*b,C=v.getScaledHeight()+_;let E=0;return o===Ye&&(E=v.getScaledWidth()/2),o===Et&&(E=v.getScaledWidth()),v.set({left:v.left-E,top:v.top-(C-v.fontSize*(.07+v._fontSizeFraction))/v.lineHeight,strokeWidth:y}),v}static fromObject(e){return this._fromObject(D(D({},e),{},{styles:$m(e.styles||{},e.text)}),{extraParam:"text"})}}A(Gt,"textLayoutProperties",Dd),A(Gt,"cacheProperties",[...gn,...Pd]),A(Gt,"ownDefaults",om),A(Gt,"type","Text"),A(Gt,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),A(Gt,"ATTRIBUTE_NAMES",Tn.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),Hd(Gt,[class extends Ed{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){const e=this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0}),t=this.path;return t?e+t._createBaseSVGMarkup(t._toSVG(),{reviver:n,withShadow:!0,additionalTransform:ws(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(ny,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],r=[];let i,s=n;this.backgroundColor&&r.push(...ul(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)i=this._getLineLeftOffset(o),this.direction==="rtl"&&(i+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(r,o,e+i,s),this._setSVGTextLineText(t,o,e+i,s),s+=this.getHeightOfLine(o);return{textSpans:t,textBgRects:r}}_createTextCharSpan(n,e,t,r,i){const s=rt.NUM_FRACTION_DIGITS,o=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(ry)),a=o?'style="'.concat(o,'"'):"",c=e.deltaY,u=c?' dy="'.concat(pt(c,s),'" '):"",{angle:h,renderLeft:f,renderTop:p,width:y}=i;let g="";if(f!==void 0){const v=y/2;h&&(g=' rotate="'.concat(pt(hn(h),s),'"'));const b=Ni({angle:hn(h)});b[4]=f,b[5]=p;const _=new F(-v,0).transform(b);t=_.x,r=_.y}return'<tspan x="'.concat(pt(t,s),'" y="').concat(pt(r,s),'" ').concat(u).concat(g).concat(a,">").concat(Vm(n),"</tspan>")}_setSVGTextLineText(n,e,t,r){const i=this.getHeightOfLine(e),s=this.textAlign.includes(Hr),o=this._textLines[e];let a,c,u,h,f,p="",y=0;r+=i*(1-this._fontSizeFraction)/this.lineHeight;for(let g=0,v=o.length-1;g<=v;g++)f=g===v||this.charSpacing||this.path,p+=o[g],u=this.__charBounds[e][g],y===0?(t+=u.kernedWidth-u.width,y+=u.width):y+=u.kernedWidth,s&&!f&&this._reSpaceAndTab.test(o[g])&&(f=!0),f||(a=a||this.getCompleteStyleDeclaration(e,g),c=this.getCompleteStyleDeclaration(e,g+1),f=Oc(a,c,!0)),f&&(h=this._getStyleDeclaration(e,g),n.push(this._createTextCharSpan(p,h,t,r,u)),p="",a=c,this.direction==="rtl"?t-=y:t+=y,y=0)}_setSVGTextLineBg(n,e,t,r){const i=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight;let o,a=0,c=0,u=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let h=0;h<i.length;h++){const{left:f,width:p,kernedWidth:y}=this.__charBounds[e][h];o=this.getValueOfPropertyAt(e,h,"textBackgroundColor"),o!==u?(u&&n.push(...ul(u,t+c,r,a,s)),c=f,a=p,u=o):a+=y}o&&n.push(...ul(u,t+c,r,a,s))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const r=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," text-decoration-thickness: ").concat(pt(this.textDecorationThickness*this.getObjectScaling().y/10,rt.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:r,stroke:i,fill:s,fontSize:o,fontStyle:a,fontWeight:c,deltaY:u,textDecorationThickness:h,linethrough:f,overline:p,underline:y}=n,g=this.getSvgTextDecoration({underline:y??this.underline,overline:p??this.overline,linethrough:f??this.linethrough}),v=h||this.textDecorationThickness;return[i?xs(nr,i):"",r?"stroke-width: ".concat(r,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",a?"font-style: ".concat(a,"; "):"",c?"font-weight: ".concat(c,"; "):"",g?"text-decoration: ".concat(g,"; text-decoration-thickness: ").concat(pt(v*this.getObjectScaling().y/10,rt.NUM_FRACTION_DIGITS),"%; "):"",s?xs(Lt,s):"",u?"baseline-shift: ".concat(-u,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter((e=>n[e.replace("-","")])).join(" ")}}]),fe.setClass(Gt),fe.setSVGClass(Gt);class sy{constructor(e){A(this,"target",void 0),A(this,"__mouseDownInPlace",!1),A(this,"__dragStartFired",!1),A(this,"__isDraggingOver",!1),A(this,"__dragStartSelection",void 0),A(this,"__dragImageDisposer",void 0),A(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach((r=>r())),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:i,selectionEnd:s}=t;const o=this.target,a=o.canvas,c=new F(o.flipX?-1:1,o.flipY?-1:1),u=o._getCursorBoundaries(i),h=new F(u.left+u.leftOffset,u.top+u.topOffset).multiply(c).transform(o.calcTransformMatrix()),f=a.getScenePoint(e).subtract(h),p=o.getCanvasRetinaScaling(),y=o.getBoundingRect(),g=h.subtract(new F(y.left,y.top)),v=a.viewportTransform,b=g.add(f).transform(v,!0),_=o.backgroundColor,C=Cc(o.styles);o.backgroundColor="";const E={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(E,0,i),o.setSelectionStyles(E,s,o.text.length),o.dirty=!0;const j=o.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=_,o.styles=C,o.dirty=!0,Wl(j,{position:"fixed",left:"".concat(-j.width,"px"),border:rr,width:"".concat(j.width/p,"px"),height:"".concat(j.height/p,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{j.remove()},kr(e.target||this.target.hiddenTextarea).body.appendChild(j),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(j,b.x,b.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const i=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},s=t._text.slice(i.selectionStart,i.selectionEnd).join(""),o=D({text:t.text,value:s},i);e.dataTransfer.setData("text/plain",s),e.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:t.getSelectionStyles(i.selectionStart,i.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,o)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,i=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let s=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(s&&!i){const o=this.target,a=o.canvas;let c=o.getSelectionStartFromPointer(r);const{styles:u}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},h=s[Math.max(0,s.length-1)],f=0;if(this.__dragStartSelection){const p=this.__dragStartSelection.selectionStart,y=this.__dragStartSelection.selectionEnd;c>p&&c<=y?c=p:c>y&&(c-=y-p),o.removeChars(p,y),delete this.__dragStartSelection}o._reNewline.test(h)&&(o._reNewline.test(o._text[c])||c===o._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=o,o.insertChars(s,u,c),a.setActiveObject(o),o.enterEditing(r),o.selectionStart=Math.min(c+f,o._text.length),o.selectionEnd=Math.min(o.selectionStart+s.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(Vo,{index:c+f,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const i=this.target,s=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,c=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||rr;c===rr?(i.selectionStart=o,i.selectionEnd=a,i._updateTextarea(),i.hiddenTextarea.focus()):(i.clearContextTop(),c==="move"&&(i.removeChars(o,a),i.selectionStart=i.selectionEnd=o,i.hiddenTextarea&&(i.hiddenTextarea.value=i.text),i._updateTextarea(),i.fire(Vo,{index:o,action:"dragend"}),s.fire("text:changed",{target:i}),s.requestRenderAll()),i.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const ih=/[ \n\.,;!\?\-]/;class oy extends Gt{constructor(){super(...arguments),A(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:i,onComplete:s}=e;return Rd({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:i,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach((t=>{t&&!t.isDone()&&(e=!0,t.abort())})),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some((e=>!e||e.isDone()))&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let i=e>0&&this._reSpace.test(r[e])&&(t===-1||!fc.test(r[e-1]))?e-1:e,s=r[i];for(;i>0&&i<r.length&&!ih.test(s);)i+=t,s=r[i];return t===-1&&ih.test(s)&&i++,i}selectWord(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const r=this.searchWordBoundary(e,-1),i=Math.max(r,this.searchWordBoundary(e,1));this.selectionStart=r,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const r=this.findLineBoundaryLeft(e),i=this.findLineBoundaryRight(e);this.selectionStart=r,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;kr(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),i=this.selectionStart,s=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&i!==s||i!==r&&s!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const i=r.slice(0,e),s=this.graphemeSplit(i).length;if(e===t)return{selectionStart:s,selectionEnd:s};const o=r.slice(e,t);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(e,t,r){const i=r.slice(0,e).join("").length;return e===t?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),i=r.lineIndex,s=r.charIndex,o=this.getValueOfPropertyAt(i,s,"fontSize")*this.lineHeight,a=t.leftOffset,c=this.getCanvasRetinaScaling(),u=this.canvas.upperCanvasEl,h=u.width/c,f=u.height/c,p=h-o,y=f-o,g=new F(t.left+a,t.top+t.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new F(u.clientWidth/h,u.clientHeight/f));return g.x<0&&(g.x=0),g.x>p&&(g.x=p),g.y<0&&(g.y=0),g.y>y&&(g.y=y),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:"".concat(g.x,"px"),top:"".concat(g.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(Xo),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:o}=this.get2DCursorLocation(t,!0);if(r!==s){if(this.styles[r])for(let a=i;a<this._unwrappedTextLines[r].length;a++)delete this.styles[r][a];if(this.styles[s])for(let a=o;a<this._unwrappedTextLines[s].length;a++){const c=this.styles[s][a];c&&(this.styles[r]||(this.styles[r]={}),this.styles[r][i+a-o]=c)}for(let a=r+1;a<=s;a++)delete this.styles[a];this.shiftLineStyles(s,r-s)}else if(this.styles[r]){const a=this.styles[r],c=o-i;for(let u=i;u<o;u++)delete a[u];for(const u in this.styles[r]){const h=parseInt(u,10);h>=o&&(a[h-c]=a[u],delete a[u])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const i in this.styles){const s=parseInt(i,10);s>e&&(this.styles[s+t]=r[s],r[s-t]||delete this.styles[s])}}insertNewlineStyleObject(e,t,r,i){const s={},o=this._unwrappedTextLines[e].length,a=o===t;let c=!1;r||(r=1),this.shiftLineStyles(e,r);const u=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const f in this.styles[e]){const p=parseInt(f,10);p>=t&&(c=!0,s[p-t]=this.styles[e][f],a&&t===0||delete this.styles[e][f])}let h=!1;for(c&&!a&&(this.styles[e+r]=s,h=!0),(h||o>t)&&r--;r>0;)i&&i[r-1]?this.styles[e+r]={0:D({},i[r-1])}:u?this.styles[e+r]={0:D({},u)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,i){this.styles||(this.styles={});const s=this.styles[e],o=s?D({},s):{};r||(r=1);for(const c in o){const u=parseInt(c,10);u>=t&&(s[u+r]=o[u],o[u-r]||delete s[u])}if(this._forceClearCache=!0,i){for(;r--;)Object.keys(i[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=D({},i[r]));return}if(!s)return;const a=s[t?t-1:1];for(;a&&r--;)this.styles[e][t+r]=D({},a)}insertNewStyleBlock(e,t,r){const i=this.get2DCursorLocation(t,!0),s=[0];let o,a=0;for(let c=0;c<e.length;c++)e[c]===`
`?(a++,s[a]=0):s[a]++;for(s[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,s[0],r),r=r&&r.slice(s[0]+1)),a&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+s[0],a),o=1;o<a;o++)s[o]>0?this.insertCharStyleObject(i.lineIndex+o,0,s[o],r):r&&this.styles[i.lineIndex+o]&&r[0]&&(this.styles[i.lineIndex+o][0]=r[0]),r=r&&r.slice(s[o]+1);s[o]>0&&this.insertCharStyleObject(i.lineIndex+o,0,s[o],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;i>r&&this.removeStyleFromTo(r,i);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,r,t),this._text=[...this._text.slice(0,r),...s,...this._text.slice(i)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=at:this._selectionDirection===Et&&(this._selectionDirection=at,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===Et?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=Et:this._selectionDirection===at&&(this._selectionDirection=Et,this.selectionStart=t),this.selectionEnd=r)}}class ay extends oy{initHiddenTextarea(){const e=this.canvas&&kr(this.canvas.getElement())||Fi(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map((o=>{let[a,c]=o;return t.setAttribute(a,c)}));const{top:r,left:i,fontSize:s}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(i,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map((o=>{let[a,c]=o;return t.addEventListener(a,this[c].bind(this))})),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:r,selectionStart:i,selectionEnd:s}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const o=()=>{this.updateFromTextArea(),this.fire(Vo),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void o();const a=this._splitTextIntoLines(r).graphemeText,c=this._text.length,u=a.length,h=this.selectionStart,f=this.selectionEnd,p=h!==f;let y,g,v,b,_=u-c;const C=this.fromStringToGraphemeSelection(i,s,r),E=h>C.selectionStart;p?(g=this._text.slice(h,f),_+=f-h):u<c&&(g=E?this._text.slice(f+_,f):this._text.slice(h,h-_));const j=a.slice(C.selectionEnd-_,C.selectionEnd);if(g&&g.length&&(j.length&&(y=this.getSelectionStyles(h,h+1,!1),y=j.map((()=>y[0]))),p?(v=h,b=f):E?(v=f-g.length,b=f):(v=f,b=f+g.length),this.removeStyleFromTo(v,b)),j.length){const{copyPasteData:I}=zr();t&&j.join("")===I.copiedText&&!rt.disableStyleCopyPaste&&(y=I.copiedTextStyle),this.insertNewStyleBlock(j,h,y)}o()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:i}=t;this.compositionStart=r,this.compositionEnd=i,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=zr();e.copiedText=this.getSelectedText(),rt.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,i=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],i+=r.left+r.width),i}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(r),s=i.lineIndex;if(s===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const o=i.charIndex,a=this._getWidthBeforeCursor(s,o),c=this._getIndexOnLine(s+1,a);return this._textLines[s].slice(o).length+c+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(r),s=i.lineIndex;if(s===0||e.metaKey||e.keyCode===33)return-r;const o=i.charIndex,a=this._getWidthBeforeCursor(s,o),c=this._getIndexOnLine(s-1,a),u=this._textLines[s].slice(0,o),h=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+c-u.length+(1-h)}_getIndexOnLine(e,t){const r=this._textLines[e];let i,s,o=this._getLineLeftOffset(e),a=0;for(let c=0,u=r.length;c<u;c++)if(i=this.__charBounds[e][c].width,o+=i,o>t){s=!0;const h=o-i,f=o,p=Math.abs(h-t);a=Math.abs(f-t)<p?c:c-1;break}return s||(a=r.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Et);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const i=this.text.length;this.selectionStart=Li(0,this.selectionStart,i),this.selectionEnd=Li(0,this.selectionEnd,i),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===at?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let i;if(e.altKey)i=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=r==="Left"?-1:1,!0;i=this["findLineBoundary".concat(r)](this[t])}return i!==void 0&&this[t]!==i&&(this[t]=i,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=at,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Et&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=at,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===at&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Et,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Et,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const sh=n=>!!n.button;class ly extends ay{constructor(){super(...arguments),A(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new sy(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:r}=e;this.canvas&&this.editable&&!sh(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),r&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=r||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:r}=e;const i=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const s=this.canvas._activeObject;if(s&&s!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||sh(t)||i||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,i=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,i,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(Dr(this.calcTransformMatrix())).add(new F(-this._getLeftOffset(),-this._getTopOffset()));let r=0,i=0,s=0;for(let u=0;u<this._textLines.length&&r<=t.y;u++)r+=this.getHeightOfLine(u),s=u,u>0&&(i+=this._textLines[u-1].length+this.missingNewlineOffset(u-1));let o=Math.abs(this._getLineLeftOffset(s));const a=this._textLines[s].length,c=this.__charBounds[s];for(let u=0;u<a;u++){const h=o+c[u].kernedWidth;if(t.x<=h){Math.abs(t.x-h)<=Math.abs(t.x-o)&&i++;break}o=h,i++}return Math.min(this.flipX?a-i:i,this._text.length)}}const fo="moveCursorUp",go="moveCursorDown",po="moveCursorLeft",mo="moveCursorRight",vo="exitEditing",oh=(n,e)=>{const t=e.getRetinaScaling();n.setTransform(t,0,0,t,0,0);const r=e.viewportTransform;n.transform(r[0],r[1],r[2],r[3],r[4],r[5])},cy=D({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:vo,27:vo,33:fo,34:go,35:mo,36:po,37:po,38:fo,39:mo,40:go},keysMapRtl:{9:vo,27:vo,33:fo,34:go,35:po,36:mo,37:mo,38:fo,39:po,40:go},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class nn extends ly{static getDefaults(){return D(D({},super.getDefaults()),nn.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,D(D({},nn.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof zl&&this.canvas.textEditingManager.remove(this),t instanceof zl&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),r=this.findAncestorsWithClipPath(),i=r.length>0;let s,o=e;if(i){s=mr(e.canvas),o=s.getContext("2d"),oh(o,this.canvas);const a=this.calcTransformMatrix();o.transform(a[0],a[1],a[2],a[3],a[4],a[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(o,t):this.renderCursor(o,t),i)for(const a of r){const c=a.clipPath,u=mr(e.canvas),h=u.getContext("2d");if(oh(h,this.canvas),!c.absolutePositioned){const f=a.calcTransformMatrix();h.transform(f[0],f[1],f[2],f[3],f[4],f[5])}c.transform(h),c.drawObject(h,!0,{}),this.drawClipPathOnCache(o,c,u)}i&&(e.setTransform(1,0,0,1,0,0),e.drawImage(s,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),i=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,t);return{left:r,top:i,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:i,lineIndex:s}=this.get2DCursorLocation(e);for(let u=0;u<s;u++)t+=this.getHeightOfLine(u);const o=this._getLineLeftOffset(s),a=this.__charBounds[s][i];a&&(r=a.left),this.charSpacing!==0&&i===this._textLines[s].length&&(r-=this._getWidthOfCharSpacing());const c={top:t,left:o+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===Et||this.textAlign===Hr||this.textAlign===ps?c.left*=-1:this.textAlign===at||this.textAlign===Ko?c.left=o-(r>0?r:0):this.textAlign!==Ye&&this.textAlign!==ms||(c.left=o-(r>0?r:0))),c}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),i=r.lineIndex,s=r.charIndex>0?r.charIndex-1:0,o=this.getValueOfPropertyAt(i,s,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),c=this.cursorWidth/a,u=this.getValueOfPropertyAt(i,s,"deltaY"),h=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-o*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(i,s,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-c/2,top:h+t.top+u,width:c,height:o}}_renderCursor(e,t,r){const{color:i,opacity:s,left:o,top:a,width:c,height:u}=this.getCursorRenderingData(r,t);e.fillStyle=i,e.globalAlpha=s,e.fillRect(o,a,c,u)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const i=t.selectionStart,s=t.selectionEnd,o=this.textAlign.includes(Hr),a=this.get2DCursorLocation(i),c=this.get2DCursorLocation(s),u=a.lineIndex,h=c.lineIndex,f=a.charIndex<0?0:a.charIndex,p=c.charIndex<0?0:c.charIndex;for(let y=u;y<=h;y++){const g=this._getLineLeftOffset(y)||0;let v=this.getHeightOfLine(y),b=0,_=0,C=0;if(y===u&&(_=this.__charBounds[u][f].left),y>=u&&y<h)C=o&&!this.isEndOfWrapping(y)?this.width:this.getLineWidth(y)||5;else if(y===h)if(p===0)C=this.__charBounds[h][p].left;else{const L=this._getWidthOfCharSpacing();C=this.__charBounds[h][p-1].left+this.__charBounds[h][p-1].width-L}b=v,(this.lineHeight<1||y===h&&this.lineHeight>1)&&(v/=this.lineHeight);let E=r.left+g+_,j=v,I=0;const V=C-_;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",j=1,I=v):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Et||this.textAlign===Hr||this.textAlign===ps?E=this.width-E-V:this.textAlign===at||this.textAlign===Ko?E=r.left+g-C:this.textAlign!==Ye&&this.textAlign!==ms||(E=r.left+g-C)),e.fillRect(E,r.top+r.topOffset+I,V,j),r.topOffset+=b}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Lt)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}A(nn,"ownDefaults",cy),A(nn,"type","IText"),fe.setClass(nn),fe.setClass(nn,"i-text");class Un extends nn{static getDefaults(){return D(D({},super.getDefaults()),Un.ownDefaults)}constructor(e,t){super(e,D(D({},Un.ownDefaults),t))}static createControls(){return{controls:Hm()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Hr)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,i=0;const s={};for(let o=0;o<e.graphemeLines.length;o++)e.graphemeText[i]===`
`&&o>0?(r=0,i++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[i])&&o>0&&(r++,i++),s[o]={line:t,offset:r},i+=e.graphemeLines[o].length,r+=e.graphemeLines[o].length;return s}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,i=e+1,s=!1;const o=this._styleMap[e],a=this._styleMap[e+1];o&&(e=o.line,r=o.offset),a&&(i=a.line,s=i===e,t=a.offset);const c=e===void 0?this.styles:{line:this.styles[e]};for(const u in c)for(const h in c[u]){const f=parseInt(h,10);if(f>=r&&(!s||f<t))for(const p in c[u][h])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const i=this._styleMap[e];super._setStyleDeclaration(i.line,i.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),i=[];for(let s=0;s<r.wordsData.length;s++)i.push(...this._wrapLine(s,t,r));return this.isWrapping=!1,i}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let i=0;return{wordsData:e.map(((s,o)=>{let a=0;const c=t?this.graphemeSplit(s):this.wordSplit(s);return c.length===0?[{word:[],width:0}]:c.map((u=>{const h=t?[u]:this.graphemeSplit(u),f=this._measureWord(h,o,a);return i=Math.max(f,i),a+=h.length+r.length,{word:h,width:f}}))})),largestWordWidth:i}}_measureWord(e,t){let r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=0;for(let o=0,a=e.length;o<a;o++)s+=this._getGraphemeBox(e[o],t,o+i,r,!0).kernedWidth,r=e[o];return s}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:i,wordsData:s}=r,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),c=this.splitByGrapheme,u=[],h=c?"":" ";let f=0,p=[],y=0,g=0,v=!0;t-=o;const b=Math.max(t,i,this.dynamicMinWidth),_=s[e];let C;for(y=0,C=0;C<_.length;C++){const{word:E,width:j}=_[C];y+=E.length,f+=g+j-a,f>b&&!v?(u.push(p),p=[],f=j,v=!0):f+=a,v||c||p.push(h),p=p.concat(E),g=c?0:this._measureWord([h],e,y),y++,v=!1}return C&&u.push(p),i+o>this.dynamicMinWidth&&(this.dynamicMinWidth=i-a+o),u}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),i=new Array(r.length);for(let s=0;s<r.length;s++)i[s]=r[s].join("");return t.lines=i,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const i=this._styleMap[t].line;e.set("".concat(i),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}A(Un,"type","Textbox"),A(Un,"textLayoutProperties",[...nn.textLayoutProperties,"width"]),A(Un,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),fe.setClass(Un);class ah extends ua{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:i,group:s}=r;if(!i||!this.shouldPerformLayout(e))return;const{width:o,height:a}=on(zd(r,i)),c=new F(o,a);if(i.absolutePositioned)return{center:Di(i.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:c};{const u=i.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:h=new F,correction:f=new F}=this.calcBoundingBox(t,e)||{};return{center:h.add(u),correction:f.subtract(u),size:c}}return{center:r.getRelativeCenterPoint().add(u),size:c}}}}A(ah,"type","clip-path"),fe.setClass(ah);class lh extends ua{getInitialSize(e,t){let{target:r}=e,{size:i}=t;return new F(r.width||i.x,r.height||i.y)}}A(lh,"type","fixed"),fe.setClass(lh);class uy extends Cs{subscribeTargets(e){const t=e.target;e.targets.reduce(((r,i)=>(i.parent&&r.add(i.parent),r)),new Set).forEach((r=>{r.layoutManager.subscribeTargets({target:r,targets:[t]})}))}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce(((i,s)=>(s.parent&&i.add(s.parent),i)),new Set).forEach((i=>{!r.some((s=>s.parent===i))&&i.layoutManager.unsubscribeTargets({target:i,targets:[t]})}))}}class Wn extends Xn{static getDefaults(){return D(D({},super.getDefaults()),Wn.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Wn.ownDefaults),this.setOptions(t);const{left:r,top:i,layoutManager:s}=t;this.groupInit(e,{left:r,top:i,layoutManager:s??new uy})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach((i=>{const s=this._objects.findIndex((a=>a.isInFrontOf(i))),o=s===-1?this.size():s;this.insertAt(o,i)}))}canEnterGroup(e){return this.getObjects().some((t=>t.isDescendantOf(e)||e.isDescendantOf(t)))?(Sn("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach((i=>{const{parent:s}=i;s&&r.add(s)})),e===Ac?r.forEach((i=>{i._onAfterObjectsChange(Jo,t)})):r.forEach((i=>{i._set("dirty",!0)}))}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const i=D(D({hasControls:!1},r),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,i);super._renderControls(e,t),e.restore()}}A(Wn,"type","ActiveSelection"),A(Wn,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),fe.setClass(Wn),fe.setClass(Wn,"activeSelection");class hy{constructor(){A(this,"resources",{})}applyFilters(e,t,r,i,s){const o=s.getContext("2d");if(!o)return;o.drawImage(t,0,0,r,i);const a={sourceWidth:r,sourceHeight:i,imageData:o.getImageData(0,0,r,i),originalEl:t,originalImageData:o.getImageData(0,0,r,i),canvasEl:s,ctx:o,filterBackend:this};e.forEach((u=>{u.applyTo(a)}));const{imageData:c}=a;return c.width===r&&c.height===i||(s.width=c.width,s.height=c.height),o.putImageData(c,0,0),a}}class of{constructor(){let{tileSize:e=rt.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};A(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),A(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=mr({width:e,height:t}),i=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});i&&(i.clearColor(0,0,0,0),this.canvas=r,this.gl=i)}applyFilters(e,t,r,i,s,o){const a=this.gl,c=s.getContext("2d");if(!a||!c)return;let u;o&&(u=this.getCachedTexture(o,t));const h={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:i,destinationWidth:r,destinationHeight:i,context:a,sourceTexture:this.createTexture(a,r,i,u?void 0:t),targetTexture:this.createTexture(a,r,i),originalTexture:u||this.createTexture(a,r,i,u?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},f=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,f),e.forEach((p=>{p&&p.applyTo(h)})),(function(p){const y=p.targetCanvas,g=y.width,v=y.height,b=p.destinationWidth,_=p.destinationHeight;g===b&&v===_||(y.width=b,y.height=_)})(h),this.copyGLTo2D(a,h),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(h.sourceTexture),a.deleteTexture(h.targetTexture),a.deleteFramebuffer(f),c.setTransform(1,0,0,1,0,0),h}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,i,s){const{NEAREST:o,TEXTURE_2D:a,RGBA:c,UNSIGNED_BYTE:u,CLAMP_TO_EDGE:h,TEXTURE_MAG_FILTER:f,TEXTURE_MIN_FILTER:p,TEXTURE_WRAP_S:y,TEXTURE_WRAP_T:g}=e,v=e.createTexture();return e.bindTexture(a,v),e.texParameteri(a,f,s||o),e.texParameteri(a,p,s||o),e.texParameteri(a,y,h),e.texParameteri(a,g,h),i?e.texImage2D(a,0,c,c,u,i):e.texImage2D(a,0,c,t,r,0,c,u,null),v}getCachedTexture(e,t,r){const{textureCache:i}=this;if(i[e])return i[e];{const s=this.createTexture(this.gl,t.width,t.height,t,r);return s&&(i[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,i=t.targetCanvas,s=i.getContext("2d");if(!s)return;s.translate(0,i.height),s.scale(1,-1);const o=r.height-i.height;s.drawImage(r,0,o,i.width,i.height,0,0,i.width,i.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),i=t.destinationWidth,s=t.destinationHeight,o=i*s*4;if(!r)return;const a=new Uint8Array(this.imageBuffer,0,o),c=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,i,s,e.RGBA,e.UNSIGNED_BYTE,a);const u=new ImageData(c,i,s);r.putImageData(u,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const i=e.getParameter(r.UNMASKED_RENDERER_WEBGL),s=e.getParameter(r.UNMASKED_VENDOR_WEBGL);i&&(t.renderer=i.toLowerCase()),s&&(t.vendor=s.toLowerCase())}return this.gpuInfo=t,t}}let dl;function dy(){const{WebGLProbe:n}=zr();return n.queryWebGL(un()),rt.enableGLFiltering&&n.isSupported(rt.textureSize)?new of({tileSize:rt.textureSize}):new hy}function fl(){return!dl&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(dl=dy()),dl}const fy=["filters","resizeFilter","src","crossOrigin","type"],af=["cropX","cropY"];class fr extends qt{static getDefaults(){return D(D({},super.getDefaults()),fr.ownDefaults)}constructor(e,t){super(),A(this,"_lastScaleX",1),A(this,"_lastScaleY",1),A(this,"_filterScalingX",1),A(this,"_filterScalingY",1),this.filters=[],Object.assign(this,fr.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(Cn()),this.setElement(typeof e=="string"?(this.canvas&&kr(this.canvas.getElement())||Fi()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(r),(t=e.classList)===null||t===void 0||t.add(fr.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=fl(!1);t instanceof of&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((e=>{const t=this[e];t&&zr().dispose(t),this[e]=void 0}))}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach((r=>{r&&t.push(r.toObject())})),D(D({},super.toObject([...af,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,i=-this.height/2;let s=[],o=[],a="",c="";if(!t)return[];if(this.hasCrop()){const u=Cn();s.push('<clipPath id="imageCrop_'+u+`">
`,'	<rect x="'+r+'" y="'+i+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+u+')" '}if(this.imageSmoothing||(c=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(i-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(c).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const u=this.fill;this.fill=null,o=['	<rect x="'.concat(r,'" y="').concat(i,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=u}return s=this.paintFirst!==Lt?s.concat(o,e):s.concat(e,o),s}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Bo(e,{crossOrigin:t,signal:r}).then((i=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(i)}))}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),i=r.x,s=r.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||i>t&&s>t)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=s);const a=mr(o),{width:c,height:u}=o;this._element=a,this._lastScaleX=e.scaleX=i,this._lastScaleY=e.scaleY=s,fl().applyFilters([e],o,c,u,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter((s=>s&&!s.isNeutralState())),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,i=t.naturalHeight||t.height;if(this._element===this._originalElement){const s=mr({width:r,height:i});this._element=s,this._filteredEl=s}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,i),this._lastScaleX=1,this._lastScaleY=1);fl().applyFilters(e,this._originalElement,r,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,i=this._filterScalingY,s=this.width,o=this.height,a=Math.max(this.cropX,0),c=Math.max(this.cropY,0),u=t.naturalWidth||t.width,h=t.naturalHeight||t.height,f=a*r,p=c*i,y=Math.min(s*r,u-f),g=Math.min(o*i,h-p),v=-s/2,b=-o/2,_=Math.min(s,u/r-a),C=Math.min(o,h/i-c);t&&e.drawImage(t,f,p,y,g,v,b,_,C)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=im(this.preserveAspectRatio||""),t=this.width,r=this.height,i={width:t,height:r};let s,o=this._element.width,a=this._element.height,c=1,u=1,h=0,f=0,p=0,y=0;return!e||e.alignX===rr&&e.alignY===rr?(c=t/o,u=r/a):(e.meetOrSlice==="meet"&&(c=u=_v(this._element,i),s=(t-o*c)/2,e.alignX==="Min"&&(h=-s),e.alignX==="Max"&&(h=s),s=(r-a*u)/2,e.alignY==="Min"&&(f=-s),e.alignY==="Max"&&(f=s)),e.meetOrSlice==="slice"&&(c=u=wv(this._element,i),s=o-t/c,e.alignX==="Mid"&&(p=s/2),e.alignX==="Max"&&(p=s),s=a-r/u,e.alignY==="Mid"&&(y=s/2),e.alignY==="Max"&&(y=s),o=t/c,a=r/u)),{width:o,height:a,scaleX:c,scaleY:u,offsetLeft:h,offsetTop:f,cropX:p,cropY:y}}static fromObject(e,t){let{filters:r,resizeFilter:i,src:s,crossOrigin:o,type:a}=e,c=wt(e,fy);return Promise.all([Bo(s,D(D({},t),{},{crossOrigin:o})),r&&_s(r,t),i&&_s([i],t),oa(c,t)]).then((u=>{let[h,f=[],[p]=[],y={}]=u;return new this(h,D(D({},c),{},{src:s,filters:f,resizeFilter:p},y))}))}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return Bo(e,{crossOrigin:t,signal:r}).then((s=>new this(s,i)))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const i=pn(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(i["xlink:href"]||i.href,t,i).catch((s=>(Sn("log","Unable to parse Image",s),null)))}}A(fr,"type","Image"),A(fr,"cacheProperties",[...gn,...af]),A(fr,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),A(fr,"CSS_CANVAS","canvas-img"),A(fr,"ATTRIBUTE_NAMES",[...Tn,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),fe.setClass(fr),fe.setSVGClass(fr);la(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const da=n=>n.webgl!==void 0,kc="precision highp float",gy=`
    `.concat(kc,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),py=["type"],my=["type"],vy=new RegExp(kc,"g");class Rt{get type(){return this.constructor.type}constructor(){let e=wt(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},py);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return gy}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:i="highp"}}=zr();i!=="highp"&&(t=t.replace(vy,kc.replace("highp",i)));const s=e.createShader(e.VERTEX_SHADER),o=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!s||!o||!a)throw new Wr("Vertex, fragment shader or program creation error");if(e.shaderSource(s,r),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new Wr("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new Wr("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(o)));if(e.attachShader(a,s),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Wr('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const c=this.getUniformLocations(e,a)||{};return c.uStepW=e.getUniformLocation(a,"uStepW"),c.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:c}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,i={};for(let s=0;s<r.length;s++)i[r[s]]=e.getUniformLocation(t,r[s]);return i}sendAttributeData(e,t,r){const i=t.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,i=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===i||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,i)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){da(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,i=mr({width:t,height:r});e.helpLayer=i}}toObject(){const e=Object.keys(this.constructor.defaults||{});return D({type:this.type},e.reduce(((t,r)=>(t[r]=this[r],t)),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(wt(e,my))}}A(Rt,"type","BaseFilter"),A(Rt,"uniformLocations",[]);const yy={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class yo extends Rt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(yy[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new ht(this.color).getSource(),i=this.alpha,s=r[0]*i,o=r[1]*i,a=r[2]*i,c=1-i;for(let u=0;u<t.length;u+=4){const h=t[u],f=t[u+1],p=t[u+2];let y,g,v;switch(this.mode){case"multiply":y=h*s/255,g=f*o/255,v=p*a/255;break;case"screen":y=255-(255-h)*(255-s)/255,g=255-(255-f)*(255-o)/255,v=255-(255-p)*(255-a)/255;break;case"add":y=h+s,g=f+o,v=p+a;break;case"difference":y=Math.abs(h-s),g=Math.abs(f-o),v=Math.abs(p-a);break;case"subtract":y=h-s,g=f-o,v=p-a;break;case"darken":y=Math.min(h,s),g=Math.min(f,o),v=Math.min(p,a);break;case"lighten":y=Math.max(h,s),g=Math.max(f,o),v=Math.max(p,a);break;case"overlay":y=s<128?2*h*s/255:255-2*(255-h)*(255-s)/255,g=o<128?2*f*o/255:255-2*(255-f)*(255-o)/255,v=a<128?2*p*a/255:255-2*(255-p)*(255-a)/255;break;case"exclusion":y=s+h-2*s*h/255,g=o+f-2*o*f/255,v=a+p-2*a*p/255;break;case"tint":y=s+h*c,g=o+f*c,v=a+p*c}t[u]=y,t[u+1]=g,t[u+2]=v}}sendUniformData(e,t){const r=new ht(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}A(yo,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),A(yo,"type","BlendColor"),A(yo,"uniformLocations",["uColor"]),fe.setClass(yo);const by={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},_y=["type","image"];class bo extends Rt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return by[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:i},filterBackend:{resources:s}}=e;const o=this.image;s.blendImage||(s.blendImage=un());const a=s.blendImage,c=a.getContext("2d");a.width!==r||a.height!==i?(a.width=r,a.height=i):c.clearRect(0,0,r,i),c.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),c.drawImage(o.getElement(),0,0,r,i);const u=c.getImageData(0,0,r,i).data;for(let h=0;h<t.length;h+=4){const f=t[h],p=t[h+1],y=t[h+2],g=t[h+3],v=u[h],b=u[h+1],_=u[h+2],C=u[h+3];switch(this.mode){case"multiply":t[h]=f*v/255,t[h+1]=p*b/255,t[h+2]=y*_/255,t[h+3]=g*C/255;break;case"mask":t[h+3]=C}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return D(D({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:i}=e,s=wt(e,_y);return fr.fromObject(i,t).then((o=>new this(D(D({},s),{},{image:o}))))}}A(bo,"type","BlendImage"),A(bo,"defaults",{mode:"multiply",alpha:1}),A(bo,"uniformLocations",["uTransformMatrix","uImage"]),fe.setClass(bo);class _o extends Rt{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(e){da(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:t,width:r,height:i}}=e;this.aspectRatio=r/i,this.horizontal=!0;let s=this.getBlurValue()*r;const o=new Uint8ClampedArray(t),a=15,c=4*r;for(let u=0;u<t.length;u+=4){let h=0,f=0,p=0,y=0,g=0;const v=u-u%c,b=v+c;for(let _=-14;_<a;_++){const C=_/a,E=4*Math.floor(s*C),j=1-Math.abs(C);let I=u+E;I<v?I=v:I>b&&(I=b);const V=t[I+3]*j;h+=t[I]*V,f+=t[I+1]*V,p+=t[I+2]*V,y+=V,g+=j}o[u]=h/y,o[u+1]=f/y,o[u+2]=p/y,o[u+3]=y/g}this.horizontal=!1,s=this.getBlurValue()*i;for(let u=0;u<o.length;u+=4){let h=0,f=0,p=0,y=0,g=0;const v=u%c,b=o.length-c+v;for(let _=-14;_<a;_++){const C=_/a,E=Math.floor(s*C)*c,j=1-Math.abs(C);let I=u+E;I<v?I=v:I>b&&(I=b);const V=o[I+3]*j;h+=o[I]*V,f+=o[I+1]*V,p+=o[I+2]*V,y+=V,g+=j}t[u]=h/y,t[u+1]=f/y,t[u+2]=p/y,t[u+3]=y/g}}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return this.blur===0}getBlurValue(){let e=1;const{horizontal:t,aspectRatio:r}=this;return t?r>1&&(e=1/r):r<1&&(e=r),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}A(_o,"type","Blur"),A(_o,"defaults",{blur:0}),A(_o,"uniformLocations",["uDelta"]),fe.setClass(_o);class wo extends Rt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let i=0;i<t.length;i+=4)t[i]+=r,t[i+1]+=r,t[i+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}A(wo,"type","Brightness"),A(wo,"defaults",{brightness:0}),A(wo,"uniformLocations",["uBrightness"]),fe.setClass(wo);const lf={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Oi extends Rt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,r=this.matrix,i=this.colorsOnly;for(let s=0;s<t.length;s+=4){const o=t[s],a=t[s+1],c=t[s+2];if(t[s]=o*r[0]+a*r[1]+c*r[2]+255*r[4],t[s+1]=o*r[5]+a*r[6]+c*r[7]+255*r[9],t[s+2]=o*r[10]+a*r[11]+c*r[12]+255*r[14],!i){const u=t[s+3];t[s]+=u*r[3],t[s+1]+=u*r[8],t[s+2]+=u*r[13],t[s+3]=o*r[15]+a*r[16]+c*r[17]+u*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,i=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],s=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,i),e.uniform4fv(t.uConstants,s)}toObject(){return D(D({},super.toObject()),{},{matrix:[...this.matrix]})}}function Gn(n,e){var t;const r=(A(t=class extends Oi{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),A(t,"defaults",{colorsOnly:!1,matrix:e}),t);return fe.setClass(r,n),r}A(Oi,"type","ColorMatrix"),A(Oi,"defaults",lf),A(Oi,"uniformLocations",["uColorMatrix","uConstants"]),fe.setClass(Oi);Gn("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Gn("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Gn("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Gn("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Gn("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Gn("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Gn("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class ch extends Rt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){da(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach((t=>{t.applyTo(e)}))}toObject(){return{type:this.type,subFilters:this.subFilters.map((e=>e.toObject()))}}isNeutralState(){return!this.subFilters.some((e=>!e.isNeutralState()))}static fromObject(e,t){return Promise.all((e.subFilters||[]).map((r=>fe.getClass(r.type).fromObject(r,t)))).then((r=>new this({subFilters:r})))}}A(ch,"type","Composed"),fe.setClass(ch);class xo extends Rt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),i=259*(r+255)/(255*(259-r));for(let s=0;s<t.length;s+=4)t[s]=i*(t[s]-128)+128,t[s+1]=i*(t[s+1]-128)+128,t[s+2]=i*(t[s+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}A(xo,"type","Contrast"),A(xo,"defaults",{contrast:0}),A(xo,"uniformLocations",["uContrast"]),fe.setClass(xo);const wy={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class So extends Rt{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return wy[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,i=this.matrix,s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),a=t.width,c=t.height,u=e.ctx.createImageData(a,c),h=u.data,f=this.opaque?1:0;let p,y,g,v,b,_,C,E,j,I,V,L,P;for(V=0;V<c;V++)for(I=0;I<a;I++){for(b=4*(V*a+I),p=0,y=0,g=0,v=0,P=0;P<s;P++)for(L=0;L<s;L++)C=V+P-o,_=I+L-o,C<0||C>=c||_<0||_>=a||(E=4*(C*a+_),j=i[P*s+L],p+=r[E]*j,y+=r[E+1]*j,g+=r[E+2]*j,f||(v+=r[E+3]*j));h[b]=p,h[b+1]=y,h[b+2]=g,h[b+3]=f?r[b+3]:v}e.imageData=u}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return D(D({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}A(So,"type","Convolute"),A(So,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),A(So,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),fe.setClass(So);const cf="Gamma";class Co extends Rt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,i=1/r[0],s=1/r[1],o=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let c=0;c<256;c++)a.r[c]=255*Math.pow(c/255,i),a.g[c]=255*Math.pow(c/255,s),a.b[c]=255*Math.pow(c/255,o);for(let c=0;c<t.length;c+=4)t[c]=a.r[t[c]],t[c+1]=a.g[t[c+1]],t[c+2]=a.b[t[c+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:cf,gamma:this.gamma.concat()}}}A(Co,"type",cf),A(Co,"defaults",{gamma:[1,1,1]}),A(Co,"uniformLocations",["uGamma"]),fe.setClass(Co);const xy={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class To extends Rt{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,i=0;i<t.length;i+=4){const s=t[i],o=t[i+1],a=t[i+2];switch(this.mode){case"average":r=(s+o+a)/3;break;case"lightness":r=(Math.min(s,o,a)+Math.max(s,o,a))/2;break;case"luminosity":r=.21*s+.72*o+.07*a}t[i+2]=t[i+1]=t[i]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return xy[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}A(To,"type","Grayscale"),A(To,"defaults",{mode:"average"}),A(To,"uniformLocations",["uMode"]),fe.setClass(To);const Sy=D(D({},lf),{},{rotation:0});class gl extends Oi{calculateMatrix(){const e=this.rotation*Math.PI,t=ln(e),r=cn(e),i=1/3,s=Math.sqrt(i)*r,o=1-t;this.matrix=[t+o/3,i*o-s,i*o+s,0,0,i*o+s,t+i*o,i*o-s,0,0,i*o-s,i*o+s,t+i*o,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}A(gl,"type","HueRotation"),A(gl,"defaults",Sy),fe.setClass(gl);class Oo extends Rt{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}A(Oo,"type","Invert"),A(Oo,"defaults",{alpha:!1,invert:!0}),A(Oo,"uniformLocations",["uInvert","uAlpha"]),fe.setClass(Oo);class Eo extends Rt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let i=0;i<t.length;i+=4){const s=(.5-Math.random())*r;t[i]+=s,t[i+1]+=s,t[i+2]+=s}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}A(Eo,"type","Noise"),A(Eo,"defaults",{noise:0}),A(Eo,"uniformLocations",["uNoise","uSeed"]),fe.setClass(Eo);class Ao extends Rt{applyTo2d(e){let{imageData:{data:t,width:r,height:i}}=e;for(let s=0;s<i;s+=this.blocksize)for(let o=0;o<r;o+=this.blocksize){const a=4*s*r+4*o,c=t[a],u=t[a+1],h=t[a+2],f=t[a+3];for(let p=s;p<Math.min(s+this.blocksize,i);p++)for(let y=o;y<Math.min(o+this.blocksize,r);y++){const g=4*p*r+4*y;t[g]=c,t[g+1]=u,t[g+2]=h,t[g+3]=f}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}A(Ao,"type","Pixelate"),A(Ao,"defaults",{blocksize:4}),A(Ao,"uniformLocations",["uBlocksize"]),fe.setClass(Ao);class ko extends Rt{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,i=new ht(this.color).getSource(),s=[i[0]-r,i[1]-r,i[2]-r],o=[i[0]+r,i[1]+r,i[2]+r];for(let a=0;a<t.length;a+=4){const c=t[a],u=t[a+1],h=t[a+2];c>s[0]&&u>s[1]&&h>s[2]&&c<o[0]&&u<o[1]&&h<o[2]&&(t[a+3]=0)}}sendUniformData(e,t){const r=new ht(this.color).getSource(),i=this.distance,s=[0+r[0]/255-i,0+r[1]/255-i,0+r[2]/255-i,1],o=[r[0]/255+i,r[1]/255+i,r[2]/255+i,1];e.uniform4fv(t.uLow,s),e.uniform4fv(t.uHigh,o)}}A(ko,"type","RemoveColor"),A(ko,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),A(ko,"uniformLocations",["uLow","uHigh"]),fe.setClass(ko);class Do extends Rt{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),i=new Array(r);for(let s=1;s<=r;s++)i[s-1]=e(s*t);return i}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map(((r,i)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(i,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(i,`];
              sum += 2.0 * uTaps[`).concat(i,`];
            `))).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){da(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,i=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/i;const s=t.width,o=t.height,a=Math.round(s*r),c=Math.round(o*i);let u;u=this.resizeType==="sliceHack"?this.sliceByTwo(e,s,o,a,c):this.resizeType==="hermite"?this.hermiteFastResize(e,s,o,a,c):this.resizeType==="bilinear"?this.bilinearFiltering(e,s,o,a,c):this.resizeType==="lanczos"?this.lanczosResize(e,s,o,a,c):new ImageData(a,c),e.imageData=u}sliceByTwo(e,t,r,i,s){const o=e.imageData,a=.5;let c=!1,u=!1,h=t*a,f=r*a;const p=e.filterBackend.resources;let y=0,g=0;const v=t;let b=0;p.sliceByTwo||(p.sliceByTwo=un());const _=p.sliceByTwo;(_.width<1.5*t||_.height<r)&&(_.width=1.5*t,_.height=r);const C=_.getContext("2d");for(C.clearRect(0,0,1.5*t,r),C.putImageData(o,0,0),i=Math.floor(i),s=Math.floor(s);!c||!u;)t=h,r=f,i<Math.floor(h*a)?h=Math.floor(h*a):(h=i,c=!0),s<Math.floor(f*a)?f=Math.floor(f*a):(f=s,u=!0),C.drawImage(_,y,g,t,r,v,b,h,f),y=v,g=b,b+=f;return C.getImageData(y,g,i,s)}lanczosResize(e,t,r,i,s){const o=e.imageData.data,a=e.ctx.createImageData(i,s),c=a.data,u=this.lanczosCreate(this.lanczosLobes),h=this.rcpScaleX,f=this.rcpScaleY,p=2/this.rcpScaleX,y=2/this.rcpScaleY,g=Math.ceil(h*this.lanczosLobes/2),v=Math.ceil(f*this.lanczosLobes/2),b={},_={x:0,y:0},C={x:0,y:0};return(function E(j){let I,V,L,P,X,ne,se,G,oe,ge,Re;for(_.x=(j+.5)*h,C.x=Math.floor(_.x),I=0;I<s;I++){for(_.y=(I+.5)*f,C.y=Math.floor(_.y),X=0,ne=0,se=0,G=0,oe=0,V=C.x-g;V<=C.x+g;V++)if(!(V<0||V>=t)){ge=Math.floor(1e3*Math.abs(V-_.x)),b[ge]||(b[ge]={});for(let Fe=C.y-v;Fe<=C.y+v;Fe++)Fe<0||Fe>=r||(Re=Math.floor(1e3*Math.abs(Fe-_.y)),b[ge][Re]||(b[ge][Re]=u(Math.sqrt(Math.pow(ge*p,2)+Math.pow(Re*y,2))/1e3)),L=b[ge][Re],L>0&&(P=4*(Fe*t+V),X+=L,ne+=L*o[P],se+=L*o[P+1],G+=L*o[P+2],oe+=L*o[P+3]))}P=4*(I*i+j),c[P]=ne/X,c[P+1]=se/X,c[P+2]=G/X,c[P+3]=oe/X}return++j<i?E(j):a})(0)}bilinearFiltering(e,t,r,i,s){let o,a,c,u,h,f,p,y,g,v,b,_,C,E=0;const j=this.rcpScaleX,I=this.rcpScaleY,V=4*(t-1),L=e.imageData.data,P=e.ctx.createImageData(i,s),X=P.data;for(p=0;p<s;p++)for(y=0;y<i;y++)for(h=Math.floor(j*y),f=Math.floor(I*p),g=j*y-h,v=I*p-f,C=4*(f*t+h),b=0;b<4;b++)o=L[C+b],a=L[C+4+b],c=L[C+V+b],u=L[C+V+4+b],_=o*(1-g)*(1-v)+a*g*(1-v)+c*v*(1-g)+u*g*v,X[E++]=_;return P}hermiteFastResize(e,t,r,i,s){const o=this.rcpScaleX,a=this.rcpScaleY,c=Math.ceil(o/2),u=Math.ceil(a/2),h=e.imageData.data,f=e.ctx.createImageData(i,s),p=f.data;for(let y=0;y<s;y++)for(let g=0;g<i;g++){const v=4*(g+y*i);let b=0,_=0,C=0,E=0,j=0,I=0,V=0;const L=(y+.5)*a;for(let P=Math.floor(y*a);P<(y+1)*a;P++){const X=Math.abs(L-(P+.5))/u,ne=(g+.5)*o,se=X*X;for(let G=Math.floor(g*o);G<(g+1)*o;G++){let oe=Math.abs(ne-(G+.5))/c;const ge=Math.sqrt(se+oe*oe);ge>1&&ge<-1||(b=2*ge*ge*ge-3*ge*ge+1,b>0&&(oe=4*(G+P*t),V+=b*h[oe+3],C+=b,h[oe+3]<255&&(b=b*h[oe+3]/250),E+=b*h[oe],j+=b*h[oe+1],I+=b*h[oe+2],_+=b))}}p[v]=E/_,p[v+1]=j/_,p[v+2]=I/_,p[v+3]=V/C}return f}}A(Do,"type","Resize"),A(Do,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),A(Do,"uniformLocations",["uDelta","uTaps"]),fe.setClass(Do);class Po extends Rt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let i=0;i<t.length;i+=4){const s=t[i],o=t[i+1],a=t[i+2],c=Math.max(s,o,a);t[i]+=c!==s?(c-s)*r:0,t[i+1]+=c!==o?(c-o)*r:0,t[i+2]+=c!==a?(c-a)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}A(Po,"type","Saturation"),A(Po,"defaults",{saturation:0}),A(Po,"uniformLocations",["uSaturation"]),fe.setClass(Po);class Mo extends Rt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let i=0;i<t.length;i+=4){const s=t[i],o=t[i+1],a=t[i+2],c=Math.max(s,o,a),u=(s+o+a)/3,h=2*Math.abs(c-u)/255*r;t[i]+=c!==s?(c-s)*h:0,t[i+1]+=c!==o?(c-o)*h:0,t[i+2]+=c!==a?(c-a)*h:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}A(Mo,"type","Vibrance"),A(Mo,"defaults",{vibrance:0}),A(Mo,"uniformLocations",["uVibrance"]),fe.setClass(Mo);const pl=1920,ml=1080;function Cy(){const n=document.getElementById("draw-area");if(!n)return null;const e=n.parentElement,t=e.closest(".video-canvas-wrapper")||e,r=()=>{const s=t.offsetWidth,o=t.offsetHeight,a=s/pl,c=o/ml,u=Math.min(a,c),h=pl*u,f=ml*u;i.setZoom(u),i.setDimensions({width:h,height:f}),n.width=h,n.height=f},i=new zl("draw-area",{selection:!1,width:pl,height:ml});return r(),window.addEventListener("resize",r),i}function Xl(n){const e=document.getElementById("tool-toast-container");if(!e)return;let t="",r="",i="alert-success";n==="rectangle"?(t='<i class="fa-solid fa-rectangle-xmark"></i>',r="Rectangle tool selected.",i="bg-green-700 border border-green-600 text-white"):n==="polyline"?(t='<i class="fa-solid fa-bezier-curve"></i>',r="Line tool selected.",i="bg-green-700 border border-green-600 text-white"):n==="clear"?(t='<i class="fa-solid fa-broom"></i>',r="Canvas area cleaned successfully.",i="bg-red-700 border border-red-700 text-white"):n==="empty"&&(t='<i class="fa-solid fa-circle-exclamation"></i>',r="Nenhum objeto para limpar.",i="alert-warning");const s=document.createElement("div");s.className=`alert ${i} shadow-lg toast-animate-in mb-2 text-[18px] w-fit`,s.innerHTML=`<span>${t} ${r}</span>`,e.appendChild(s),setTimeout(()=>{s.classList.remove("toast-animate-in"),s.classList.add("toast-animate-out")},2500),setTimeout(()=>{s.remove()},3e3)}let ql=null;function Yl(){return ql}function Ty(){document.querySelectorAll("[data-tool]").forEach(n=>{n.addEventListener("click",e=>{if(n.classList.contains("disabled")){e.preventDefault();return}ql=n.dataset.tool,Xl(ql)})}),document.addEventListener("keydown",n=>{if(!(n.target.tagName==="INPUT"||n.target.tagName==="TEXTAREA")){if(n.key.toLowerCase()==="r"){const e=document.querySelector("[data-tool='rectangle']");e&&!e.classList.contains("disabled")&&e.click()}if(n.key.toLowerCase()==="l"){const e=document.querySelector("[data-tool='polyline']");e&&!e.classList.contains("disabled")&&e.click()}}})}function fa(n){document.querySelectorAll("details ul li").forEach(e=>{(e.querySelector("[data-tool='rectangle']")||e.querySelector("[data-tool='polyline']"))&&e.classList.toggle("button-disable",!n)}),document.querySelectorAll("[data-tool='rectangle'], [data-tool='polyline']").forEach(e=>{e.classList.toggle("disabled",!n)})}function uf(n){const e=n.getBoundingRect(!0),t=document.getElementById("x_position"),r=document.getElementById("y_position"),i=document.getElementById("width"),s=document.getElementById("height");t&&(t.value=e.left.toFixed(2)),r&&(r.value=e.top.toFixed(2)),i&&(i.value=(n.width*n.scaleX).toFixed(2)),s&&(s.value=(n.height*n.scaleY).toFixed(2))}let Or=null,vl=!1,Tr=null;function Oy(n){n.on("mouse:down",e=>{Yl()!=="rectangle"||Or||(vl=!0,Tr=n.getPointer(e.e))}),n.on("mouse:move",e=>{if(!vl||!Tr||Yl()!=="rectangle")return;const t=n.getPointer(e.e),r=Math.abs(t.x-Tr.x),i=Math.abs(t.y-Tr.y);if(!Or&&(r>5||i>5)&&(Or=new Ar({left:Tr.x,top:Tr.y,width:0,height:0,fill:"rgba(255,0,0,0.5)",stroke:"red",strokeWidth:2,selectable:!0,lockRotation:!0}),Or.setControlsVisibility({mtr:!1}),n.add(Or),fa(!1)),Or){const s=Math.min(t.x,Tr.x),o=Math.min(t.y,Tr.y),a=Math.abs(t.x-Tr.x),c=Math.abs(t.y-Tr.y);Or.set({left:s,top:o,width:a,height:c}),n.renderAll()}}),n.on("mouse:up",()=>{if(Or){Or.setCoords(),uf(Or);const e=document.getElementById("coordinate_type");e&&(e.value="rect");const t=document.getElementById("points");t&&(t.value="")}vl=!1,Tr=null})}function hf(){Or=null}let xi=[],Qr=null,Nr=null;function Ey(n){n.on("mouse:down",e=>{if(Yl()!=="polyline"||Nr)return;const t=n.getPointer(e.e);xi.push({x:t.x,y:t.y}),Qr&&n.remove(Qr),Qr=new dr(xi,{stroke:"red",strokeWidth:2,fill:"",selectable:!1,evented:!1,lockRotation:!0}),Qr.setControlsVisibility({mtr:!1}),n.add(Qr)}),document.addEventListener("keydown",e=>{if(e.key==="Enter"&&xi.length>2&&!Nr){Nr=new ds(xi,{fill:"rgba(255,0,0,0.5)",stroke:"red",strokeWidth:2,selectable:!0,lockRotation:!0}),Nr.setControlsVisibility({mtr:!1}),Qr&&n.remove(Qr),n.add(Nr),n.setActiveObject(Nr),Nr.setCoords(),uf(Nr);const t=document.getElementById("points");if(t){const i=Nr.points.map(s=>`${s.x.toFixed(2)},${s.y.toFixed(2)}`).join(" ");t.value=i}const r=document.getElementById("coordinate_type");r&&(r.value="polygon"),["width","height"].forEach(i=>{const s=document.getElementById(i);s&&(s.value="")}),xi=[],Qr=null,fa(!1)}})}function df(){Nr=null,xi=[],Qr=null}function Ay(n){function e(){const r=n.getActiveObject();r&&(n.remove(r),hf(),df(),fa(!0),["x_position","y_position","width","height","points","coordinate_type"].forEach(i=>{const s=document.getElementById(i);s&&(s.value="")}))}const t=document.querySelector('[data-tool="remove"]');t&&t.addEventListener("click",e),document.addEventListener("keydown",r=>{r.key==="Delete"&&e()})}function ky(n){function e(){const r=n.getObjects();if(r.length===0){Xl("empty");return}r.forEach(i=>n.remove(i)),hf(),df(),fa(!0),Xl("clear"),["x_position","y_position","width","height","points","coordinate_type"].forEach(i=>{const s=document.getElementById(i);s&&(s.value="")})}document.addEventListener("keydown",r=>{r.target.tagName==="INPUT"||r.target.tagName==="TEXTAREA"||r.key.toLowerCase()==="c"&&e()});const t=document.querySelector('[data-tool="clear"]');t&&t.addEventListener("click",r=>{r.preventDefault(),e()})}const cs=Cy();cs&&(Ty(),Oy(cs),Ey(cs),Ay(cs),ky(cs));function ff(n,e){return function(){return n.apply(e,arguments)}}const{toString:Dy}=Object.prototype,{getPrototypeOf:Dc}=Object,{iterator:ga,toStringTag:gf}=Symbol,pa=(n=>e=>{const t=Dy.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),jr=n=>(n=n.toLowerCase(),e=>pa(e)===n),ma=n=>e=>typeof e===n,{isArray:zi}=Array,Ri=ma("undefined");function ks(n){return n!==null&&!Ri(n)&&n.constructor!==null&&!Ri(n.constructor)&&ir(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const pf=jr("ArrayBuffer");function Py(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&pf(n.buffer),e}const My=ma("string"),ir=ma("function"),mf=ma("number"),Ds=n=>n!==null&&typeof n=="object",jy=n=>n===!0||n===!1,Ho=n=>{if(pa(n)!=="object")return!1;const e=Dc(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(gf in n)&&!(ga in n)},Ly=n=>{if(!Ds(n)||ks(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},Ry=jr("Date"),Fy=jr("File"),Iy=jr("Blob"),By=jr("FileList"),Ny=n=>Ds(n)&&ir(n.pipe),Hy=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||ir(n.append)&&((e=pa(n))==="formdata"||e==="object"&&ir(n.toString)&&n.toString()==="[object FormData]"))},Uy=jr("URLSearchParams"),[Wy,zy,Vy,Xy]=["ReadableStream","Request","Response","Headers"].map(jr),qy=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ps(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),zi(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{if(ks(n))return;const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function vf(n,e){if(ks(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const zn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,yf=n=>!Ri(n)&&n!==zn;function $l(){const{caseless:n,skipUndefined:e}=yf(this)&&this||{},t={},r=(i,s)=>{const o=n&&vf(t,s)||s;Ho(t[o])&&Ho(i)?t[o]=$l(t[o],i):Ho(i)?t[o]=$l({},i):zi(i)?t[o]=i.slice():(!e||!Ri(i))&&(t[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Ps(arguments[i],r);return t}const Yy=(n,e,t,{allOwnKeys:r}={})=>(Ps(e,(i,s)=>{t&&ir(i)?n[s]=ff(i,t):n[s]=i},{allOwnKeys:r}),n),$y=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Gy=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},Ky=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&Dc(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},Jy=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},Zy=n=>{if(!n)return null;if(zi(n))return n;let e=n.length;if(!mf(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},Qy=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Dc(Uint8Array)),eb=(n,e)=>{const r=(n&&n[ga]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},tb=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},rb=jr("HTMLFormElement"),nb=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),uh=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),ib=jr("RegExp"),bf=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Ps(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},sb=n=>{bf(n,(e,t)=>{if(ir(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(ir(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},ob=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return zi(n)?r(n):r(String(n).split(e)),t},ab=()=>{},lb=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function cb(n){return!!(n&&ir(n.append)&&n[gf]==="FormData"&&n[ga])}const ub=n=>{const e=new Array(10),t=(r,i)=>{if(Ds(r)){if(e.indexOf(r)>=0)return;if(ks(r))return r;if(!("toJSON"in r)){e[i]=r;const s=zi(r)?[]:{};return Ps(r,(o,a)=>{const c=t(o,i+1);!Ri(c)&&(s[a]=c)}),e[i]=void 0,s}}return r};return t(n,0)},hb=jr("AsyncFunction"),db=n=>n&&(Ds(n)||ir(n))&&ir(n.then)&&ir(n.catch),_f=((n,e)=>n?setImmediate:e?((t,r)=>(zn.addEventListener("message",({source:i,data:s})=>{i===zn&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),zn.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ir(zn.postMessage)),fb=typeof queueMicrotask<"u"?queueMicrotask.bind(zn):typeof process<"u"&&process.nextTick||_f,gb=n=>n!=null&&ir(n[ga]),N={isArray:zi,isArrayBuffer:pf,isBuffer:ks,isFormData:Hy,isArrayBufferView:Py,isString:My,isNumber:mf,isBoolean:jy,isObject:Ds,isPlainObject:Ho,isEmptyObject:Ly,isReadableStream:Wy,isRequest:zy,isResponse:Vy,isHeaders:Xy,isUndefined:Ri,isDate:Ry,isFile:Fy,isBlob:Iy,isRegExp:ib,isFunction:ir,isStream:Ny,isURLSearchParams:Uy,isTypedArray:Qy,isFileList:By,forEach:Ps,merge:$l,extend:Yy,trim:qy,stripBOM:$y,inherits:Gy,toFlatObject:Ky,kindOf:pa,kindOfTest:jr,endsWith:Jy,toArray:Zy,forEachEntry:eb,matchAll:tb,isHTMLForm:rb,hasOwnProperty:uh,hasOwnProp:uh,reduceDescriptors:bf,freezeMethods:sb,toObjectSet:ob,toCamelCase:nb,noop:ab,toFiniteNumber:lb,findKey:vf,global:zn,isContextDefined:yf,isSpecCompliantForm:cb,toJSONObject:ub,isAsyncFn:hb,isThenable:db,setImmediate:_f,asap:fb,isIterable:gb};function We(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}N.inherits(We,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.status}}});const wf=We.prototype,xf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{xf[n]={value:n}});Object.defineProperties(We,xf);Object.defineProperty(wf,"isAxiosError",{value:!0});We.from=(n,e,t,r,i,s)=>{const o=Object.create(wf);N.toFlatObject(n,o,function(h){return h!==Error.prototype},u=>u!=="isAxiosError");const a=n&&n.message?n.message:"Error",c=e==null&&n?n.code:e;return We.call(o,a,c,t,r,i),n&&o.cause==null&&Object.defineProperty(o,"cause",{value:n,configurable:!0}),o.name=n&&n.name||"Error",s&&Object.assign(o,s),o};const pb=null;function Gl(n){return N.isPlainObject(n)||N.isArray(n)}function Sf(n){return N.endsWith(n,"[]")?n.slice(0,-2):n}function hh(n,e,t){return n?n.concat(e).map(function(i,s){return i=Sf(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function mb(n){return N.isArray(n)&&!n.some(Gl)}const vb=N.toFlatObject(N,{},null,function(e){return/^is[A-Z]/.test(e)});function va(n,e,t){if(!N.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=N.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,b){return!N.isUndefined(b[v])});const r=t.metaTokens,i=t.visitor||h,s=t.dots,o=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(e);if(!N.isFunction(i))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(N.isDate(g))return g.toISOString();if(N.isBoolean(g))return g.toString();if(!c&&N.isBlob(g))throw new We("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(g)||N.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function h(g,v,b){let _=g;if(g&&!b&&typeof g=="object"){if(N.endsWith(v,"{}"))v=r?v:v.slice(0,-2),g=JSON.stringify(g);else if(N.isArray(g)&&mb(g)||(N.isFileList(g)||N.endsWith(v,"[]"))&&(_=N.toArray(g)))return v=Sf(v),_.forEach(function(E,j){!(N.isUndefined(E)||E===null)&&e.append(o===!0?hh([v],j,s):o===null?v:v+"[]",u(E))}),!1}return Gl(g)?!0:(e.append(hh(b,v,s),u(g)),!1)}const f=[],p=Object.assign(vb,{defaultVisitor:h,convertValue:u,isVisitable:Gl});function y(g,v){if(!N.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(g),N.forEach(g,function(_,C){(!(N.isUndefined(_)||_===null)&&i.call(e,_,N.isString(C)?C.trim():C,v,p))===!0&&y(_,v?v.concat(C):[C])}),f.pop()}}if(!N.isObject(n))throw new TypeError("data must be an object");return y(n),e}function dh(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Pc(n,e){this._pairs=[],n&&va(n,this,e)}const Cf=Pc.prototype;Cf.append=function(e,t){this._pairs.push([e,t])};Cf.toString=function(e){const t=e?function(r){return e.call(this,r,dh)}:dh;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function yb(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Tf(n,e,t){if(!e)return n;const r=t&&t.encode||yb;N.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(e,t):s=N.isURLSearchParams(e)?e.toString():new Pc(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class fh{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){N.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Of={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bb=typeof URLSearchParams<"u"?URLSearchParams:Pc,_b=typeof FormData<"u"?FormData:null,wb=typeof Blob<"u"?Blob:null,xb={isBrowser:!0,classes:{URLSearchParams:bb,FormData:_b,Blob:wb},protocols:["http","https","file","blob","url","data"]},Mc=typeof window<"u"&&typeof document<"u",Kl=typeof navigator=="object"&&navigator||void 0,Sb=Mc&&(!Kl||["ReactNative","NativeScript","NS"].indexOf(Kl.product)<0),Cb=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Tb=Mc&&window.location.href||"http://localhost",Ob=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Mc,hasStandardBrowserEnv:Sb,hasStandardBrowserWebWorkerEnv:Cb,navigator:Kl,origin:Tb},Symbol.toStringTag,{value:"Module"})),Xt={...Ob,...xb};function Eb(n,e){return va(n,new Xt.classes.URLSearchParams,{visitor:function(t,r,i,s){return Xt.isNode&&N.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function Ab(n){return N.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function kb(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function Ef(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=s>=t.length;return o=!o&&N.isArray(i)?i.length:o,c?(N.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!N.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&N.isArray(i[o])&&(i[o]=kb(i[o])),!a)}if(N.isFormData(n)&&N.isFunction(n.entries)){const t={};return N.forEachEntry(n,(r,i)=>{e(Ab(r),i,t,0)}),t}return null}function Db(n,e,t){if(N.isString(n))try{return(e||JSON.parse)(n),N.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Ms={transitional:Of,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=N.isObject(e);if(s&&N.isHTMLForm(e)&&(e=new FormData(e)),N.isFormData(e))return i?JSON.stringify(Ef(e)):e;if(N.isArrayBuffer(e)||N.isBuffer(e)||N.isStream(e)||N.isFile(e)||N.isBlob(e)||N.isReadableStream(e))return e;if(N.isArrayBufferView(e))return e.buffer;if(N.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Eb(e,this.formSerializer).toString();if((a=N.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return va(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),Db(e)):e}],transformResponse:[function(e){const t=this.transitional||Ms.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(N.isResponse(e)||N.isReadableStream(e))return e;if(e&&N.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?We.from(a,We.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xt.classes.FormData,Blob:Xt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],n=>{Ms.headers[n]={}});const Pb=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Mb=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&Pb[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},gh=Symbol("internals");function us(n){return n&&String(n).trim().toLowerCase()}function Uo(n){return n===!1||n==null?n:N.isArray(n)?n.map(Uo):String(n)}function jb(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const Lb=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function yl(n,e,t,r,i){if(N.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!N.isString(e)){if(N.isString(r))return e.indexOf(r)!==-1;if(N.isRegExp(r))return r.test(e)}}function Rb(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function Fb(n,e){const t=N.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let sr=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,c,u){const h=us(c);if(!h)throw new Error("header name must be a non-empty string");const f=N.findKey(i,h);(!f||i[f]===void 0||u===!0||u===void 0&&i[f]!==!1)&&(i[f||c]=Uo(a))}const o=(a,c)=>N.forEach(a,(u,h)=>s(u,h,c));if(N.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(N.isString(e)&&(e=e.trim())&&!Lb(e))o(Mb(e),t);else if(N.isObject(e)&&N.isIterable(e)){let a={},c,u;for(const h of e){if(!N.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[u=h[0]]=(c=a[u])?N.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(a,t)}else e!=null&&s(t,e,r);return this}get(e,t){if(e=us(e),e){const r=N.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return jb(i);if(N.isFunction(t))return t.call(this,i,r);if(N.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=us(e),e){const r=N.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||yl(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=us(o),o){const a=N.findKey(r,o);a&&(!t||yl(r,r[a],a,t))&&(delete r[a],i=!0)}}return N.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||yl(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return N.forEach(this,(i,s)=>{const o=N.findKey(r,s);if(o){t[o]=Uo(i),delete t[s];return}const a=e?Rb(s):String(s).trim();a!==s&&delete t[s],t[a]=Uo(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return N.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&N.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[gh]=this[gh]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=us(o);r[a]||(Fb(i,o),r[a]=!0)}return N.isArray(e)?e.forEach(s):s(e),this}};sr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.reduceDescriptors(sr.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});N.freezeMethods(sr);function bl(n,e){const t=this||Ms,r=e||t,i=sr.from(r.headers);let s=r.data;return N.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Af(n){return!!(n&&n.__CANCEL__)}function Vi(n,e,t){We.call(this,n??"canceled",We.ERR_CANCELED,e,t),this.name="CanceledError"}N.inherits(Vi,We,{__CANCEL__:!0});function kf(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new We("Request failed with status code "+t.status,[We.ERR_BAD_REQUEST,We.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Ib(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Bb(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),h=r[s];o||(o=u),t[i]=c,r[i]=u;let f=s,p=0;for(;f!==i;)p+=t[f++],f=f%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),u-o<e)return;const y=h&&u-h;return y?Math.round(p*1e3/y):void 0}}function Nb(n,e){let t=0,r=1e3/e,i,s;const o=(u,h=Date.now())=>{t=h,i=null,s&&(clearTimeout(s),s=null),n(...u)};return[(...u)=>{const h=Date.now(),f=h-t;f>=r?o(u,h):(i=u,s||(s=setTimeout(()=>{s=null,o(i)},r-f)))},()=>i&&o(i)]}const ea=(n,e,t=3)=>{let r=0;const i=Bb(50,250);return Nb(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,c=o-r,u=i(c),h=o<=a;r=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:u||void 0,estimated:u&&a&&h?(a-o)/u:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(f)},t)},ph=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},mh=n=>(...e)=>N.asap(()=>n(...e)),Hb=Xt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Xt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Xt.origin),Xt.navigator&&/(msie|trident)/i.test(Xt.navigator.userAgent)):()=>!0,Ub=Xt.hasStandardBrowserEnv?{write(n,e,t,r,i,s,o){if(typeof document>"u")return;const a=[`${n}=${encodeURIComponent(e)}`];N.isNumber(t)&&a.push(`expires=${new Date(t).toUTCString()}`),N.isString(r)&&a.push(`path=${r}`),N.isString(i)&&a.push(`domain=${i}`),s===!0&&a.push("secure"),N.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Wb(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function zb(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Df(n,e,t){let r=!Wb(e);return n&&(r||t==!1)?zb(n,e):e}const vh=n=>n instanceof sr?{...n}:n;function $n(n,e){e=e||{};const t={};function r(u,h,f,p){return N.isPlainObject(u)&&N.isPlainObject(h)?N.merge.call({caseless:p},u,h):N.isPlainObject(h)?N.merge({},h):N.isArray(h)?h.slice():h}function i(u,h,f,p){if(N.isUndefined(h)){if(!N.isUndefined(u))return r(void 0,u,f,p)}else return r(u,h,f,p)}function s(u,h){if(!N.isUndefined(h))return r(void 0,h)}function o(u,h){if(N.isUndefined(h)){if(!N.isUndefined(u))return r(void 0,u)}else return r(void 0,h)}function a(u,h,f){if(f in e)return r(u,h);if(f in n)return r(void 0,u)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,h,f)=>i(vh(u),vh(h),f,!0)};return N.forEach(Object.keys({...n,...e}),function(h){const f=c[h]||i,p=f(n[h],e[h],h);N.isUndefined(p)&&f!==a||(t[h]=p)}),t}const Pf=n=>{const e=$n({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=sr.from(o),e.url=Tf(Df(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),N.isFormData(t)){if(Xt.hasStandardBrowserEnv||Xt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(N.isFunction(t.getHeaders)){const c=t.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([h,f])=>{u.includes(h.toLowerCase())&&o.set(h,f)})}}if(Xt.hasStandardBrowserEnv&&(r&&N.isFunction(r)&&(r=r(e)),r||r!==!1&&Hb(e.url))){const c=i&&s&&Ub.read(s);c&&o.set(i,c)}return e},Vb=typeof XMLHttpRequest<"u",Xb=Vb&&function(n){return new Promise(function(t,r){const i=Pf(n);let s=i.data;const o=sr.from(i.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:u}=i,h,f,p,y,g;function v(){y&&y(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function _(){if(!b)return;const E=sr.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),I={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:E,config:n,request:b};kf(function(L){t(L),v()},function(L){r(L),v()},I),b=null}"onloadend"in b?b.onloadend=_:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(_)},b.onabort=function(){b&&(r(new We("Request aborted",We.ECONNABORTED,n,b)),b=null)},b.onerror=function(j){const I=j&&j.message?j.message:"Network Error",V=new We(I,We.ERR_NETWORK,n,b);V.event=j||null,r(V),b=null},b.ontimeout=function(){let j=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const I=i.transitional||Of;i.timeoutErrorMessage&&(j=i.timeoutErrorMessage),r(new We(j,I.clarifyTimeoutError?We.ETIMEDOUT:We.ECONNABORTED,n,b)),b=null},s===void 0&&o.setContentType(null),"setRequestHeader"in b&&N.forEach(o.toJSON(),function(j,I){b.setRequestHeader(I,j)}),N.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),a&&a!=="json"&&(b.responseType=i.responseType),u&&([p,g]=ea(u,!0),b.addEventListener("progress",p)),c&&b.upload&&([f,y]=ea(c),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",y)),(i.cancelToken||i.signal)&&(h=E=>{b&&(r(!E||E.type?new Vi(null,n,b):E),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const C=Ib(i.url);if(C&&Xt.protocols.indexOf(C)===-1){r(new We("Unsupported protocol "+C+":",We.ERR_BAD_REQUEST,n));return}b.send(s||null)})},qb=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(u){if(!i){i=!0,a();const h=u instanceof Error?u:this.reason;r.abort(h instanceof We?h:new Vi(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,s(new We(`timeout ${e} of ms exceeded`,We.ETIMEDOUT))},e);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),n=null)};n.forEach(u=>u.addEventListener("abort",s));const{signal:c}=r;return c.unsubscribe=()=>N.asap(a),c}},Yb=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},$b=async function*(n,e){for await(const t of Gb(n))yield*Yb(t,e)},Gb=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},yh=(n,e,t,r)=>{const i=$b(n,e);let s=0,o,a=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:h}=await i.next();if(u){a(),c.close();return}let f=h.byteLength;if(t){let p=s+=f;t(p)}c.enqueue(new Uint8Array(h))}catch(u){throw a(u),u}},cancel(c){return a(c),i.return()}},{highWaterMark:2})},bh=64*1024,{isFunction:jo}=N,Kb=(({Request:n,Response:e})=>({Request:n,Response:e}))(N.global),{ReadableStream:_h,TextEncoder:wh}=N.global,xh=(n,...e)=>{try{return!!n(...e)}catch{return!1}},Jb=n=>{n=N.merge.call({skipUndefined:!0},Kb,n);const{fetch:e,Request:t,Response:r}=n,i=e?jo(e):typeof fetch=="function",s=jo(t),o=jo(r);if(!i)return!1;const a=i&&jo(_h),c=i&&(typeof wh=="function"?(g=>v=>g.encode(v))(new wh):async g=>new Uint8Array(await new t(g).arrayBuffer())),u=s&&a&&xh(()=>{let g=!1;const v=new t(Xt.origin,{body:new _h,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!v}),h=o&&a&&xh(()=>N.isReadableStream(new r("").body)),f={stream:h&&(g=>g.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!f[g]&&(f[g]=(v,b)=>{let _=v&&v[g];if(_)return _.call(v);throw new We(`Response type '${g}' is not supported`,We.ERR_NOT_SUPPORT,b)})});const p=async g=>{if(g==null)return 0;if(N.isBlob(g))return g.size;if(N.isSpecCompliantForm(g))return(await new t(Xt.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(N.isArrayBufferView(g)||N.isArrayBuffer(g))return g.byteLength;if(N.isURLSearchParams(g)&&(g=g+""),N.isString(g))return(await c(g)).byteLength},y=async(g,v)=>{const b=N.toFiniteNumber(g.getContentLength());return b??p(v)};return async g=>{let{url:v,method:b,data:_,signal:C,cancelToken:E,timeout:j,onDownloadProgress:I,onUploadProgress:V,responseType:L,headers:P,withCredentials:X="same-origin",fetchOptions:ne}=Pf(g),se=e||fetch;L=L?(L+"").toLowerCase():"text";let G=qb([C,E&&E.toAbortSignal()],j),oe=null;const ge=G&&G.unsubscribe&&(()=>{G.unsubscribe()});let Re;try{if(V&&u&&b!=="get"&&b!=="head"&&(Re=await y(P,_))!==0){let be=new t(v,{method:"POST",body:_,duplex:"half"}),ve;if(N.isFormData(_)&&(ve=be.headers.get("content-type"))&&P.setContentType(ve),be.body){const[ke,_e]=ph(Re,ea(mh(V)));_=yh(be.body,bh,ke,_e)}}N.isString(X)||(X=X?"include":"omit");const Fe=s&&"credentials"in t.prototype,Ie={...ne,signal:G,method:b.toUpperCase(),headers:P.normalize().toJSON(),body:_,duplex:"half",credentials:Fe?X:void 0};oe=s&&new t(v,Ie);let Ce=await(s?se(oe,ne):se(v,Ie));const ct=h&&(L==="stream"||L==="response");if(h&&(I||ct&&ge)){const be={};["status","statusText","headers"].forEach(we=>{be[we]=Ce[we]});const ve=N.toFiniteNumber(Ce.headers.get("content-length")),[ke,_e]=I&&ph(ve,ea(mh(I),!0))||[];Ce=new r(yh(Ce.body,bh,ke,()=>{_e&&_e(),ge&&ge()}),be)}L=L||"text";let ut=await f[N.findKey(f,L)||"text"](Ce,g);return!ct&&ge&&ge(),await new Promise((be,ve)=>{kf(be,ve,{data:ut,headers:sr.from(Ce.headers),status:Ce.status,statusText:Ce.statusText,config:g,request:oe})})}catch(Fe){throw ge&&ge(),Fe&&Fe.name==="TypeError"&&/Load failed|fetch/i.test(Fe.message)?Object.assign(new We("Network Error",We.ERR_NETWORK,g,oe),{cause:Fe.cause||Fe}):We.from(Fe,Fe&&Fe.code,g,oe)}}},Zb=new Map,Mf=n=>{let e=n&&n.env||{};const{fetch:t,Request:r,Response:i}=e,s=[r,i,t];let o=s.length,a=o,c,u,h=Zb;for(;a--;)c=s[a],u=h.get(c),u===void 0&&h.set(c,u=a?new Map:Jb(e)),h=u;return u};Mf();const jc={http:pb,xhr:Xb,fetch:{get:Mf}};N.forEach(jc,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Sh=n=>`- ${n}`,Qb=n=>N.isFunction(n)||n===null||n===!1;function e_(n,e){n=N.isArray(n)?n:[n];const{length:t}=n;let r,i;const s={};for(let o=0;o<t;o++){r=n[o];let a;if(i=r,!Qb(r)&&(i=jc[(a=String(r)).toLowerCase()],i===void 0))throw new We(`Unknown adapter '${a}'`);if(i&&(N.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=t?o.length>1?`since :
`+o.map(Sh).join(`
`):" "+Sh(o[0]):"as no adapter specified";throw new We("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i}const jf={getAdapter:e_,adapters:jc};function _l(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Vi(null,n)}function Ch(n){return _l(n),n.headers=sr.from(n.headers),n.data=bl.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),jf.getAdapter(n.adapter||Ms.adapter,n)(n).then(function(r){return _l(n),r.data=bl.call(n,n.transformResponse,r),r.headers=sr.from(r.headers),r},function(r){return Af(r)||(_l(n),r&&r.response&&(r.response.data=bl.call(n,n.transformResponse,r.response),r.response.headers=sr.from(r.response.headers))),Promise.reject(r)})}const Lf="1.13.1",ya={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{ya[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const Th={};ya.transitional=function(e,t,r){function i(s,o){return"[Axios v"+Lf+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new We(i(o," has been removed"+(t?" in "+t:"")),We.ERR_DEPRECATED);return t&&!Th[o]&&(Th[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};ya.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function t_(n,e,t){if(typeof n!="object")throw new We("options must be an object",We.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],c=a===void 0||o(a,s,n);if(c!==!0)throw new We("option "+s+" must be "+c,We.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new We("Unknown option "+s,We.ERR_BAD_OPTION)}}const Wo={assertOptions:t_,validators:ya},Br=Wo.validators;let qn=class{constructor(e){this.defaults=e||{},this.interceptors={request:new fh,response:new fh}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=$n(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&Wo.assertOptions(r,{silentJSONParsing:Br.transitional(Br.boolean),forcedJSONParsing:Br.transitional(Br.boolean),clarifyTimeoutError:Br.transitional(Br.boolean)},!1),i!=null&&(N.isFunction(i)?t.paramsSerializer={serialize:i}:Wo.assertOptions(i,{encode:Br.function,serialize:Br.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Wo.assertOptions(t,{baseUrl:Br.spelling("baseURL"),withXsrfToken:Br.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&N.merge(s.common,s[t.method]);s&&N.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),t.headers=sr.concat(o,s);const a=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(t)===!1||(c=c&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let h,f=0,p;if(!c){const g=[Ch.bind(this),void 0];for(g.unshift(...a),g.push(...u),p=g.length,h=Promise.resolve(t);f<p;)h=h.then(g[f++],g[f++]);return h}p=a.length;let y=t;for(;f<p;){const g=a[f++],v=a[f++];try{y=g(y)}catch(b){v.call(this,b);break}}try{h=Ch.call(this,y)}catch(g){return Promise.reject(g)}for(f=0,p=u.length;f<p;)h=h.then(u[f++],u[f++]);return h}getUri(e){e=$n(this.defaults,e);const t=Df(e.baseURL,e.url,e.allowAbsoluteUrls);return Tf(t,e.params,e.paramsSerializer)}};N.forEach(["delete","get","head","options"],function(e){qn.prototype[e]=function(t,r){return this.request($n(r||{},{method:e,url:t,data:(r||{}).data}))}});N.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request($n(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}qn.prototype[e]=t(),qn.prototype[e+"Form"]=t(!0)});let r_=class Rf{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Vi(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Rf(function(i){e=i}),cancel:e}}};function n_(n){return function(t){return n.apply(null,t)}}function i_(n){return N.isObject(n)&&n.isAxiosError===!0}const Jl={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Jl).forEach(([n,e])=>{Jl[e]=n});function Ff(n){const e=new qn(n),t=ff(qn.prototype.request,e);return N.extend(t,qn.prototype,e,{allOwnKeys:!0}),N.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return Ff($n(n,i))},t}const kt=Ff(Ms);kt.Axios=qn;kt.CanceledError=Vi;kt.CancelToken=r_;kt.isCancel=Af;kt.VERSION=Lf;kt.toFormData=va;kt.AxiosError=We;kt.Cancel=kt.CanceledError;kt.all=function(e){return Promise.all(e)};kt.spread=n_;kt.isAxiosError=i_;kt.mergeConfig=$n;kt.AxiosHeaders=sr;kt.formToJSON=n=>Ef(N.isHTMLForm(n)?new FormData(n):n);kt.getAdapter=jf.getAdapter;kt.HttpStatusCode=Jl;kt.default=kt;const{Axios:Ww,AxiosError:zw,CanceledError:Vw,isCancel:Xw,CancelToken:qw,VERSION:Yw,all:$w,Cancel:Gw,isAxiosError:Kw,spread:Jw,toFormData:Zw,AxiosHeaders:Qw,HttpStatusCode:ex,formToJSON:tx,getAdapter:rx,mergeConfig:nx}=kt;var s_=Object.create,If=Object.defineProperty,o_=Object.getOwnPropertyDescriptor,Bf=Object.getOwnPropertyNames,a_=Object.getPrototypeOf,l_=Object.prototype.hasOwnProperty,Xr=(n,e)=>function(){return e||(0,n[Bf(n)[0]])((e={exports:{}}).exports,e),e.exports},c_=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Bf(e))!l_.call(n,i)&&i!==t&&If(n,i,{get:()=>e[i],enumerable:!(r=o_(e,i))||r.enumerable});return n},lt=(n,e,t)=>(t=n!=null?s_(a_(n)):{},c_(!n||!n.__esModule?If(t,"default",{value:n,enumerable:!0}):t,n)),Dt=Xr({"../alpine/packages/alpinejs/dist/module.cjs.js"(n,e){var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,o=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,c=(l,d)=>function(){return d||(0,l[s(l)[0]])((d={exports:{}}).exports,d),d.exports},u=(l,d)=>{for(var m in d)r(l,m,{get:d[m],enumerable:!0})},h=(l,d,m,x)=>{if(d&&typeof d=="object"||typeof d=="function")for(let T of s(d))!a.call(l,T)&&T!==m&&r(l,T,{get:()=>d[T],enumerable:!(x=i(d,T))||x.enumerable});return l},f=(l,d,m)=>(m=l!=null?t(o(l)):{},h(!l||!l.__esModule?r(m,"default",{value:l,enumerable:!0}):m,l)),p=l=>h(r({},"__esModule",{value:!0}),l),y=c({"node_modules/@vue/shared/dist/shared.cjs.js"(l){Object.defineProperty(l,"__esModule",{value:!0});function d(R,ie){const de=Object.create(null),Ae=R.split(",");for(let st=0;st<Ae.length;st++)de[Ae[st]]=!0;return ie?st=>!!de[st.toLowerCase()]:st=>!!de[st]}var m={1:"TEXT",2:"CLASS",4:"STYLE",8:"PROPS",16:"FULL_PROPS",32:"HYDRATE_EVENTS",64:"STABLE_FRAGMENT",128:"KEYED_FRAGMENT",256:"UNKEYED_FRAGMENT",512:"NEED_PATCH",1024:"DYNAMIC_SLOTS",2048:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},x={1:"STABLE",2:"DYNAMIC",3:"FORWARDED"},T="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",O=d(T),M=2;function H(R,ie=0,de=R.length){let Ae=R.split(/(\r?\n)/);const st=Ae.filter((Wt,Pt)=>Pt%2===1);Ae=Ae.filter((Wt,Pt)=>Pt%2===0);let yt=0;const Ut=[];for(let Wt=0;Wt<Ae.length;Wt++)if(yt+=Ae[Wt].length+(st[Wt]&&st[Wt].length||0),yt>=ie){for(let Pt=Wt-M;Pt<=Wt+M||de>yt;Pt++){if(Pt<0||Pt>=Ae.length)continue;const ss=Pt+1;Ut.push(`${ss}${" ".repeat(Math.max(3-String(ss).length,0))}|  ${Ae[Pt]}`);const gi=Ae[Pt].length,ao=st[Pt]&&st[Pt].length||0;if(Pt===Wt){const pi=ie-(yt-(gi+ao)),Qa=Math.max(1,de>yt?gi-pi:de-ie);Ut.push("   |  "+" ".repeat(pi)+"^".repeat(Qa))}else if(Pt>Wt){if(de>yt){const pi=Math.max(Math.min(de-yt,gi),1);Ut.push("   |  "+"^".repeat(pi))}yt+=gi+ao}}break}return Ut.join(`
`)}var $="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",he=d($),Ue=d($+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected"),gt=/[>/="'\u0009\u000a\u000c\u0020]/,Ke={};function dt(R){if(Ke.hasOwnProperty(R))return Ke[R];const ie=gt.test(R);return ie&&console.error(`unsafe attribute name: ${R}`),Ke[R]=!ie}var Qt={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},Rr=d("animation-iteration-count,border-image-outset,border-image-slice,border-image-width,box-flex,box-flex-group,box-ordinal-group,column-count,columns,flex,flex-grow,flex-positive,flex-shrink,flex-negative,flex-order,grid-row,grid-row-end,grid-row-span,grid-row-start,grid-column,grid-column-end,grid-column-span,grid-column-start,font-weight,line-clamp,line-height,opacity,order,orphans,tab-size,widows,z-index,zoom,fill-opacity,flood-opacity,stop-opacity,stroke-dasharray,stroke-dashoffset,stroke-miterlimit,stroke-opacity,stroke-width"),Me=d("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap");function ot(R){if(wr(R)){const ie={};for(let de=0;de<R.length;de++){const Ae=R[de],st=ot(Dn(Ae)?Ht(Ae):Ae);if(st)for(const yt in st)ie[yt]=st[yt]}return ie}else if(Ir(R))return R}var Xe=/;(?![^(]*\))/g,it=/:(.+)/;function Ht(R){const ie={};return R.split(Xe).forEach(de=>{if(de){const Ae=de.split(it);Ae.length>1&&(ie[Ae[0].trim()]=Ae[1].trim())}}),ie}function _r(R){let ie="";if(!R)return ie;for(const de in R){const Ae=R[de],st=de.startsWith("--")?de:so(de);(Dn(Ae)||typeof Ae=="number"&&Rr(st))&&(ie+=`${st}:${Ae};`)}return ie}function Fr(R){let ie="";if(Dn(R))ie=R;else if(wr(R))for(let de=0;de<R.length;de++){const Ae=Fr(R[de]);Ae&&(ie+=Ae+" ")}else if(Ir(R))for(const de in R)R[de]&&(ie+=de+" ");return ie.trim()}var ri="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",Ji="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",Zi="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",ni=d(ri),Ua=d(Ji),ii=d(Zi),Wa=/["'&<>]/;function za(R){const ie=""+R,de=Wa.exec(ie);if(!de)return ie;let Ae="",st,yt,Ut=0;for(yt=de.index;yt<ie.length;yt++){switch(ie.charCodeAt(yt)){case 34:st="&quot;";break;case 38:st="&amp;";break;case 39:st="&#39;";break;case 60:st="&lt;";break;case 62:st="&gt;";break;default:continue}Ut!==yt&&(Ae+=ie.substring(Ut,yt)),Ut=yt+1,Ae+=st}return Ut!==yt?Ae+ie.substring(Ut,yt):Ae}var qs=/^-?>|<!--|-->|--!>|<!-$/g;function Va(R){return R.replace(qs,"")}function Xa(R,ie){if(R.length!==ie.length)return!1;let de=!0;for(let Ae=0;de&&Ae<R.length;Ae++)de=si(R[Ae],ie[Ae]);return de}function si(R,ie){if(R===ie)return!0;let de=rs(R),Ae=rs(ie);if(de||Ae)return de&&Ae?R.getTime()===ie.getTime():!1;if(de=wr(R),Ae=wr(ie),de||Ae)return de&&Ae?Xa(R,ie):!1;if(de=Ir(R),Ae=Ir(ie),de||Ae){if(!de||!Ae)return!1;const st=Object.keys(R).length,yt=Object.keys(ie).length;if(st!==yt)return!1;for(const Ut in R){const Wt=R.hasOwnProperty(Ut),Pt=ie.hasOwnProperty(Ut);if(Wt&&!Pt||!Wt&&Pt||!si(R[Ut],ie[Ut]))return!1}}return String(R)===String(ie)}function Ys(R,ie){return R.findIndex(de=>si(de,ie))}var $s=R=>R==null?"":Ir(R)?JSON.stringify(R,qa,2):String(R),qa=(R,ie)=>kn(ie)?{[`Map(${ie.size})`]:[...ie.entries()].reduce((de,[Ae,st])=>(de[`${Ae} =>`]=st,de),{})}:xr(ie)?{[`Set(${ie.size})`]:[...ie.values()]}:Ir(ie)&&!wr(ie)&&!eo(ie)?String(ie):ie,Ya=["bigInt","optionalChaining","nullishCoalescingOperator"],Qi=Object.freeze({}),es=Object.freeze([]),ts=()=>{},oi=()=>!1,ai=/^on[^a-z]/,li=R=>ai.test(R),ci=R=>R.startsWith("onUpdate:"),Gs=Object.assign,Ks=(R,ie)=>{const de=R.indexOf(ie);de>-1&&R.splice(de,1)},Js=Object.prototype.hasOwnProperty,Zs=(R,ie)=>Js.call(R,ie),wr=Array.isArray,kn=R=>Pn(R)==="[object Map]",xr=R=>Pn(R)==="[object Set]",rs=R=>R instanceof Date,ns=R=>typeof R=="function",Dn=R=>typeof R=="string",$a=R=>typeof R=="symbol",Ir=R=>R!==null&&typeof R=="object",ui=R=>Ir(R)&&ns(R.then)&&ns(R.catch),Qs=Object.prototype.toString,Pn=R=>Qs.call(R),Ga=R=>Pn(R).slice(8,-1),eo=R=>Pn(R)==="[object Object]",to=R=>Dn(R)&&R!=="NaN"&&R[0]!=="-"&&""+parseInt(R,10)===R,ro=d(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Mn=R=>{const ie=Object.create(null);return de=>ie[de]||(ie[de]=R(de))},no=/-(\w)/g,io=Mn(R=>R.replace(no,(ie,de)=>de?de.toUpperCase():"")),Ka=/\B([A-Z])/g,so=Mn(R=>R.replace(Ka,"-$1").toLowerCase()),jn=Mn(R=>R.charAt(0).toUpperCase()+R.slice(1)),Ja=Mn(R=>R?`on${jn(R)}`:""),is=(R,ie)=>R!==ie&&(R===R||ie===ie),Za=(R,ie)=>{for(let de=0;de<R.length;de++)R[de](ie)},hi=(R,ie,de)=>{Object.defineProperty(R,ie,{configurable:!0,enumerable:!1,value:de})},di=R=>{const ie=parseFloat(R);return isNaN(ie)?R:ie},fi,oo=()=>fi||(fi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});l.EMPTY_ARR=es,l.EMPTY_OBJ=Qi,l.NO=oi,l.NOOP=ts,l.PatchFlagNames=m,l.babelParserDefaultPlugins=Ya,l.camelize=io,l.capitalize=jn,l.def=hi,l.escapeHtml=za,l.escapeHtmlComment=Va,l.extend=Gs,l.generateCodeFrame=H,l.getGlobalThis=oo,l.hasChanged=is,l.hasOwn=Zs,l.hyphenate=so,l.invokeArrayFns=Za,l.isArray=wr,l.isBooleanAttr=Ue,l.isDate=rs,l.isFunction=ns,l.isGloballyWhitelisted=O,l.isHTMLTag=ni,l.isIntegerKey=to,l.isKnownAttr=Me,l.isMap=kn,l.isModelListener=ci,l.isNoUnitNumericStyleProp=Rr,l.isObject=Ir,l.isOn=li,l.isPlainObject=eo,l.isPromise=ui,l.isReservedProp=ro,l.isSSRSafeAttrName=dt,l.isSVGTag=Ua,l.isSet=xr,l.isSpecialBooleanAttr=he,l.isString=Dn,l.isSymbol=$a,l.isVoidTag=ii,l.looseEqual=si,l.looseIndexOf=Ys,l.makeMap=d,l.normalizeClass=Fr,l.normalizeStyle=ot,l.objectToString=Qs,l.parseStringStyle=Ht,l.propsToAttrMap=Qt,l.remove=Ks,l.slotFlagsText=x,l.stringifyStyle=_r,l.toDisplayString=$s,l.toHandlerKey=Ja,l.toNumber=di,l.toRawType=Ga,l.toTypeString=Pn}}),g=c({"node_modules/@vue/shared/index.js"(l,d){d.exports=y()}}),v=c({"node_modules/@vue/reactivity/dist/reactivity.cjs.js"(l){Object.defineProperty(l,"__esModule",{value:!0});var d=g(),m=new WeakMap,x=[],T,O=Symbol("iterate"),M=Symbol("Map key iterate");function H(w){return w&&w._isEffect===!0}function $(w,W=d.EMPTY_OBJ){H(w)&&(w=w.raw);const Y=gt(w,W);return W.lazy||Y(),Y}function he(w){w.active&&(Ke(w),w.options.onStop&&w.options.onStop(),w.active=!1)}var Ue=0;function gt(w,W){const Y=function(){if(!Y.active)return w();if(!x.includes(Y)){Ke(Y);try{return Me(),x.push(Y),T=Y,w()}finally{x.pop(),ot(),T=x[x.length-1]}}};return Y.id=Ue++,Y.allowRecurse=!!W.allowRecurse,Y._isEffect=!0,Y.active=!0,Y.raw=w,Y.deps=[],Y.options=W,Y}function Ke(w){const{deps:W}=w;if(W.length){for(let Y=0;Y<W.length;Y++)W[Y].delete(w);W.length=0}}var dt=!0,Qt=[];function Rr(){Qt.push(dt),dt=!1}function Me(){Qt.push(dt),dt=!0}function ot(){const w=Qt.pop();dt=w===void 0?!0:w}function Xe(w,W,Y){if(!dt||T===void 0)return;let me=m.get(w);me||m.set(w,me=new Map);let le=me.get(Y);le||me.set(Y,le=new Set),le.has(T)||(le.add(T),T.deps.push(le),T.options.onTrack&&T.options.onTrack({effect:T,target:w,type:W,key:Y}))}function it(w,W,Y,me,le,De){const qe=m.get(w);if(!qe)return;const bt=new Set,zt=Ft=>{Ft&&Ft.forEach(Sr=>{(Sr!==T||Sr.allowRecurse)&&bt.add(Sr)})};if(W==="clear")qe.forEach(zt);else if(Y==="length"&&d.isArray(w))qe.forEach((Ft,Sr)=>{(Sr==="length"||Sr>=me)&&zt(Ft)});else switch(Y!==void 0&&zt(qe.get(Y)),W){case"add":d.isArray(w)?d.isIntegerKey(Y)&&zt(qe.get("length")):(zt(qe.get(O)),d.isMap(w)&&zt(qe.get(M)));break;case"delete":d.isArray(w)||(zt(qe.get(O)),d.isMap(w)&&zt(qe.get(M)));break;case"set":d.isMap(w)&&zt(qe.get(O));break}const os=Ft=>{Ft.options.onTrigger&&Ft.options.onTrigger({effect:Ft,target:w,key:Y,type:W,newValue:me,oldValue:le,oldTarget:De}),Ft.options.scheduler?Ft.options.scheduler(Ft):Ft()};bt.forEach(os)}var Ht=d.makeMap("__proto__,__v_isRef,__isVue"),_r=new Set(Object.getOwnPropertyNames(Symbol).map(w=>Symbol[w]).filter(d.isSymbol)),Fr=ii(),ri=ii(!1,!0),Ji=ii(!0),Zi=ii(!0,!0),ni=Ua();function Ua(){const w={};return["includes","indexOf","lastIndexOf"].forEach(W=>{w[W]=function(...Y){const me=R(this);for(let De=0,qe=this.length;De<qe;De++)Xe(me,"get",De+"");const le=me[W](...Y);return le===-1||le===!1?me[W](...Y.map(R)):le}}),["push","pop","shift","unshift","splice"].forEach(W=>{w[W]=function(...Y){Rr();const me=R(this)[W].apply(this,Y);return ot(),me}}),w}function ii(w=!1,W=!1){return function(me,le,De){if(le==="__v_isReactive")return!w;if(le==="__v_isReadonly")return w;if(le==="__v_raw"&&De===(w?W?io:no:W?Mn:ro).get(me))return me;const qe=d.isArray(me);if(!w&&qe&&d.hasOwn(ni,le))return Reflect.get(ni,le,De);const bt=Reflect.get(me,le,De);return(d.isSymbol(le)?_r.has(le):Ht(le))||(w||Xe(me,"get",le),W)?bt:Ae(bt)?!qe||!d.isIntegerKey(le)?bt.value:bt:d.isObject(bt)?w?is(bt):jn(bt):bt}}var Wa=qs(),za=qs(!0);function qs(w=!1){return function(Y,me,le,De){let qe=Y[me];if(!w&&(le=R(le),qe=R(qe),!d.isArray(Y)&&Ae(qe)&&!Ae(le)))return qe.value=le,!0;const bt=d.isArray(Y)&&d.isIntegerKey(me)?Number(me)<Y.length:d.hasOwn(Y,me),zt=Reflect.set(Y,me,le,De);return Y===R(De)&&(bt?d.hasChanged(le,qe)&&it(Y,"set",me,le,qe):it(Y,"add",me,le)),zt}}function Va(w,W){const Y=d.hasOwn(w,W),me=w[W],le=Reflect.deleteProperty(w,W);return le&&Y&&it(w,"delete",W,void 0,me),le}function Xa(w,W){const Y=Reflect.has(w,W);return(!d.isSymbol(W)||!_r.has(W))&&Xe(w,"has",W),Y}function si(w){return Xe(w,"iterate",d.isArray(w)?"length":O),Reflect.ownKeys(w)}var Ys={get:Fr,set:Wa,deleteProperty:Va,has:Xa,ownKeys:si},$s={get:Ji,set(w,W){return console.warn(`Set operation on key "${String(W)}" failed: target is readonly.`,w),!0},deleteProperty(w,W){return console.warn(`Delete operation on key "${String(W)}" failed: target is readonly.`,w),!0}},qa=d.extend({},Ys,{get:ri,set:za}),Ya=d.extend({},$s,{get:Zi}),Qi=w=>d.isObject(w)?jn(w):w,es=w=>d.isObject(w)?is(w):w,ts=w=>w,oi=w=>Reflect.getPrototypeOf(w);function ai(w,W,Y=!1,me=!1){w=w.__v_raw;const le=R(w),De=R(W);W!==De&&!Y&&Xe(le,"get",W),!Y&&Xe(le,"get",De);const{has:qe}=oi(le),bt=me?ts:Y?es:Qi;if(qe.call(le,W))return bt(w.get(W));if(qe.call(le,De))return bt(w.get(De));w!==le&&w.get(W)}function li(w,W=!1){const Y=this.__v_raw,me=R(Y),le=R(w);return w!==le&&!W&&Xe(me,"has",w),!W&&Xe(me,"has",le),w===le?Y.has(w):Y.has(w)||Y.has(le)}function ci(w,W=!1){return w=w.__v_raw,!W&&Xe(R(w),"iterate",O),Reflect.get(w,"size",w)}function Gs(w){w=R(w);const W=R(this);return oi(W).has.call(W,w)||(W.add(w),it(W,"add",w,w)),this}function Ks(w,W){W=R(W);const Y=R(this),{has:me,get:le}=oi(Y);let De=me.call(Y,w);De?to(Y,me,w):(w=R(w),De=me.call(Y,w));const qe=le.call(Y,w);return Y.set(w,W),De?d.hasChanged(W,qe)&&it(Y,"set",w,W,qe):it(Y,"add",w,W),this}function Js(w){const W=R(this),{has:Y,get:me}=oi(W);let le=Y.call(W,w);le?to(W,Y,w):(w=R(w),le=Y.call(W,w));const De=me?me.call(W,w):void 0,qe=W.delete(w);return le&&it(W,"delete",w,void 0,De),qe}function Zs(){const w=R(this),W=w.size!==0,Y=d.isMap(w)?new Map(w):new Set(w),me=w.clear();return W&&it(w,"clear",void 0,void 0,Y),me}function wr(w,W){return function(me,le){const De=this,qe=De.__v_raw,bt=R(qe),zt=W?ts:w?es:Qi;return!w&&Xe(bt,"iterate",O),qe.forEach((os,Ft)=>me.call(le,zt(os),zt(Ft),De))}}function kn(w,W,Y){return function(...me){const le=this.__v_raw,De=R(le),qe=d.isMap(De),bt=w==="entries"||w===Symbol.iterator&&qe,zt=w==="keys"&&qe,os=le[w](...me),Ft=Y?ts:W?es:Qi;return!W&&Xe(De,"iterate",zt?M:O),{next(){const{value:Sr,done:el}=os.next();return el?{value:Sr,done:el}:{value:bt?[Ft(Sr[0]),Ft(Sr[1])]:Ft(Sr),done:el}},[Symbol.iterator](){return this}}}}function xr(w){return function(...W){{const Y=W[0]?`on key "${W[0]}" `:"";console.warn(`${d.capitalize(w)} operation ${Y}failed: target is readonly.`,R(this))}return w==="delete"?!1:this}}function rs(){const w={get(De){return ai(this,De)},get size(){return ci(this)},has:li,add:Gs,set:Ks,delete:Js,clear:Zs,forEach:wr(!1,!1)},W={get(De){return ai(this,De,!1,!0)},get size(){return ci(this)},has:li,add:Gs,set:Ks,delete:Js,clear:Zs,forEach:wr(!1,!0)},Y={get(De){return ai(this,De,!0)},get size(){return ci(this,!0)},has(De){return li.call(this,De,!0)},add:xr("add"),set:xr("set"),delete:xr("delete"),clear:xr("clear"),forEach:wr(!0,!1)},me={get(De){return ai(this,De,!0,!0)},get size(){return ci(this,!0)},has(De){return li.call(this,De,!0)},add:xr("add"),set:xr("set"),delete:xr("delete"),clear:xr("clear"),forEach:wr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(De=>{w[De]=kn(De,!1,!1),Y[De]=kn(De,!0,!1),W[De]=kn(De,!1,!0),me[De]=kn(De,!0,!0)}),[w,Y,W,me]}var[ns,Dn,$a,Ir]=rs();function ui(w,W){const Y=W?w?Ir:$a:w?Dn:ns;return(me,le,De)=>le==="__v_isReactive"?!w:le==="__v_isReadonly"?w:le==="__v_raw"?me:Reflect.get(d.hasOwn(Y,le)&&le in me?Y:me,le,De)}var Qs={get:ui(!1,!1)},Pn={get:ui(!1,!0)},Ga={get:ui(!0,!1)},eo={get:ui(!0,!0)};function to(w,W,Y){const me=R(Y);if(me!==Y&&W.call(w,me)){const le=d.toRawType(w);console.warn(`Reactive ${le} contains both the raw and reactive versions of the same object${le==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var ro=new WeakMap,Mn=new WeakMap,no=new WeakMap,io=new WeakMap;function Ka(w){switch(w){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function so(w){return w.__v_skip||!Object.isExtensible(w)?0:Ka(d.toRawType(w))}function jn(w){return w&&w.__v_isReadonly?w:hi(w,!1,Ys,Qs,ro)}function Ja(w){return hi(w,!1,qa,Pn,Mn)}function is(w){return hi(w,!0,$s,Ga,no)}function Za(w){return hi(w,!0,Ya,eo,io)}function hi(w,W,Y,me,le){if(!d.isObject(w))return console.warn(`value cannot be made reactive: ${String(w)}`),w;if(w.__v_raw&&!(W&&w.__v_isReactive))return w;const De=le.get(w);if(De)return De;const qe=so(w);if(qe===0)return w;const bt=new Proxy(w,qe===2?me:Y);return le.set(w,bt),bt}function di(w){return fi(w)?di(w.__v_raw):!!(w&&w.__v_isReactive)}function fi(w){return!!(w&&w.__v_isReadonly)}function oo(w){return di(w)||fi(w)}function R(w){return w&&R(w.__v_raw)||w}function ie(w){return d.def(w,"__v_skip",!0),w}var de=w=>d.isObject(w)?jn(w):w;function Ae(w){return!!(w&&w.__v_isRef===!0)}function st(w){return Wt(w)}function yt(w){return Wt(w,!0)}var Ut=class{constructor(w,W=!1){this._shallow=W,this.__v_isRef=!0,this._rawValue=W?w:R(w),this._value=W?w:de(w)}get value(){return Xe(R(this),"get","value"),this._value}set value(w){w=this._shallow?w:R(w),d.hasChanged(w,this._rawValue)&&(this._rawValue=w,this._value=this._shallow?w:de(w),it(R(this),"set","value",w))}};function Wt(w,W=!1){return Ae(w)?w:new Ut(w,W)}function Pt(w){it(R(w),"set","value",w.value)}function ss(w){return Ae(w)?w.value:w}var gi={get:(w,W,Y)=>ss(Reflect.get(w,W,Y)),set:(w,W,Y,me)=>{const le=w[W];return Ae(le)&&!Ae(Y)?(le.value=Y,!0):Reflect.set(w,W,Y,me)}};function ao(w){return di(w)?w:new Proxy(w,gi)}var pi=class{constructor(w){this.__v_isRef=!0;const{get:W,set:Y}=w(()=>Xe(this,"get","value"),()=>it(this,"set","value"));this._get=W,this._set=Y}get value(){return this._get()}set value(w){this._set(w)}};function Qa(w){return new pi(w)}function yp(w){oo(w)||console.warn("toRefs() expects a reactive object but received a plain one.");const W=d.isArray(w)?new Array(w.length):{};for(const Y in w)W[Y]=wu(w,Y);return W}var bp=class{constructor(w,W){this._object=w,this._key=W,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(w){this._object[this._key]=w}};function wu(w,W){return Ae(w[W])?w[W]:new bp(w,W)}var _p=class{constructor(w,W,Y){this._setter=W,this._dirty=!0,this.__v_isRef=!0,this.effect=$(w,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,it(R(this),"set","value"))}}),this.__v_isReadonly=Y}get value(){const w=R(this);return w._dirty&&(w._value=this.effect(),w._dirty=!1),Xe(w,"get","value"),w._value}set value(w){this._setter(w)}};function wp(w){let W,Y;return d.isFunction(w)?(W=w,Y=()=>{console.warn("Write operation failed: computed value is readonly")}):(W=w.get,Y=w.set),new _p(W,Y,d.isFunction(w)||!w.set)}l.ITERATE_KEY=O,l.computed=wp,l.customRef=Qa,l.effect=$,l.enableTracking=Me,l.isProxy=oo,l.isReactive=di,l.isReadonly=fi,l.isRef=Ae,l.markRaw=ie,l.pauseTracking=Rr,l.proxyRefs=ao,l.reactive=jn,l.readonly=is,l.ref=st,l.resetTracking=ot,l.shallowReactive=Ja,l.shallowReadonly=Za,l.shallowRef=yt,l.stop=he,l.toRaw=R,l.toRef=wu,l.toRefs=yp,l.track=Xe,l.trigger=it,l.triggerRef=Pt,l.unref=ss}}),b=c({"node_modules/@vue/reactivity/index.js"(l,d){d.exports=v()}}),_={};u(_,{Alpine:()=>_u,default:()=>vp}),e.exports=p(_);var C=!1,E=!1,j=[],I=-1;function V(l){L(l)}function L(l){j.includes(l)||j.push(l),X()}function P(l){let d=j.indexOf(l);d!==-1&&d>I&&j.splice(d,1)}function X(){!E&&!C&&(C=!0,queueMicrotask(ne))}function ne(){C=!1,E=!0;for(let l=0;l<j.length;l++)j[l](),I=l;j.length=0,I=-1,E=!1}var se,G,oe,ge,Re=!0;function Fe(l){Re=!1,l(),Re=!0}function Ie(l){se=l.reactive,oe=l.release,G=d=>l.effect(d,{scheduler:m=>{Re?V(m):m()}}),ge=l.raw}function Ce(l){G=l}function ct(l){let d=()=>{};return[x=>{let T=G(x);return l._x_effects||(l._x_effects=new Set,l._x_runEffects=()=>{l._x_effects.forEach(O=>O())}),l._x_effects.add(T),d=()=>{T!==void 0&&(l._x_effects.delete(T),oe(T))},T},()=>{d()}]}function ut(l,d){let m=!0,x,T=G(()=>{let O=l();JSON.stringify(O),m?x=O:queueMicrotask(()=>{d(O,x),x=O}),m=!1});return()=>oe(T)}var be=[],ve=[],ke=[];function _e(l){ke.push(l)}function we(l,d){typeof d=="function"?(l._x_cleanups||(l._x_cleanups=[]),l._x_cleanups.push(d)):(d=l,ve.push(d))}function ee(l){be.push(l)}function Ge(l,d,m){l._x_attributeCleanups||(l._x_attributeCleanups={}),l._x_attributeCleanups[d]||(l._x_attributeCleanups[d]=[]),l._x_attributeCleanups[d].push(m)}function xt(l,d){l._x_attributeCleanups&&Object.entries(l._x_attributeCleanups).forEach(([m,x])=>{(d===void 0||d.includes(m))&&(x.forEach(T=>T()),delete l._x_attributeCleanups[m])})}function te(l){var d,m;for((d=l._x_effects)==null||d.forEach(P);(m=l._x_cleanups)!=null&&m.length;)l._x_cleanups.pop()()}var ae=new MutationObserver(xe),Be=!1;function ze(){ae.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),Be=!0}function je(){It(),ae.disconnect(),Be=!1}var pe=[];function It(){let l=ae.takeRecords();pe.push(()=>l.length>0&&xe(l));let d=pe.length;queueMicrotask(()=>{if(pe.length===d)for(;pe.length>0;)pe.shift()()})}function ce(l){if(!Be)return l();je();let d=l();return ze(),d}var z=!1,K=[];function Te(){z=!0}function Pe(){z=!1,xe(K),K=[]}function xe(l){if(z){K=K.concat(l);return}let d=[],m=new Set,x=new Map,T=new Map;for(let O=0;O<l.length;O++)if(!l[O].target._x_ignoreMutationObserver&&(l[O].type==="childList"&&(l[O].removedNodes.forEach(M=>{M.nodeType===1&&M._x_marker&&m.add(M)}),l[O].addedNodes.forEach(M=>{if(M.nodeType===1){if(m.has(M)){m.delete(M);return}M._x_marker||d.push(M)}})),l[O].type==="attributes")){let M=l[O].target,H=l[O].attributeName,$=l[O].oldValue,he=()=>{x.has(M)||x.set(M,[]),x.get(M).push({name:H,value:M.getAttribute(H)})},Ue=()=>{T.has(M)||T.set(M,[]),T.get(M).push(H)};M.hasAttribute(H)&&$===null?he():M.hasAttribute(H)?(Ue(),he()):Ue()}T.forEach((O,M)=>{xt(M,O)}),x.forEach((O,M)=>{be.forEach(H=>H(M,O))});for(let O of m)d.some(M=>M.contains(O))||ve.forEach(M=>M(O));for(let O of d)O.isConnected&&ke.forEach(M=>M(O));d=null,m=null,x=null,T=null}function Se(l){return Oe(re(l))}function Z(l,d,m){return l._x_dataStack=[d,...re(m||l)],()=>{l._x_dataStack=l._x_dataStack.filter(x=>x!==d)}}function re(l){return l._x_dataStack?l._x_dataStack:typeof ShadowRoot=="function"&&l instanceof ShadowRoot?re(l.host):l.parentNode?re(l.parentNode):[]}function Oe(l){return new Proxy({objects:l},tt)}var tt={ownKeys({objects:l}){return Array.from(new Set(l.flatMap(d=>Object.keys(d))))},has({objects:l},d){return d==Symbol.unscopables?!1:l.some(m=>Object.prototype.hasOwnProperty.call(m,d)||Reflect.has(m,d))},get({objects:l},d,m){return d=="toJSON"?Je:Reflect.get(l.find(x=>Reflect.has(x,d))||{},d,m)},set({objects:l},d,m,x){const T=l.find(M=>Object.prototype.hasOwnProperty.call(M,d))||l[l.length-1],O=Object.getOwnPropertyDescriptor(T,d);return O?.set&&O?.get?O.set.call(x,m)||!0:Reflect.set(T,d,m)}};function Je(){return Reflect.ownKeys(this).reduce((d,m)=>(d[m]=Reflect.get(this,m),d),{})}function Ze(l){let d=x=>typeof x=="object"&&!Array.isArray(x)&&x!==null,m=(x,T="")=>{Object.entries(Object.getOwnPropertyDescriptors(x)).forEach(([O,{value:M,enumerable:H}])=>{if(H===!1||M===void 0||typeof M=="object"&&M!==null&&M.__v_skip)return;let $=T===""?O:`${T}.${O}`;typeof M=="object"&&M!==null&&M._x_interceptor?x[O]=M.initialize(l,$,O):d(M)&&M!==x&&!(M instanceof Element)&&m(M,$)})};return m(l)}function St(l,d=()=>{}){let m={initialValue:void 0,_x_interceptor:!0,initialize(x,T,O){return l(this.initialValue,()=>lr(x,T),M=>yr(x,T,M),T,O)}};return d(m),x=>{if(typeof x=="object"&&x!==null&&x._x_interceptor){let T=m.initialize.bind(m);m.initialize=(O,M,H)=>{let $=x.initialize(O,M,H);return m.initialValue=$,T(O,M,H)}}else m.initialValue=x;return m}}function lr(l,d){return d.split(".").reduce((m,x)=>m[x],l)}function yr(l,d,m){if(typeof d=="string"&&(d=d.split(".")),d.length===1)l[d[0]]=m;else{if(d.length===0)throw error;return l[d[0]]||(l[d[0]]={}),yr(l[d[0]],d.slice(1),m)}}var On={};function Yt(l,d){On[l]=d}function qr(l,d){let m=En(d);return Object.entries(On).forEach(([x,T])=>{Object.defineProperty(l,`$${x}`,{get(){return T(d,m)},enumerable:!1})}),l}function En(l){let[d,m]=ye(l),x={interceptor:St,...d};return we(l,m),x}function Ls(l,d,m,...x){try{return m(...x)}catch(T){mn(T,l,d)}}function mn(l,d,m=void 0){l=Object.assign(l??{message:"No error message given."},{el:d,expression:m}),console.warn(`Alpine Expression Error: ${l.message}

${m?'Expression: "'+m+`"

`:""}`,d),setTimeout(()=>{throw l},0)}var Kn=!0;function Rs(l){let d=Kn;Kn=!1;let m=l();return Kn=d,m}function Yr(l,d,m={}){let x;return Bt(l,d)(T=>x=T,m),x}function Bt(...l){return Xi(...l)}var Xi=Is;function Fs(l){Xi=l}function Is(l,d){let m={};qr(m,l);let x=[m,...re(l)],T=typeof d=="function"?Sa(x,d):Ta(x,d,l);return Ls.bind(null,l,d,T)}function Sa(l,d){return(m=()=>{},{scope:x={},params:T=[]}={})=>{let O=d.apply(Oe([x,...l]),T);Jn(m,O)}}var qi={};function Ca(l,d){if(qi[l])return qi[l];let m=Object.getPrototypeOf(async function(){}).constructor,x=/^[\n\s]*if.*\(.*\)/.test(l.trim())||/^(let|const)\s/.test(l.trim())?`(async()=>{ ${l} })()`:l,O=(()=>{try{let M=new m(["__self","scope"],`with (scope) { __self.result = ${x} }; __self.finished = true; return __self.result;`);return Object.defineProperty(M,"name",{value:`[Alpine] ${l}`}),M}catch(M){return mn(M,d,l),Promise.resolve()}})();return qi[l]=O,O}function Ta(l,d,m){let x=Ca(d,m);return(T=()=>{},{scope:O={},params:M=[]}={})=>{x.result=void 0,x.finished=!1;let H=Oe([O,...l]);if(typeof x=="function"){let $=x(x,H).catch(he=>mn(he,m,d));x.finished?(Jn(T,x.result,H,M,m),x.result=void 0):$.then(he=>{Jn(T,he,H,M,m)}).catch(he=>mn(he,m,d)).finally(()=>x.result=void 0)}}}function Jn(l,d,m,x,T){if(Kn&&typeof d=="function"){let O=d.apply(m,x);O instanceof Promise?O.then(M=>Jn(l,M,m,x)).catch(M=>mn(M,T,d)):l(O)}else typeof d=="object"&&d instanceof Promise?d.then(O=>l(O)):l(d)}var Zn="x-";function $r(l=""){return Zn+l}function Bs(l){Zn=l}var Qn={};function S(l,d){return Qn[l]=d,{before(m){if(!Qn[m]){console.warn(String.raw`Cannot find directive \`${m}\`. \`${l}\` will use the default order of execution`);return}const x=ft.indexOf(m);ft.splice(x>=0?x:ft.indexOf("DEFAULT"),0,l)}}}function k(l){return Object.keys(Qn).includes(l)}function B(l,d,m){if(d=Array.from(d),l._x_virtualDirectives){let O=Object.entries(l._x_virtualDirectives).map(([H,$])=>({name:H,value:$})),M=U(O);O=O.map(H=>M.find($=>$.name===H.name)?{name:`x-bind:${H.name}`,value:`"${H.value}"`}:H),d=d.concat(O)}let x={};return d.map(Qe((O,M)=>x[O]=M)).filter($e).map(et(x,m)).sort(Zt).map(O=>Ee(l,O))}function U(l){return Array.from(l).map(Qe()).filter(d=>!$e(d))}var q=!1,J=new Map,Q=Symbol();function ue(l){q=!0;let d=Symbol();Q=d,J.set(d,[]);let m=()=>{for(;J.get(d).length;)J.get(d).shift()();J.delete(d)},x=()=>{q=!1,m()};l(m),x()}function ye(l){let d=[],m=H=>d.push(H),[x,T]=ct(l);return d.push(T),[{Alpine:Ki,effect:x,cleanup:m,evaluateLater:Bt.bind(Bt,l),evaluate:Yr.bind(Yr,l)},()=>d.forEach(H=>H())]}function Ee(l,d){let m=()=>{},x=Qn[d.type]||m,[T,O]=ye(l);Ge(l,d.original,O);let M=()=>{l._x_ignore||l._x_ignoreSelf||(x.inline&&x.inline(l,d,T),x=x.bind(x,l,d,T),q?J.get(Q).push(x):x())};return M.runCleanups=O,M}var Ve=(l,d)=>({name:m,value:x})=>(m.startsWith(l)&&(m=m.replace(l,d)),{name:m,value:x}),Ne=l=>l;function Qe(l=()=>{}){return({name:d,value:m})=>{let{name:x,value:T}=Le.reduce((O,M)=>M(O),{name:d,value:m});return x!==d&&l(x,d),{name:x,value:T}}}var Le=[];function He(l){Le.push(l)}function $e({name:l}){return mt().test(l)}var mt=()=>new RegExp(`^${Zn}([^:^.]+)\\b`);function et(l,d){return({name:m,value:x})=>{let T=m.match(mt()),O=m.match(/:([a-zA-Z0-9\-_:]+)/),M=m.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],H=d||l[m]||m;return{type:T?T[1]:null,value:O?O[1]:null,modifiers:M.map($=>$.replace(".","")),expression:x,original:H}}}var vt="DEFAULT",ft=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",vt,"teleport"];function Zt(l,d){let m=ft.indexOf(l.type)===-1?vt:l.type,x=ft.indexOf(d.type)===-1?vt:d.type;return ft.indexOf(m)-ft.indexOf(x)}function Ct(l,d,m={}){l.dispatchEvent(new CustomEvent(d,{detail:m,bubbles:!0,composed:!0,cancelable:!0}))}function $t(l,d){if(typeof ShadowRoot=="function"&&l instanceof ShadowRoot){Array.from(l.children).forEach(T=>$t(T,d));return}let m=!1;if(d(l,()=>m=!0),m)return;let x=l.firstElementChild;for(;x;)$t(x,d),x=x.nextElementSibling}function Nt(l,...d){console.warn(`Alpine Warning: ${l}`,...d)}var vn=!1;function Ns(){vn&&Nt("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),vn=!0,document.body||Nt("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),Ct(document,"alpine:init"),Ct(document,"alpine:initializing"),ze(),_e(d=>Kr(d,$t)),we(d=>ti(d)),ee((d,m)=>{B(d,m).forEach(x=>x())});let l=d=>!br(d.parentElement,!0);Array.from(document.querySelectorAll($i().join(","))).filter(l).forEach(d=>{Kr(d)}),Ct(document,"alpine:initialized"),setTimeout(()=>{wg()})}var ei=[],Yi=[];function Lr(){return ei.map(l=>l())}function $i(){return ei.concat(Yi).map(l=>l())}function yn(l){ei.push(l)}function Gr(l){Yi.push(l)}function br(l,d=!1){return cr(l,m=>{if((d?$i():Lr()).some(T=>m.matches(T)))return!0})}function cr(l,d){if(l){if(d(l))return l;if(l._x_teleportBack&&(l=l._x_teleportBack),!!l.parentElement)return cr(l.parentElement,d)}}function Oa(l){return Lr().some(d=>l.matches(d))}var Xc=[];function bg(l){Xc.push(l)}var _g=1;function Kr(l,d=$t,m=()=>{}){cr(l,x=>x._x_ignore)||ue(()=>{d(l,(x,T)=>{x._x_marker||(m(x,T),Xc.forEach(O=>O(x,T)),B(x,x.attributes).forEach(O=>O()),x._x_ignore||(x._x_marker=_g++),x._x_ignore&&T())})})}function ti(l,d=$t){d(l,m=>{te(m),xt(m),delete m._x_marker})}function wg(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([d,m,x])=>{k(m)||x.some(T=>{if(document.querySelector(T))return Nt(`found "${T}", but missing ${d} plugin`),!0})})}var Ea=[],Aa=!1;function ka(l=()=>{}){return queueMicrotask(()=>{Aa||setTimeout(()=>{Da()})}),new Promise(d=>{Ea.push(()=>{l(),d()})})}function Da(){for(Aa=!1;Ea.length;)Ea.shift()()}function xg(){Aa=!0}function Pa(l,d){return Array.isArray(d)?qc(l,d.join(" ")):typeof d=="object"&&d!==null?Sg(l,d):typeof d=="function"?Pa(l,d()):qc(l,d)}function qc(l,d){let m=T=>T.split(" ").filter(O=>!l.classList.contains(O)).filter(Boolean),x=T=>(l.classList.add(...T),()=>{l.classList.remove(...T)});return d=d===!0?d="":d||"",x(m(d))}function Sg(l,d){let m=H=>H.split(" ").filter(Boolean),x=Object.entries(d).flatMap(([H,$])=>$?m(H):!1).filter(Boolean),T=Object.entries(d).flatMap(([H,$])=>$?!1:m(H)).filter(Boolean),O=[],M=[];return T.forEach(H=>{l.classList.contains(H)&&(l.classList.remove(H),M.push(H))}),x.forEach(H=>{l.classList.contains(H)||(l.classList.add(H),O.push(H))}),()=>{M.forEach(H=>l.classList.add(H)),O.forEach(H=>l.classList.remove(H))}}function Hs(l,d){return typeof d=="object"&&d!==null?Cg(l,d):Tg(l,d)}function Cg(l,d){let m={};return Object.entries(d).forEach(([x,T])=>{m[x]=l.style[x],x.startsWith("--")||(x=Og(x)),l.style.setProperty(x,T)}),setTimeout(()=>{l.style.length===0&&l.removeAttribute("style")}),()=>{Hs(l,m)}}function Tg(l,d){let m=l.getAttribute("style",d);return l.setAttribute("style",d),()=>{l.setAttribute("style",m||"")}}function Og(l){return l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ma(l,d=()=>{}){let m=!1;return function(){m?d.apply(this,arguments):(m=!0,l.apply(this,arguments))}}S("transition",(l,{value:d,modifiers:m,expression:x},{evaluate:T})=>{typeof x=="function"&&(x=T(x)),x!==!1&&(!x||typeof x=="boolean"?Ag(l,m,d):Eg(l,x,d))});function Eg(l,d,m){Yc(l,Pa,""),{enter:T=>{l._x_transition.enter.during=T},"enter-start":T=>{l._x_transition.enter.start=T},"enter-end":T=>{l._x_transition.enter.end=T},leave:T=>{l._x_transition.leave.during=T},"leave-start":T=>{l._x_transition.leave.start=T},"leave-end":T=>{l._x_transition.leave.end=T}}[m](d)}function Ag(l,d,m){Yc(l,Hs);let x=!d.includes("in")&&!d.includes("out")&&!m,T=x||d.includes("in")||["enter"].includes(m),O=x||d.includes("out")||["leave"].includes(m);d.includes("in")&&!x&&(d=d.filter((ot,Xe)=>Xe<d.indexOf("out"))),d.includes("out")&&!x&&(d=d.filter((ot,Xe)=>Xe>d.indexOf("out")));let M=!d.includes("opacity")&&!d.includes("scale"),H=M||d.includes("opacity"),$=M||d.includes("scale"),he=H?0:1,Ue=$?Gi(d,"scale",95)/100:1,gt=Gi(d,"delay",0)/1e3,Ke=Gi(d,"origin","center"),dt="opacity, transform",Qt=Gi(d,"duration",150)/1e3,Rr=Gi(d,"duration",75)/1e3,Me="cubic-bezier(0.4, 0.0, 0.2, 1)";T&&(l._x_transition.enter.during={transformOrigin:Ke,transitionDelay:`${gt}s`,transitionProperty:dt,transitionDuration:`${Qt}s`,transitionTimingFunction:Me},l._x_transition.enter.start={opacity:he,transform:`scale(${Ue})`},l._x_transition.enter.end={opacity:1,transform:"scale(1)"}),O&&(l._x_transition.leave.during={transformOrigin:Ke,transitionDelay:`${gt}s`,transitionProperty:dt,transitionDuration:`${Rr}s`,transitionTimingFunction:Me},l._x_transition.leave.start={opacity:1,transform:"scale(1)"},l._x_transition.leave.end={opacity:he,transform:`scale(${Ue})`})}function Yc(l,d,m={}){l._x_transition||(l._x_transition={enter:{during:m,start:m,end:m},leave:{during:m,start:m,end:m},in(x=()=>{},T=()=>{}){ja(l,d,{during:this.enter.during,start:this.enter.start,end:this.enter.end},x,T)},out(x=()=>{},T=()=>{}){ja(l,d,{during:this.leave.during,start:this.leave.start,end:this.leave.end},x,T)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(l,d,m,x){const T=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let O=()=>T(m);if(d){l._x_transition&&(l._x_transition.enter||l._x_transition.leave)?l._x_transition.enter&&(Object.entries(l._x_transition.enter.during).length||Object.entries(l._x_transition.enter.start).length||Object.entries(l._x_transition.enter.end).length)?l._x_transition.in(m):O():l._x_transition?l._x_transition.in(m):O();return}l._x_hidePromise=l._x_transition?new Promise((M,H)=>{l._x_transition.out(()=>{},()=>M(x)),l._x_transitioning&&l._x_transitioning.beforeCancel(()=>H({isFromCancelledTransition:!0}))}):Promise.resolve(x),queueMicrotask(()=>{let M=$c(l);M?(M._x_hideChildren||(M._x_hideChildren=[]),M._x_hideChildren.push(l)):T(()=>{let H=$=>{let he=Promise.all([$._x_hidePromise,...($._x_hideChildren||[]).map(H)]).then(([Ue])=>Ue?.());return delete $._x_hidePromise,delete $._x_hideChildren,he};H(l).catch($=>{if(!$.isFromCancelledTransition)throw $})})})};function $c(l){let d=l.parentNode;if(d)return d._x_hidePromise?d:$c(d)}function ja(l,d,{during:m,start:x,end:T}={},O=()=>{},M=()=>{}){if(l._x_transitioning&&l._x_transitioning.cancel(),Object.keys(m).length===0&&Object.keys(x).length===0&&Object.keys(T).length===0){O(),M();return}let H,$,he;kg(l,{start(){H=d(l,x)},during(){$=d(l,m)},before:O,end(){H(),he=d(l,T)},after:M,cleanup(){$(),he()}})}function kg(l,d){let m,x,T,O=Ma(()=>{ce(()=>{m=!0,x||d.before(),T||(d.end(),Da()),d.after(),l.isConnected&&d.cleanup(),delete l._x_transitioning})});l._x_transitioning={beforeCancels:[],beforeCancel(M){this.beforeCancels.push(M)},cancel:Ma(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();O()}),finish:O},ce(()=>{d.start(),d.during()}),xg(),requestAnimationFrame(()=>{if(m)return;let M=Number(getComputedStyle(l).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,H=Number(getComputedStyle(l).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;M===0&&(M=Number(getComputedStyle(l).animationDuration.replace("s",""))*1e3),ce(()=>{d.before()}),x=!0,requestAnimationFrame(()=>{m||(ce(()=>{d.end()}),Da(),setTimeout(l._x_transitioning.finish,M+H),T=!0)})})}function Gi(l,d,m){if(l.indexOf(d)===-1)return m;const x=l[l.indexOf(d)+1];if(!x||d==="scale"&&isNaN(x))return m;if(d==="duration"||d==="delay"){let T=x.match(/([0-9]+)ms/);if(T)return T[1]}return d==="origin"&&["top","right","left","center","bottom"].includes(l[l.indexOf(d)+2])?[x,l[l.indexOf(d)+2]].join(" "):x}var bn=!1;function _n(l,d=()=>{}){return(...m)=>bn?d(...m):l(...m)}function Dg(l){return(...d)=>bn&&l(...d)}var Gc=[];function Us(l){Gc.push(l)}function Pg(l,d){Gc.forEach(m=>m(l,d)),bn=!0,Kc(()=>{Kr(d,(m,x)=>{x(m,()=>{})})}),bn=!1}var La=!1;function Mg(l,d){d._x_dataStack||(d._x_dataStack=l._x_dataStack),bn=!0,La=!0,Kc(()=>{jg(d)}),bn=!1,La=!1}function jg(l){let d=!1;Kr(l,(x,T)=>{$t(x,(O,M)=>{if(d&&Oa(O))return M();d=!0,T(O,M)})})}function Kc(l){let d=G;Ce((m,x)=>{let T=d(m);return oe(T),()=>{}}),l(),Ce(d)}function Jc(l,d,m,x=[]){switch(l._x_bindings||(l._x_bindings=se({})),l._x_bindings[d]=m,d=x.includes("camel")?Ug(d):d,d){case"value":Lg(l,m);break;case"style":Fg(l,m);break;case"class":Rg(l,m);break;case"selected":case"checked":Ig(l,d,m);break;default:Zc(l,d,m);break}}function Lg(l,d){if(ru(l))l.attributes.value===void 0&&(l.value=d),window.fromModel&&(typeof d=="boolean"?l.checked=Ws(l.value)===d:l.checked=Qc(l.value,d));else if(Ra(l))Number.isInteger(d)?l.value=d:!Array.isArray(d)&&typeof d!="boolean"&&![null,void 0].includes(d)?l.value=String(d):Array.isArray(d)?l.checked=d.some(m=>Qc(m,l.value)):l.checked=!!d;else if(l.tagName==="SELECT")Hg(l,d);else{if(l.value===d)return;l.value=d===void 0?"":d}}function Rg(l,d){l._x_undoAddedClasses&&l._x_undoAddedClasses(),l._x_undoAddedClasses=Pa(l,d)}function Fg(l,d){l._x_undoAddedStyles&&l._x_undoAddedStyles(),l._x_undoAddedStyles=Hs(l,d)}function Ig(l,d,m){Zc(l,d,m),Ng(l,d,m)}function Zc(l,d,m){[null,void 0,!1].includes(m)&&zg(d)?l.removeAttribute(d):(eu(d)&&(m=d),Bg(l,d,m))}function Bg(l,d,m){l.getAttribute(d)!=m&&l.setAttribute(d,m)}function Ng(l,d,m){l[d]!==m&&(l[d]=m)}function Hg(l,d){const m=[].concat(d).map(x=>x+"");Array.from(l.options).forEach(x=>{x.selected=m.includes(x.value)})}function Ug(l){return l.toLowerCase().replace(/-(\w)/g,(d,m)=>m.toUpperCase())}function Qc(l,d){return l==d}function Ws(l){return[1,"1","true","on","yes",!0].includes(l)?!0:[0,"0","false","off","no",!1].includes(l)?!1:l?!!l:null}var Wg=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function eu(l){return Wg.has(l)}function zg(l){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(l)}function Vg(l,d,m){return l._x_bindings&&l._x_bindings[d]!==void 0?l._x_bindings[d]:tu(l,d,m)}function Xg(l,d,m,x=!0){if(l._x_bindings&&l._x_bindings[d]!==void 0)return l._x_bindings[d];if(l._x_inlineBindings&&l._x_inlineBindings[d]!==void 0){let T=l._x_inlineBindings[d];return T.extract=x,Rs(()=>Yr(l,T.expression))}return tu(l,d,m)}function tu(l,d,m){let x=l.getAttribute(d);return x===null?typeof m=="function"?m():m:x===""?!0:eu(d)?!![d,"true"].includes(x):x}function Ra(l){return l.type==="checkbox"||l.localName==="ui-checkbox"||l.localName==="ui-switch"}function ru(l){return l.type==="radio"||l.localName==="ui-radio"}function nu(l,d){var m;return function(){var x=this,T=arguments,O=function(){m=null,l.apply(x,T)};clearTimeout(m),m=setTimeout(O,d)}}function iu(l,d){let m;return function(){let x=this,T=arguments;m||(l.apply(x,T),m=!0,setTimeout(()=>m=!1,d))}}function su({get:l,set:d},{get:m,set:x}){let T=!0,O,M=G(()=>{let H=l(),$=m();if(T)x(Fa(H)),T=!1;else{let he=JSON.stringify(H),Ue=JSON.stringify($);he!==O?x(Fa(H)):he!==Ue&&d(Fa($))}O=JSON.stringify(l()),JSON.stringify(m())});return()=>{oe(M)}}function Fa(l){return typeof l=="object"?JSON.parse(JSON.stringify(l)):l}function qg(l){(Array.isArray(l)?l:[l]).forEach(m=>m(Ki))}var An={},ou=!1;function Yg(l,d){if(ou||(An=se(An),ou=!0),d===void 0)return An[l];An[l]=d,Ze(An[l]),typeof d=="object"&&d!==null&&d.hasOwnProperty("init")&&typeof d.init=="function"&&An[l].init()}function $g(){return An}var au={};function Gg(l,d){let m=typeof d!="function"?()=>d:d;return l instanceof Element?lu(l,m()):(au[l]=m,()=>{})}function Kg(l){return Object.entries(au).forEach(([d,m])=>{Object.defineProperty(l,d,{get(){return(...x)=>m(...x)}})}),l}function lu(l,d,m){let x=[];for(;x.length;)x.pop()();let T=Object.entries(d).map(([M,H])=>({name:M,value:H})),O=U(T);return T=T.map(M=>O.find(H=>H.name===M.name)?{name:`x-bind:${M.name}`,value:`"${M.value}"`}:M),B(l,T,m).map(M=>{x.push(M.runCleanups),M()}),()=>{for(;x.length;)x.pop()()}}var cu={};function Jg(l,d){cu[l]=d}function Zg(l,d){return Object.entries(cu).forEach(([m,x])=>{Object.defineProperty(l,m,{get(){return(...T)=>x.bind(d)(...T)},enumerable:!1})}),l}var Qg={get reactive(){return se},get release(){return oe},get effect(){return G},get raw(){return ge},version:"3.14.9",flushAndStopDeferringMutations:Pe,dontAutoEvaluateFunctions:Rs,disableEffectScheduling:Fe,startObservingMutations:ze,stopObservingMutations:je,setReactivityEngine:Ie,onAttributeRemoved:Ge,onAttributesAdded:ee,closestDataStack:re,skipDuringClone:_n,onlyDuringClone:Dg,addRootSelector:yn,addInitSelector:Gr,interceptClone:Us,addScopeToNode:Z,deferMutations:Te,mapAttributes:He,evaluateLater:Bt,interceptInit:bg,setEvaluator:Fs,mergeProxies:Oe,extractProp:Xg,findClosest:cr,onElRemoved:we,closestRoot:br,destroyTree:ti,interceptor:St,transition:ja,setStyles:Hs,mutateDom:ce,directive:S,entangle:su,throttle:iu,debounce:nu,evaluate:Yr,initTree:Kr,nextTick:ka,prefixed:$r,prefix:Bs,plugin:qg,magic:Yt,store:Yg,start:Ns,clone:Mg,cloneNode:Pg,bound:Vg,$data:Se,watch:ut,walk:$t,data:Jg,bind:Gg},Ki=Qg,zs=f(b());Yt("nextTick",()=>ka),Yt("dispatch",l=>Ct.bind(Ct,l)),Yt("watch",(l,{evaluateLater:d,cleanup:m})=>(x,T)=>{let O=d(x),H=ut(()=>{let $;return O(he=>$=he),$},T);m(H)}),Yt("store",$g),Yt("data",l=>Se(l)),Yt("root",l=>br(l)),Yt("refs",l=>(l._x_refs_proxy||(l._x_refs_proxy=Oe(ep(l))),l._x_refs_proxy));function ep(l){let d=[];return cr(l,m=>{m._x_refs&&d.push(m._x_refs)}),d}var Ia={};function uu(l){return Ia[l]||(Ia[l]=0),++Ia[l]}function tp(l,d){return cr(l,m=>{if(m._x_ids&&m._x_ids[d])return!0})}function rp(l,d){l._x_ids||(l._x_ids={}),l._x_ids[d]||(l._x_ids[d]=uu(d))}Yt("id",(l,{cleanup:d})=>(m,x=null)=>{let T=`${m}${x?`-${x}`:""}`;return np(l,T,d,()=>{let O=tp(l,m),M=O?O._x_ids[m]:uu(m);return x?`${m}-${M}-${x}`:`${m}-${M}`})}),Us((l,d)=>{l._x_id&&(d._x_id=l._x_id)});function np(l,d,m,x){if(l._x_id||(l._x_id={}),l._x_id[d])return l._x_id[d];let T=x();return l._x_id[d]=T,m(()=>{delete l._x_id[d]}),T}Yt("el",l=>l),hu("Focus","focus","focus"),hu("Persist","persist","persist");function hu(l,d,m){Yt(d,x=>Nt(`You can't use [$${d}] without first installing the "${l}" plugin here: https://alpinejs.dev/plugins/${m}`,x))}S("modelable",(l,{expression:d},{effect:m,evaluateLater:x,cleanup:T})=>{let O=x(d),M=()=>{let Ue;return O(gt=>Ue=gt),Ue},H=x(`${d} = __placeholder`),$=Ue=>H(()=>{},{scope:{__placeholder:Ue}}),he=M();$(he),queueMicrotask(()=>{if(!l._x_model)return;l._x_removeModelListeners.default();let Ue=l._x_model.get,gt=l._x_model.set,Ke=su({get(){return Ue()},set(dt){gt(dt)}},{get(){return M()},set(dt){$(dt)}});T(Ke)})}),S("teleport",(l,{modifiers:d,expression:m},{cleanup:x})=>{l.tagName.toLowerCase()!=="template"&&Nt("x-teleport can only be used on a <template> tag",l);let T=du(m),O=l.content.cloneNode(!0).firstElementChild;l._x_teleport=O,O._x_teleportBack=l,l.setAttribute("data-teleport-template",!0),O.setAttribute("data-teleport-target",!0),l._x_forwardEvents&&l._x_forwardEvents.forEach(H=>{O.addEventListener(H,$=>{$.stopPropagation(),l.dispatchEvent(new $.constructor($.type,$))})}),Z(O,{},l);let M=(H,$,he)=>{he.includes("prepend")?$.parentNode.insertBefore(H,$):he.includes("append")?$.parentNode.insertBefore(H,$.nextSibling):$.appendChild(H)};ce(()=>{M(O,T,d),_n(()=>{Kr(O)})()}),l._x_teleportPutBack=()=>{let H=du(m);ce(()=>{M(l._x_teleport,H,d)})},x(()=>ce(()=>{O.remove(),ti(O)}))});var ip=document.createElement("div");function du(l){let d=_n(()=>document.querySelector(l),()=>ip)();return d||Nt(`Cannot find x-teleport element for selector: "${l}"`),d}var fu=()=>{};fu.inline=(l,{modifiers:d},{cleanup:m})=>{d.includes("self")?l._x_ignoreSelf=!0:l._x_ignore=!0,m(()=>{d.includes("self")?delete l._x_ignoreSelf:delete l._x_ignore})},S("ignore",fu),S("effect",_n((l,{expression:d},{effect:m})=>{m(Bt(l,d))}));function Ba(l,d,m,x){let T=l,O=$=>x($),M={},H=($,he)=>Ue=>he($,Ue);if(m.includes("dot")&&(d=sp(d)),m.includes("camel")&&(d=op(d)),m.includes("passive")&&(M.passive=!0),m.includes("capture")&&(M.capture=!0),m.includes("window")&&(T=window),m.includes("document")&&(T=document),m.includes("debounce")){let $=m[m.indexOf("debounce")+1]||"invalid-wait",he=Vs($.split("ms")[0])?Number($.split("ms")[0]):250;O=nu(O,he)}if(m.includes("throttle")){let $=m[m.indexOf("throttle")+1]||"invalid-wait",he=Vs($.split("ms")[0])?Number($.split("ms")[0]):250;O=iu(O,he)}return m.includes("prevent")&&(O=H(O,($,he)=>{he.preventDefault(),$(he)})),m.includes("stop")&&(O=H(O,($,he)=>{he.stopPropagation(),$(he)})),m.includes("once")&&(O=H(O,($,he)=>{$(he),T.removeEventListener(d,O,M)})),(m.includes("away")||m.includes("outside"))&&(T=document,O=H(O,($,he)=>{l.contains(he.target)||he.target.isConnected!==!1&&(l.offsetWidth<1&&l.offsetHeight<1||l._x_isShown!==!1&&$(he))})),m.includes("self")&&(O=H(O,($,he)=>{he.target===l&&$(he)})),(lp(d)||gu(d))&&(O=H(O,($,he)=>{cp(he,m)||$(he)})),T.addEventListener(d,O,M),()=>{T.removeEventListener(d,O,M)}}function sp(l){return l.replace(/-/g,".")}function op(l){return l.toLowerCase().replace(/-(\w)/g,(d,m)=>m.toUpperCase())}function Vs(l){return!Array.isArray(l)&&!isNaN(l)}function ap(l){return[" ","_"].includes(l)?l:l.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function lp(l){return["keydown","keyup"].includes(l)}function gu(l){return["contextmenu","click","mouse"].some(d=>l.includes(d))}function cp(l,d){let m=d.filter(O=>!["window","document","prevent","stop","once","capture","self","away","outside","passive"].includes(O));if(m.includes("debounce")){let O=m.indexOf("debounce");m.splice(O,Vs((m[O+1]||"invalid-wait").split("ms")[0])?2:1)}if(m.includes("throttle")){let O=m.indexOf("throttle");m.splice(O,Vs((m[O+1]||"invalid-wait").split("ms")[0])?2:1)}if(m.length===0||m.length===1&&pu(l.key).includes(m[0]))return!1;const T=["ctrl","shift","alt","meta","cmd","super"].filter(O=>m.includes(O));return m=m.filter(O=>!T.includes(O)),!(T.length>0&&T.filter(M=>((M==="cmd"||M==="super")&&(M="meta"),l[`${M}Key`])).length===T.length&&(gu(l.type)||pu(l.key).includes(m[0])))}function pu(l){if(!l)return[];l=ap(l);let d={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return d[l]=l,Object.keys(d).map(m=>{if(d[m]===l)return m}).filter(m=>m)}S("model",(l,{modifiers:d,expression:m},{effect:x,cleanup:T})=>{let O=l;d.includes("parent")&&(O=l.parentNode);let M=Bt(O,m),H;typeof m=="string"?H=Bt(O,`${m} = __placeholder`):typeof m=="function"&&typeof m()=="string"?H=Bt(O,`${m()} = __placeholder`):H=()=>{};let $=()=>{let Ke;return M(dt=>Ke=dt),mu(Ke)?Ke.get():Ke},he=Ke=>{let dt;M(Qt=>dt=Qt),mu(dt)?dt.set(Ke):H(()=>{},{scope:{__placeholder:Ke}})};typeof m=="string"&&l.type==="radio"&&ce(()=>{l.hasAttribute("name")||l.setAttribute("name",m)});var Ue=l.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(l.type)||d.includes("lazy")?"change":"input";let gt=bn?()=>{}:Ba(l,Ue,d,Ke=>{he(Na(l,d,Ke,$()))});if(d.includes("fill")&&([void 0,null,""].includes($())||Ra(l)&&Array.isArray($())||l.tagName.toLowerCase()==="select"&&l.multiple)&&he(Na(l,d,{target:l},$())),l._x_removeModelListeners||(l._x_removeModelListeners={}),l._x_removeModelListeners.default=gt,T(()=>l._x_removeModelListeners.default()),l.form){let Ke=Ba(l.form,"reset",[],dt=>{ka(()=>l._x_model&&l._x_model.set(Na(l,d,{target:l},$())))});T(()=>Ke())}l._x_model={get(){return $()},set(Ke){he(Ke)}},l._x_forceModelUpdate=Ke=>{Ke===void 0&&typeof m=="string"&&m.match(/\./)&&(Ke=""),window.fromModel=!0,ce(()=>Jc(l,"value",Ke)),delete window.fromModel},x(()=>{let Ke=$();d.includes("unintrusive")&&document.activeElement.isSameNode(l)||l._x_forceModelUpdate(Ke)})});function Na(l,d,m,x){return ce(()=>{if(m instanceof CustomEvent&&m.detail!==void 0)return m.detail!==null&&m.detail!==void 0?m.detail:m.target.value;if(Ra(l))if(Array.isArray(x)){let T=null;return d.includes("number")?T=Ha(m.target.value):d.includes("boolean")?T=Ws(m.target.value):T=m.target.value,m.target.checked?x.includes(T)?x:x.concat([T]):x.filter(O=>!up(O,T))}else return m.target.checked;else{if(l.tagName.toLowerCase()==="select"&&l.multiple)return d.includes("number")?Array.from(m.target.selectedOptions).map(T=>{let O=T.value||T.text;return Ha(O)}):d.includes("boolean")?Array.from(m.target.selectedOptions).map(T=>{let O=T.value||T.text;return Ws(O)}):Array.from(m.target.selectedOptions).map(T=>T.value||T.text);{let T;return ru(l)?m.target.checked?T=m.target.value:T=x:T=m.target.value,d.includes("number")?Ha(T):d.includes("boolean")?Ws(T):d.includes("trim")?T.trim():T}}})}function Ha(l){let d=l?parseFloat(l):null;return hp(d)?d:l}function up(l,d){return l==d}function hp(l){return!Array.isArray(l)&&!isNaN(l)}function mu(l){return l!==null&&typeof l=="object"&&typeof l.get=="function"&&typeof l.set=="function"}S("cloak",l=>queueMicrotask(()=>ce(()=>l.removeAttribute($r("cloak"))))),Gr(()=>`[${$r("init")}]`),S("init",_n((l,{expression:d},{evaluate:m})=>typeof d=="string"?!!d.trim()&&m(d,{},!1):m(d,{},!1))),S("text",(l,{expression:d},{effect:m,evaluateLater:x})=>{let T=x(d);m(()=>{T(O=>{ce(()=>{l.textContent=O})})})}),S("html",(l,{expression:d},{effect:m,evaluateLater:x})=>{let T=x(d);m(()=>{T(O=>{ce(()=>{l.innerHTML=O,l._x_ignoreSelf=!0,Kr(l),delete l._x_ignoreSelf})})})}),He(Ve(":",Ne($r("bind:"))));var vu=(l,{value:d,modifiers:m,expression:x,original:T},{effect:O,cleanup:M})=>{if(!d){let $={};Kg($),Bt(l,x)(Ue=>{lu(l,Ue,T)},{scope:$});return}if(d==="key")return dp(l,x);if(l._x_inlineBindings&&l._x_inlineBindings[d]&&l._x_inlineBindings[d].extract)return;let H=Bt(l,x);O(()=>H($=>{$===void 0&&typeof x=="string"&&x.match(/\./)&&($=""),ce(()=>Jc(l,d,$,m))})),M(()=>{l._x_undoAddedClasses&&l._x_undoAddedClasses(),l._x_undoAddedStyles&&l._x_undoAddedStyles()})};vu.inline=(l,{value:d,modifiers:m,expression:x})=>{d&&(l._x_inlineBindings||(l._x_inlineBindings={}),l._x_inlineBindings[d]={expression:x,extract:!1})},S("bind",vu);function dp(l,d){l._x_keyExpression=d}yn(()=>`[${$r("data")}]`),S("data",(l,{expression:d},{cleanup:m})=>{if(fp(l))return;d=d===""?"{}":d;let x={};qr(x,l);let T={};Zg(T,x);let O=Yr(l,d,{scope:T});(O===void 0||O===!0)&&(O={}),qr(O,l);let M=se(O);Ze(M);let H=Z(l,M);M.init&&Yr(l,M.init),m(()=>{M.destroy&&Yr(l,M.destroy),H()})}),Us((l,d)=>{l._x_dataStack&&(d._x_dataStack=l._x_dataStack,d.setAttribute("data-has-alpine-state",!0))});function fp(l){return bn?La?!0:l.hasAttribute("data-has-alpine-state"):!1}S("show",(l,{modifiers:d,expression:m},{effect:x})=>{let T=Bt(l,m);l._x_doHide||(l._x_doHide=()=>{ce(()=>{l.style.setProperty("display","none",d.includes("important")?"important":void 0)})}),l._x_doShow||(l._x_doShow=()=>{ce(()=>{l.style.length===1&&l.style.display==="none"?l.removeAttribute("style"):l.style.removeProperty("display")})});let O=()=>{l._x_doHide(),l._x_isShown=!1},M=()=>{l._x_doShow(),l._x_isShown=!0},H=()=>setTimeout(M),$=Ma(gt=>gt?M():O(),gt=>{typeof l._x_toggleAndCascadeWithTransitions=="function"?l._x_toggleAndCascadeWithTransitions(l,gt,M,O):gt?H():O()}),he,Ue=!0;x(()=>T(gt=>{!Ue&&gt===he||(d.includes("immediate")&&(gt?H():O()),$(gt),he=gt,Ue=!1)}))}),S("for",(l,{expression:d},{effect:m,cleanup:x})=>{let T=pp(d),O=Bt(l,T.items),M=Bt(l,l._x_keyExpression||"index");l._x_prevKeys=[],l._x_lookup={},m(()=>gp(l,T,O,M)),x(()=>{Object.values(l._x_lookup).forEach(H=>ce(()=>{ti(H),H.remove()})),delete l._x_prevKeys,delete l._x_lookup})});function gp(l,d,m,x){let T=M=>typeof M=="object"&&!Array.isArray(M),O=l;m(M=>{mp(M)&&M>=0&&(M=Array.from(Array(M).keys(),Me=>Me+1)),M===void 0&&(M=[]);let H=l._x_lookup,$=l._x_prevKeys,he=[],Ue=[];if(T(M))M=Object.entries(M).map(([Me,ot])=>{let Xe=yu(d,ot,Me,M);x(it=>{Ue.includes(it)&&Nt("Duplicate key on x-for",l),Ue.push(it)},{scope:{index:Me,...Xe}}),he.push(Xe)});else for(let Me=0;Me<M.length;Me++){let ot=yu(d,M[Me],Me,M);x(Xe=>{Ue.includes(Xe)&&Nt("Duplicate key on x-for",l),Ue.push(Xe)},{scope:{index:Me,...ot}}),he.push(ot)}let gt=[],Ke=[],dt=[],Qt=[];for(let Me=0;Me<$.length;Me++){let ot=$[Me];Ue.indexOf(ot)===-1&&dt.push(ot)}$=$.filter(Me=>!dt.includes(Me));let Rr="template";for(let Me=0;Me<Ue.length;Me++){let ot=Ue[Me],Xe=$.indexOf(ot);if(Xe===-1)$.splice(Me,0,ot),gt.push([Rr,Me]);else if(Xe!==Me){let it=$.splice(Me,1)[0],Ht=$.splice(Xe-1,1)[0];$.splice(Me,0,Ht),$.splice(Xe,0,it),Ke.push([it,Ht])}else Qt.push(ot);Rr=ot}for(let Me=0;Me<dt.length;Me++){let ot=dt[Me];ot in H&&(ce(()=>{ti(H[ot]),H[ot].remove()}),delete H[ot])}for(let Me=0;Me<Ke.length;Me++){let[ot,Xe]=Ke[Me],it=H[ot],Ht=H[Xe],_r=document.createElement("div");ce(()=>{Ht||Nt('x-for ":key" is undefined or invalid',O,Xe,H),Ht.after(_r),it.after(Ht),Ht._x_currentIfEl&&Ht.after(Ht._x_currentIfEl),_r.before(it),it._x_currentIfEl&&it.after(it._x_currentIfEl),_r.remove()}),Ht._x_refreshXForScope(he[Ue.indexOf(Xe)])}for(let Me=0;Me<gt.length;Me++){let[ot,Xe]=gt[Me],it=ot==="template"?O:H[ot];it._x_currentIfEl&&(it=it._x_currentIfEl);let Ht=he[Xe],_r=Ue[Xe],Fr=document.importNode(O.content,!0).firstElementChild,ri=se(Ht);Z(Fr,ri,O),Fr._x_refreshXForScope=Ji=>{Object.entries(Ji).forEach(([Zi,ni])=>{ri[Zi]=ni})},ce(()=>{it.after(Fr),_n(()=>Kr(Fr))()}),typeof _r=="object"&&Nt("x-for key cannot be an object, it must be a string or an integer",O),H[_r]=Fr}for(let Me=0;Me<Qt.length;Me++)H[Qt[Me]]._x_refreshXForScope(he[Ue.indexOf(Qt[Me])]);O._x_prevKeys=Ue})}function pp(l){let d=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,m=/^\s*\(|\)\s*$/g,x=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,T=l.match(x);if(!T)return;let O={};O.items=T[2].trim();let M=T[1].replace(m,"").trim(),H=M.match(d);return H?(O.item=M.replace(d,"").trim(),O.index=H[1].trim(),H[2]&&(O.collection=H[2].trim())):O.item=M,O}function yu(l,d,m,x){let T={};return/^\[.*\]$/.test(l.item)&&Array.isArray(d)?l.item.replace("[","").replace("]","").split(",").map(M=>M.trim()).forEach((M,H)=>{T[M]=d[H]}):/^\{.*\}$/.test(l.item)&&!Array.isArray(d)&&typeof d=="object"?l.item.replace("{","").replace("}","").split(",").map(M=>M.trim()).forEach(M=>{T[M]=d[M]}):T[l.item]=d,l.index&&(T[l.index]=m),l.collection&&(T[l.collection]=x),T}function mp(l){return!Array.isArray(l)&&!isNaN(l)}function bu(){}bu.inline=(l,{expression:d},{cleanup:m})=>{let x=br(l);x._x_refs||(x._x_refs={}),x._x_refs[d]=l,m(()=>delete x._x_refs[d])},S("ref",bu),S("if",(l,{expression:d},{effect:m,cleanup:x})=>{l.tagName.toLowerCase()!=="template"&&Nt("x-if can only be used on a <template> tag",l);let T=Bt(l,d),O=()=>{if(l._x_currentIfEl)return l._x_currentIfEl;let H=l.content.cloneNode(!0).firstElementChild;return Z(H,{},l),ce(()=>{l.after(H),_n(()=>Kr(H))()}),l._x_currentIfEl=H,l._x_undoIf=()=>{ce(()=>{ti(H),H.remove()}),delete l._x_currentIfEl},H},M=()=>{l._x_undoIf&&(l._x_undoIf(),delete l._x_undoIf)};m(()=>T(H=>{H?O():M()})),x(()=>l._x_undoIf&&l._x_undoIf())}),S("id",(l,{expression:d},{evaluate:m})=>{m(d).forEach(T=>rp(l,T))}),Us((l,d)=>{l._x_ids&&(d._x_ids=l._x_ids)}),He(Ve("@",Ne($r("on:")))),S("on",_n((l,{value:d,modifiers:m,expression:x},{cleanup:T})=>{let O=x?Bt(l,x):()=>{};l.tagName.toLowerCase()==="template"&&(l._x_forwardEvents||(l._x_forwardEvents=[]),l._x_forwardEvents.includes(d)||l._x_forwardEvents.push(d));let M=Ba(l,d,m,H=>{O(()=>{},{scope:{$event:H},params:[H]})});T(()=>M())})),Xs("Collapse","collapse","collapse"),Xs("Intersect","intersect","intersect"),Xs("Focus","trap","focus"),Xs("Mask","mask","mask");function Xs(l,d,m){S(d,x=>Nt(`You can't use [x-${d}] without first installing the "${l}" plugin here: https://alpinejs.dev/plugins/${m}`,x))}Ki.setEvaluator(Is),Ki.setReactivityEngine({reactive:zs.reactive,effect:zs.effect,release:zs.stop,raw:zs.toRaw});var _u=Ki,vp=_u}}),u_=Xr({"../alpine/packages/collapse/dist/module.cjs.js"(n,e){var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(y,g)=>{for(var v in g)t(y,v,{get:g[v],enumerable:!0})},a=(y,g,v,b)=>{if(g&&typeof g=="object"||typeof g=="function")for(let _ of i(g))!s.call(y,_)&&_!==v&&t(y,_,{get:()=>g[_],enumerable:!(b=r(g,_))||b.enumerable});return y},c=y=>a(t({},"__esModule",{value:!0}),y),u={};o(u,{collapse:()=>h,default:()=>p}),e.exports=c(u);function h(y){y.directive("collapse",g),g.inline=(v,{modifiers:b})=>{b.includes("min")&&(v._x_doShow=()=>{},v._x_doHide=()=>{})};function g(v,{modifiers:b}){let _=f(b,"duration",250)/1e3,C=f(b,"min",0),E=!b.includes("min");v._x_isShown||(v.style.height=`${C}px`),!v._x_isShown&&E&&(v.hidden=!0),v._x_isShown||(v.style.overflow="hidden");let j=(V,L)=>{let P=y.setStyles(V,L);return L.height?()=>{}:P},I={transitionProperty:"height",transitionDuration:`${_}s`,transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"};v._x_transition={in(V=()=>{},L=()=>{}){E&&(v.hidden=!1),E&&(v.style.display=null);let P=v.getBoundingClientRect().height;v.style.height="auto";let X=v.getBoundingClientRect().height;P===X&&(P=C),y.transition(v,y.setStyles,{during:I,start:{height:P+"px"},end:{height:X+"px"}},()=>v._x_isShown=!0,()=>{Math.abs(v.getBoundingClientRect().height-X)<1&&(v.style.overflow=null)})},out(V=()=>{},L=()=>{}){let P=v.getBoundingClientRect().height;y.transition(v,j,{during:I,start:{height:P+"px"},end:{height:C+"px"}},()=>v.style.overflow="hidden",()=>{v._x_isShown=!1,v.style.height==`${C}px`&&E&&(v.style.display="none",v.hidden=!0)})}}}}function f(y,g,v){if(y.indexOf(g)===-1)return v;const b=y[y.indexOf(g)+1];if(!b)return v;if(g==="duration"){let _=b.match(/([0-9]+)ms/);if(_)return _[1]}if(g==="min"){let _=b.match(/([0-9]+)px/);if(_)return _[1]}return b}var p=h}}),h_=Xr({"../alpine/packages/focus/dist/module.cjs.js"(n,e){var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,o=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,c=(L,P)=>function(){return P||(0,L[s(L)[0]])((P={exports:{}}).exports,P),P.exports},u=(L,P)=>{for(var X in P)r(L,X,{get:P[X],enumerable:!0})},h=(L,P,X,ne)=>{if(P&&typeof P=="object"||typeof P=="function")for(let se of s(P))!a.call(L,se)&&se!==X&&r(L,se,{get:()=>P[se],enumerable:!(ne=i(P,se))||ne.enumerable});return L},f=(L,P,X)=>(X=L!=null?t(o(L)):{},h(!L||!L.__esModule?r(X,"default",{value:L,enumerable:!0}):X,L)),p=L=>h(r({},"__esModule",{value:!0}),L),y=c({"node_modules/tabbable/dist/index.js"(L){Object.defineProperty(L,"__esModule",{value:!0});var P=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],X=P.join(","),ne=typeof Element>"u",se=ne?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,G=!ne&&Element.prototype.getRootNode?function(ce){return ce.getRootNode()}:function(ce){return ce.ownerDocument},oe=function(z,K,Te){var Pe=Array.prototype.slice.apply(z.querySelectorAll(X));return K&&se.call(z,X)&&Pe.unshift(z),Pe=Pe.filter(Te),Pe},ge=function ce(z,K,Te){for(var Pe=[],xe=Array.from(z);xe.length;){var Se=xe.shift();if(Se.tagName==="SLOT"){var Z=Se.assignedElements(),re=Z.length?Z:Se.children,Oe=ce(re,!0,Te);Te.flatten?Pe.push.apply(Pe,Oe):Pe.push({scope:Se,candidates:Oe})}else{var tt=se.call(Se,X);tt&&Te.filter(Se)&&(K||!z.includes(Se))&&Pe.push(Se);var Je=Se.shadowRoot||typeof Te.getShadowRoot=="function"&&Te.getShadowRoot(Se),Ze=!Te.shadowRootFilter||Te.shadowRootFilter(Se);if(Je&&Ze){var St=ce(Je===!0?Se.children:Je.children,!0,Te);Te.flatten?Pe.push.apply(Pe,St):Pe.push({scope:Se,candidates:St})}else xe.unshift.apply(xe,Se.children)}}return Pe},Re=function(z,K){return z.tabIndex<0&&(K||/^(AUDIO|VIDEO|DETAILS)$/.test(z.tagName)||z.isContentEditable)&&isNaN(parseInt(z.getAttribute("tabindex"),10))?0:z.tabIndex},Fe=function(z,K){return z.tabIndex===K.tabIndex?z.documentOrder-K.documentOrder:z.tabIndex-K.tabIndex},Ie=function(z){return z.tagName==="INPUT"},Ce=function(z){return Ie(z)&&z.type==="hidden"},ct=function(z){var K=z.tagName==="DETAILS"&&Array.prototype.slice.apply(z.children).some(function(Te){return Te.tagName==="SUMMARY"});return K},ut=function(z,K){for(var Te=0;Te<z.length;Te++)if(z[Te].checked&&z[Te].form===K)return z[Te]},be=function(z){if(!z.name)return!0;var K=z.form||G(z),Te=function(Z){return K.querySelectorAll('input[type="radio"][name="'+Z+'"]')},Pe;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")Pe=Te(window.CSS.escape(z.name));else try{Pe=Te(z.name)}catch(Se){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",Se.message),!1}var xe=ut(Pe,z.form);return!xe||xe===z},ve=function(z){return Ie(z)&&z.type==="radio"},ke=function(z){return ve(z)&&!be(z)},_e=function(z){var K=z.getBoundingClientRect(),Te=K.width,Pe=K.height;return Te===0&&Pe===0},we=function(z,K){var Te=K.displayCheck,Pe=K.getShadowRoot;if(getComputedStyle(z).visibility==="hidden")return!0;var xe=se.call(z,"details>summary:first-of-type"),Se=xe?z.parentElement:z;if(se.call(Se,"details:not([open]) *"))return!0;var Z=G(z).host,re=Z?.ownerDocument.contains(Z)||z.ownerDocument.contains(z);if(!Te||Te==="full"){if(typeof Pe=="function"){for(var Oe=z;z;){var tt=z.parentElement,Je=G(z);if(tt&&!tt.shadowRoot&&Pe(tt)===!0)return _e(z);z.assignedSlot?z=z.assignedSlot:!tt&&Je!==z.ownerDocument?z=Je.host:z=tt}z=Oe}if(re)return!z.getClientRects().length}else if(Te==="non-zero-area")return _e(z);return!1},ee=function(z){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(z.tagName))for(var K=z.parentElement;K;){if(K.tagName==="FIELDSET"&&K.disabled){for(var Te=0;Te<K.children.length;Te++){var Pe=K.children.item(Te);if(Pe.tagName==="LEGEND")return se.call(K,"fieldset[disabled] *")?!0:!Pe.contains(z)}return!0}K=K.parentElement}return!1},Ge=function(z,K){return!(K.disabled||Ce(K)||we(K,z)||ct(K)||ee(K))},xt=function(z,K){return!(ke(K)||Re(K)<0||!Ge(z,K))},te=function(z){var K=parseInt(z.getAttribute("tabindex"),10);return!!(isNaN(K)||K>=0)},ae=function ce(z){var K=[],Te=[];return z.forEach(function(Pe,xe){var Se=!!Pe.scope,Z=Se?Pe.scope:Pe,re=Re(Z,Se),Oe=Se?ce(Pe.candidates):Z;re===0?Se?K.push.apply(K,Oe):K.push(Z):Te.push({documentOrder:xe,tabIndex:re,item:Pe,isScope:Se,content:Oe})}),Te.sort(Fe).reduce(function(Pe,xe){return xe.isScope?Pe.push.apply(Pe,xe.content):Pe.push(xe.content),Pe},[]).concat(K)},Be=function(z,K){K=K||{};var Te;return K.getShadowRoot?Te=ge([z],K.includeContainer,{filter:xt.bind(null,K),flatten:!1,getShadowRoot:K.getShadowRoot,shadowRootFilter:te}):Te=oe(z,K.includeContainer,xt.bind(null,K)),ae(Te)},ze=function(z,K){K=K||{};var Te;return K.getShadowRoot?Te=ge([z],K.includeContainer,{filter:Ge.bind(null,K),flatten:!0,getShadowRoot:K.getShadowRoot}):Te=oe(z,K.includeContainer,Ge.bind(null,K)),Te},je=function(z,K){if(K=K||{},!z)throw new Error("No node provided");return se.call(z,X)===!1?!1:xt(K,z)},pe=P.concat("iframe").join(","),It=function(z,K){if(K=K||{},!z)throw new Error("No node provided");return se.call(z,pe)===!1?!1:Ge(K,z)};L.focusable=ze,L.isFocusable=It,L.isTabbable=je,L.tabbable=Be}}),g=c({"node_modules/focus-trap/dist/focus-trap.js"(L){Object.defineProperty(L,"__esModule",{value:!0});var P=y();function X(be,ve){var ke=Object.keys(be);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(be);ve&&(_e=_e.filter(function(we){return Object.getOwnPropertyDescriptor(be,we).enumerable})),ke.push.apply(ke,_e)}return ke}function ne(be){for(var ve=1;ve<arguments.length;ve++){var ke=arguments[ve]!=null?arguments[ve]:{};ve%2?X(Object(ke),!0).forEach(function(_e){se(be,_e,ke[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors(ke)):X(Object(ke)).forEach(function(_e){Object.defineProperty(be,_e,Object.getOwnPropertyDescriptor(ke,_e))})}return be}function se(be,ve,ke){return ve in be?Object.defineProperty(be,ve,{value:ke,enumerable:!0,configurable:!0,writable:!0}):be[ve]=ke,be}var G=(function(){var be=[];return{activateTrap:function(ke){if(be.length>0){var _e=be[be.length-1];_e!==ke&&_e.pause()}var we=be.indexOf(ke);we===-1||be.splice(we,1),be.push(ke)},deactivateTrap:function(ke){var _e=be.indexOf(ke);_e!==-1&&be.splice(_e,1),be.length>0&&be[be.length-1].unpause()}}})(),oe=function(ve){return ve.tagName&&ve.tagName.toLowerCase()==="input"&&typeof ve.select=="function"},ge=function(ve){return ve.key==="Escape"||ve.key==="Esc"||ve.keyCode===27},Re=function(ve){return ve.key==="Tab"||ve.keyCode===9},Fe=function(ve){return setTimeout(ve,0)},Ie=function(ve,ke){var _e=-1;return ve.every(function(we,ee){return ke(we)?(_e=ee,!1):!0}),_e},Ce=function(ve){for(var ke=arguments.length,_e=new Array(ke>1?ke-1:0),we=1;we<ke;we++)_e[we-1]=arguments[we];return typeof ve=="function"?ve.apply(void 0,_e):ve},ct=function(ve){return ve.target.shadowRoot&&typeof ve.composedPath=="function"?ve.composedPath()[0]:ve.target},ut=function(ve,ke){var _e=ke?.document||document,we=ne({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},ke),ee={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},Ge,xt=function(Z,re,Oe){return Z&&Z[re]!==void 0?Z[re]:we[Oe||re]},te=function(Z){return ee.containerGroups.findIndex(function(re){var Oe=re.container,tt=re.tabbableNodes;return Oe.contains(Z)||tt.find(function(Je){return Je===Z})})},ae=function(Z){var re=we[Z];if(typeof re=="function"){for(var Oe=arguments.length,tt=new Array(Oe>1?Oe-1:0),Je=1;Je<Oe;Je++)tt[Je-1]=arguments[Je];re=re.apply(void 0,tt)}if(re===!0&&(re=void 0),!re){if(re===void 0||re===!1)return re;throw new Error("`".concat(Z,"` was specified but was not a node, or did not return a node"))}var Ze=re;if(typeof re=="string"&&(Ze=_e.querySelector(re),!Ze))throw new Error("`".concat(Z,"` as selector refers to no known node"));return Ze},Be=function(){var Z=ae("initialFocus");if(Z===!1)return!1;if(Z===void 0)if(te(_e.activeElement)>=0)Z=_e.activeElement;else{var re=ee.tabbableGroups[0],Oe=re&&re.firstTabbableNode;Z=Oe||ae("fallbackFocus")}if(!Z)throw new Error("Your focus-trap needs to have at least one focusable element");return Z},ze=function(){if(ee.containerGroups=ee.containers.map(function(Z){var re=P.tabbable(Z,we.tabbableOptions),Oe=P.focusable(Z,we.tabbableOptions);return{container:Z,tabbableNodes:re,focusableNodes:Oe,firstTabbableNode:re.length>0?re[0]:null,lastTabbableNode:re.length>0?re[re.length-1]:null,nextTabbableNode:function(Je){var Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,St=Oe.findIndex(function(lr){return lr===Je});if(!(St<0))return Ze?Oe.slice(St+1).find(function(lr){return P.isTabbable(lr,we.tabbableOptions)}):Oe.slice(0,St).reverse().find(function(lr){return P.isTabbable(lr,we.tabbableOptions)})}}}),ee.tabbableGroups=ee.containerGroups.filter(function(Z){return Z.tabbableNodes.length>0}),ee.tabbableGroups.length<=0&&!ae("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},je=function Se(Z){if(Z!==!1&&Z!==_e.activeElement){if(!Z||!Z.focus){Se(Be());return}Z.focus({preventScroll:!!we.preventScroll}),ee.mostRecentlyFocusedNode=Z,oe(Z)&&Z.select()}},pe=function(Z){var re=ae("setReturnFocus",Z);return re||(re===!1?!1:Z)},It=function(Z){var re=ct(Z);if(!(te(re)>=0)){if(Ce(we.clickOutsideDeactivates,Z)){Ge.deactivate({returnFocus:we.returnFocusOnDeactivate&&!P.isFocusable(re,we.tabbableOptions)});return}Ce(we.allowOutsideClick,Z)||Z.preventDefault()}},ce=function(Z){var re=ct(Z),Oe=te(re)>=0;Oe||re instanceof Document?Oe&&(ee.mostRecentlyFocusedNode=re):(Z.stopImmediatePropagation(),je(ee.mostRecentlyFocusedNode||Be()))},z=function(Z){var re=ct(Z);ze();var Oe=null;if(ee.tabbableGroups.length>0){var tt=te(re),Je=tt>=0?ee.containerGroups[tt]:void 0;if(tt<0)Z.shiftKey?Oe=ee.tabbableGroups[ee.tabbableGroups.length-1].lastTabbableNode:Oe=ee.tabbableGroups[0].firstTabbableNode;else if(Z.shiftKey){var Ze=Ie(ee.tabbableGroups,function(qr){var En=qr.firstTabbableNode;return re===En});if(Ze<0&&(Je.container===re||P.isFocusable(re,we.tabbableOptions)&&!P.isTabbable(re,we.tabbableOptions)&&!Je.nextTabbableNode(re,!1))&&(Ze=tt),Ze>=0){var St=Ze===0?ee.tabbableGroups.length-1:Ze-1,lr=ee.tabbableGroups[St];Oe=lr.lastTabbableNode}}else{var yr=Ie(ee.tabbableGroups,function(qr){var En=qr.lastTabbableNode;return re===En});if(yr<0&&(Je.container===re||P.isFocusable(re,we.tabbableOptions)&&!P.isTabbable(re,we.tabbableOptions)&&!Je.nextTabbableNode(re))&&(yr=tt),yr>=0){var On=yr===ee.tabbableGroups.length-1?0:yr+1,Yt=ee.tabbableGroups[On];Oe=Yt.firstTabbableNode}}}else Oe=ae("fallbackFocus");Oe&&(Z.preventDefault(),je(Oe))},K=function(Z){if(ge(Z)&&Ce(we.escapeDeactivates,Z)!==!1){Z.preventDefault(),Ge.deactivate();return}if(Re(Z)){z(Z);return}},Te=function(Z){var re=ct(Z);te(re)>=0||Ce(we.clickOutsideDeactivates,Z)||Ce(we.allowOutsideClick,Z)||(Z.preventDefault(),Z.stopImmediatePropagation())},Pe=function(){if(ee.active)return G.activateTrap(Ge),ee.delayInitialFocusTimer=we.delayInitialFocus?Fe(function(){je(Be())}):je(Be()),_e.addEventListener("focusin",ce,!0),_e.addEventListener("mousedown",It,{capture:!0,passive:!1}),_e.addEventListener("touchstart",It,{capture:!0,passive:!1}),_e.addEventListener("click",Te,{capture:!0,passive:!1}),_e.addEventListener("keydown",K,{capture:!0,passive:!1}),Ge},xe=function(){if(ee.active)return _e.removeEventListener("focusin",ce,!0),_e.removeEventListener("mousedown",It,!0),_e.removeEventListener("touchstart",It,!0),_e.removeEventListener("click",Te,!0),_e.removeEventListener("keydown",K,!0),Ge};return Ge={get active(){return ee.active},get paused(){return ee.paused},activate:function(Z){if(ee.active)return this;var re=xt(Z,"onActivate"),Oe=xt(Z,"onPostActivate"),tt=xt(Z,"checkCanFocusTrap");tt||ze(),ee.active=!0,ee.paused=!1,ee.nodeFocusedBeforeActivation=_e.activeElement,re&&re();var Je=function(){tt&&ze(),Pe(),Oe&&Oe()};return tt?(tt(ee.containers.concat()).then(Je,Je),this):(Je(),this)},deactivate:function(Z){if(!ee.active)return this;var re=ne({onDeactivate:we.onDeactivate,onPostDeactivate:we.onPostDeactivate,checkCanReturnFocus:we.checkCanReturnFocus},Z);clearTimeout(ee.delayInitialFocusTimer),ee.delayInitialFocusTimer=void 0,xe(),ee.active=!1,ee.paused=!1,G.deactivateTrap(Ge);var Oe=xt(re,"onDeactivate"),tt=xt(re,"onPostDeactivate"),Je=xt(re,"checkCanReturnFocus"),Ze=xt(re,"returnFocus","returnFocusOnDeactivate");Oe&&Oe();var St=function(){Fe(function(){Ze&&je(pe(ee.nodeFocusedBeforeActivation)),tt&&tt()})};return Ze&&Je?(Je(pe(ee.nodeFocusedBeforeActivation)).then(St,St),this):(St(),this)},pause:function(){return ee.paused||!ee.active?this:(ee.paused=!0,xe(),this)},unpause:function(){return!ee.paused||!ee.active?this:(ee.paused=!1,ze(),Pe(),this)},updateContainerElements:function(Z){var re=[].concat(Z).filter(Boolean);return ee.containers=re.map(function(Oe){return typeof Oe=="string"?_e.querySelector(Oe):Oe}),ee.active&&ze(),this}},Ge.updateContainerElements(ve),Ge};L.createFocusTrap=ut}}),v={};u(v,{default:()=>V,focus:()=>C}),e.exports=p(v);var b=f(g()),_=f(y());function C(L){let P,X;window.addEventListener("focusin",()=>{P=X,X=document.activeElement}),L.magic("focus",ne=>{let se=ne;return{__noscroll:!1,__wrapAround:!1,within(G){return se=G,this},withoutScrolling(){return this.__noscroll=!0,this},noscroll(){return this.__noscroll=!0,this},withWrapAround(){return this.__wrapAround=!0,this},wrap(){return this.withWrapAround()},focusable(G){return(0,_.isFocusable)(G)},previouslyFocused(){return P},lastFocused(){return P},focused(){return X},focusables(){return Array.isArray(se)?se:(0,_.focusable)(se,{displayCheck:"none"})},all(){return this.focusables()},isFirst(G){let oe=this.all();return oe[0]&&oe[0].isSameNode(G)},isLast(G){let oe=this.all();return oe.length&&oe.slice(-1)[0].isSameNode(G)},getFirst(){return this.all()[0]},getLast(){return this.all().slice(-1)[0]},getNext(){let G=this.all(),oe=document.activeElement;if(G.indexOf(oe)!==-1)return this.__wrapAround&&G.indexOf(oe)===G.length-1?G[0]:G[G.indexOf(oe)+1]},getPrevious(){let G=this.all(),oe=document.activeElement;if(G.indexOf(oe)!==-1)return this.__wrapAround&&G.indexOf(oe)===0?G.slice(-1)[0]:G[G.indexOf(oe)-1]},first(){this.focus(this.getFirst())},last(){this.focus(this.getLast())},next(){this.focus(this.getNext())},previous(){this.focus(this.getPrevious())},prev(){return this.previous()},focus(G){G&&setTimeout(()=>{G.hasAttribute("tabindex")||G.setAttribute("tabindex","0"),G.focus({preventScroll:this.__noscroll})})}}}),L.directive("trap",L.skipDuringClone((ne,{expression:se,modifiers:G},{effect:oe,evaluateLater:ge,cleanup:Re})=>{let Fe=ge(se),Ie=!1,Ce={escapeDeactivates:!1,allowOutsideClick:!0,fallbackFocus:()=>ne};if(G.includes("noautofocus"))Ce.initialFocus=!1;else{let ke=ne.querySelector("[autofocus]");ke&&(Ce.initialFocus=ke)}let ct=(0,b.createFocusTrap)(ne,Ce),ut=()=>{},be=()=>{};const ve=()=>{ut(),ut=()=>{},be(),be=()=>{},ct.deactivate({returnFocus:!G.includes("noreturn")})};oe(()=>Fe(ke=>{Ie!==ke&&(ke&&!Ie&&(G.includes("noscroll")&&(be=I()),G.includes("inert")&&(ut=E(ne)),setTimeout(()=>{ct.activate()},15)),!ke&&Ie&&ve(),Ie=!!ke)})),Re(ve)},(ne,{expression:se,modifiers:G},{evaluate:oe})=>{G.includes("inert")&&oe(se)&&E(ne)}))}function E(L){let P=[];return j(L,X=>{let ne=X.hasAttribute("aria-hidden");X.setAttribute("aria-hidden","true"),P.push(()=>ne||X.removeAttribute("aria-hidden"))}),()=>{for(;P.length;)P.pop()()}}function j(L,P){L.isSameNode(document.body)||!L.parentNode||Array.from(L.parentNode.children).forEach(X=>{X.isSameNode(L)?j(L.parentNode,P):P(X)})}function I(){let L=document.documentElement.style.overflow,P=document.documentElement.style.paddingRight,X=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.documentElement.style.paddingRight=`${X}px`,()=>{document.documentElement.style.overflow=L,document.documentElement.style.paddingRight=P}}var V=C}}),d_=Xr({"../alpine/packages/persist/dist/module.cjs.js"(n,e){var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(v,b)=>{for(var _ in b)t(v,_,{get:b[_],enumerable:!0})},a=(v,b,_,C)=>{if(b&&typeof b=="object"||typeof b=="function")for(let E of i(b))!s.call(v,E)&&E!==_&&t(v,E,{get:()=>b[E],enumerable:!(C=r(b,E))||C.enumerable});return v},c=v=>a(t({},"__esModule",{value:!0}),v),u={};o(u,{default:()=>g,persist:()=>h}),e.exports=c(u);function h(v){let b=()=>{let _,C;try{C=localStorage}catch(E){console.error(E),console.warn("Alpine: $persist is using temporary storage since localStorage is unavailable.");let j=new Map;C={getItem:j.get.bind(j),setItem:j.set.bind(j)}}return v.interceptor((E,j,I,V,L)=>{let P=_||`_x_${V}`,X=f(P,C)?p(P,C):E;return I(X),v.effect(()=>{let ne=j();y(P,ne,C),I(ne)}),X},E=>{E.as=j=>(_=j,E),E.using=j=>(C=j,E)})};Object.defineProperty(v,"$persist",{get:()=>b()}),v.magic("persist",b),v.persist=(_,{get:C,set:E},j=localStorage)=>{let I=f(_,j)?p(_,j):C();E(I),v.effect(()=>{let V=C();y(_,V,j),E(V)})}}function f(v,b){return b.getItem(v)!==null}function p(v,b){let _=b.getItem(v,b);if(_!==void 0)return JSON.parse(_)}function y(v,b,_){_.setItem(v,JSON.stringify(b))}var g=h}}),f_=Xr({"../alpine/packages/intersect/dist/module.cjs.js"(n,e){var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(v,b)=>{for(var _ in b)t(v,_,{get:b[_],enumerable:!0})},a=(v,b,_,C)=>{if(b&&typeof b=="object"||typeof b=="function")for(let E of i(b))!s.call(v,E)&&E!==_&&t(v,E,{get:()=>b[E],enumerable:!(C=r(b,E))||C.enumerable});return v},c=v=>a(t({},"__esModule",{value:!0}),v),u={};o(u,{default:()=>g,intersect:()=>h}),e.exports=c(u);function h(v){v.directive("intersect",v.skipDuringClone((b,{value:_,expression:C,modifiers:E},{evaluateLater:j,cleanup:I})=>{let V=j(C),L={rootMargin:y(E),threshold:f(E)},P=new IntersectionObserver(X=>{X.forEach(ne=>{ne.isIntersecting!==(_==="leave")&&(V(),E.includes("once")&&P.disconnect())})},L);P.observe(b),I(()=>{P.disconnect()})}))}function f(v){if(v.includes("full"))return .99;if(v.includes("half"))return .5;if(!v.includes("threshold"))return 0;let b=v[v.indexOf("threshold")+1];return b==="100"?1:b==="0"?0:+`.${b}`}function p(v){let b=v.match(/^(-?[0-9]+)(px|%)?$/);return b?b[1]+(b[2]||"px"):void 0}function y(v){const b="margin",_="0px 0px 0px 0px",C=v.indexOf(b);if(C===-1)return _;let E=[];for(let j=1;j<5;j++)E.push(p(v[C+j]||""));return E=E.filter(j=>j!==void 0),E.length?E.join(" ").trim():_}var g=h}}),g_=Xr({"node_modules/@alpinejs/resize/dist/module.cjs.js"(n,e){var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(_,C)=>{for(var E in C)t(_,E,{get:C[E],enumerable:!0})},a=(_,C,E,j)=>{if(C&&typeof C=="object"||typeof C=="function")for(let I of i(C))!s.call(_,I)&&I!==E&&t(_,I,{get:()=>C[I],enumerable:!(j=r(C,I))||j.enumerable});return _},c=_=>a(t({},"__esModule",{value:!0}),_),u={};o(u,{default:()=>b,resize:()=>h}),e.exports=c(u);function h(_){_.directive("resize",_.skipDuringClone((C,{value:E,expression:j,modifiers:I},{evaluateLater:V,cleanup:L})=>{let P=V(j),X=(se,G)=>{P(()=>{},{scope:{$width:se,$height:G}})},ne=I.includes("document")?g(X):f(C,X);L(()=>ne())}))}function f(_,C){let E=new ResizeObserver(j=>{let[I,V]=v(j);C(I,V)});return E.observe(_),()=>E.disconnect()}var p,y=new Set;function g(_){return y.add(_),p||(p=new ResizeObserver(C=>{let[E,j]=v(C);y.forEach(I=>I(E,j))}),p.observe(document.documentElement)),()=>{y.delete(_)}}function v(_){let C,E;for(let j of _)C=j.borderBoxSize[0].inlineSize,E=j.borderBoxSize[0].blockSize;return[C,E]}var b=h}}),p_=Xr({"../alpine/packages/anchor/dist/module.cjs.js"(n,e){var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(S,k)=>{for(var B in k)t(S,B,{get:k[B],enumerable:!0})},a=(S,k,B,U)=>{if(k&&typeof k=="object"||typeof k=="function")for(let q of i(k))!s.call(S,q)&&q!==B&&t(S,q,{get:()=>k[q],enumerable:!(U=r(k,q))||U.enumerable});return S},c=S=>a(t({},"__esModule",{value:!0}),S),u={};o(u,{anchor:()=>Zn,default:()=>Qn}),e.exports=c(u);var h=Math.min,f=Math.max,p=Math.round,y=Math.floor,g=S=>({x:S,y:S}),v={left:"right",right:"left",bottom:"top",top:"bottom"},b={start:"end",end:"start"};function _(S,k,B){return f(S,h(k,B))}function C(S,k){return typeof S=="function"?S(k):S}function E(S){return S.split("-")[0]}function j(S){return S.split("-")[1]}function I(S){return S==="x"?"y":"x"}function V(S){return S==="y"?"height":"width"}function L(S){return["top","bottom"].includes(E(S))?"y":"x"}function P(S){return I(L(S))}function X(S,k,B){B===void 0&&(B=!1);const U=j(S),q=P(S),J=V(q);let Q=q==="x"?U===(B?"end":"start")?"right":"left":U==="start"?"bottom":"top";return k.reference[J]>k.floating[J]&&(Q=ge(Q)),[Q,ge(Q)]}function ne(S){const k=ge(S);return[se(S),k,se(k)]}function se(S){return S.replace(/start|end/g,k=>b[k])}function G(S,k,B){const U=["left","right"],q=["right","left"],J=["top","bottom"],Q=["bottom","top"];switch(S){case"top":case"bottom":return B?k?q:U:k?U:q;case"left":case"right":return k?J:Q;default:return[]}}function oe(S,k,B,U){const q=j(S);let J=G(E(S),B==="start",U);return q&&(J=J.map(Q=>Q+"-"+q),k&&(J=J.concat(J.map(se)))),J}function ge(S){return S.replace(/left|right|bottom|top/g,k=>v[k])}function Re(S){return{top:0,right:0,bottom:0,left:0,...S}}function Fe(S){return typeof S!="number"?Re(S):{top:S,right:S,bottom:S,left:S}}function Ie(S){return{...S,top:S.y,left:S.x,right:S.x+S.width,bottom:S.y+S.height}}function Ce(S,k,B){let{reference:U,floating:q}=S;const J=L(k),Q=P(k),ue=V(Q),ye=E(k),Ee=J==="y",Ve=U.x+U.width/2-q.width/2,Ne=U.y+U.height/2-q.height/2,Qe=U[ue]/2-q[ue]/2;let Le;switch(ye){case"top":Le={x:Ve,y:U.y-q.height};break;case"bottom":Le={x:Ve,y:U.y+U.height};break;case"right":Le={x:U.x+U.width,y:Ne};break;case"left":Le={x:U.x-q.width,y:Ne};break;default:Le={x:U.x,y:U.y}}switch(j(k)){case"start":Le[Q]-=Qe*(B&&Ee?-1:1);break;case"end":Le[Q]+=Qe*(B&&Ee?-1:1);break}return Le}var ct=async(S,k,B)=>{const{placement:U="bottom",strategy:q="absolute",middleware:J=[],platform:Q}=B,ue=J.filter(Boolean),ye=await(Q.isRTL==null?void 0:Q.isRTL(k));let Ee=await Q.getElementRects({reference:S,floating:k,strategy:q}),{x:Ve,y:Ne}=Ce(Ee,U,ye),Qe=U,Le={},He=0;for(let $e=0;$e<ue.length;$e++){const{name:mt,fn:et}=ue[$e],{x:vt,y:ft,data:Zt,reset:Ct}=await et({x:Ve,y:Ne,initialPlacement:U,placement:Qe,strategy:q,middlewareData:Le,rects:Ee,platform:Q,elements:{reference:S,floating:k}});if(Ve=vt??Ve,Ne=ft??Ne,Le={...Le,[mt]:{...Le[mt],...Zt}},Ct&&He<=50){He++,typeof Ct=="object"&&(Ct.placement&&(Qe=Ct.placement),Ct.rects&&(Ee=Ct.rects===!0?await Q.getElementRects({reference:S,floating:k,strategy:q}):Ct.rects),{x:Ve,y:Ne}=Ce(Ee,Qe,ye)),$e=-1;continue}}return{x:Ve,y:Ne,placement:Qe,strategy:q,middlewareData:Le}};async function ut(S,k){var B;k===void 0&&(k={});const{x:U,y:q,platform:J,rects:Q,elements:ue,strategy:ye}=S,{boundary:Ee="clippingAncestors",rootBoundary:Ve="viewport",elementContext:Ne="floating",altBoundary:Qe=!1,padding:Le=0}=C(k,S),He=Fe(Le),mt=ue[Qe?Ne==="floating"?"reference":"floating":Ne],et=Ie(await J.getClippingRect({element:(B=await(J.isElement==null?void 0:J.isElement(mt)))==null||B?mt:mt.contextElement||await(J.getDocumentElement==null?void 0:J.getDocumentElement(ue.floating)),boundary:Ee,rootBoundary:Ve,strategy:ye})),vt=Ne==="floating"?{...Q.floating,x:U,y:q}:Q.reference,ft=await(J.getOffsetParent==null?void 0:J.getOffsetParent(ue.floating)),Zt=await(J.isElement==null?void 0:J.isElement(ft))?await(J.getScale==null?void 0:J.getScale(ft))||{x:1,y:1}:{x:1,y:1},Ct=Ie(J.convertOffsetParentRelativeRectToViewportRelativeRect?await J.convertOffsetParentRelativeRectToViewportRelativeRect({rect:vt,offsetParent:ft,strategy:ye}):vt);return{top:(et.top-Ct.top+He.top)/Zt.y,bottom:(Ct.bottom-et.bottom+He.bottom)/Zt.y,left:(et.left-Ct.left+He.left)/Zt.x,right:(Ct.right-et.right+He.right)/Zt.x}}var be=function(S){return S===void 0&&(S={}),{name:"flip",options:S,async fn(k){var B,U;const{placement:q,middlewareData:J,rects:Q,initialPlacement:ue,platform:ye,elements:Ee}=k,{mainAxis:Ve=!0,crossAxis:Ne=!0,fallbackPlacements:Qe,fallbackStrategy:Le="bestFit",fallbackAxisSideDirection:He="none",flipAlignment:$e=!0,...mt}=C(S,k);if((B=J.arrow)!=null&&B.alignmentOffset)return{};const et=E(q),vt=E(ue)===ue,ft=await(ye.isRTL==null?void 0:ye.isRTL(Ee.floating)),Zt=Qe||(vt||!$e?[ge(ue)]:ne(ue));!Qe&&He!=="none"&&Zt.push(...oe(ue,$e,He,ft));const Ct=[ue,...Zt],$t=await ut(k,mt),Nt=[];let vn=((U=J.flip)==null?void 0:U.overflows)||[];if(Ve&&Nt.push($t[et]),Ne){const Lr=X(q,Q,ft);Nt.push($t[Lr[0]],$t[Lr[1]])}if(vn=[...vn,{placement:q,overflows:Nt}],!Nt.every(Lr=>Lr<=0)){var Ns,ei;const Lr=(((Ns=J.flip)==null?void 0:Ns.index)||0)+1,$i=Ct[Lr];if($i)return{data:{index:Lr,overflows:vn},reset:{placement:$i}};let yn=(ei=vn.filter(Gr=>Gr.overflows[0]<=0).sort((Gr,br)=>Gr.overflows[1]-br.overflows[1])[0])==null?void 0:ei.placement;if(!yn)switch(Le){case"bestFit":{var Yi;const Gr=(Yi=vn.map(br=>[br.placement,br.overflows.filter(cr=>cr>0).reduce((cr,Oa)=>cr+Oa,0)]).sort((br,cr)=>br[1]-cr[1])[0])==null?void 0:Yi[0];Gr&&(yn=Gr);break}case"initialPlacement":yn=ue;break}if(q!==yn)return{reset:{placement:yn}}}return{}}}};async function ve(S,k){const{placement:B,platform:U,elements:q}=S,J=await(U.isRTL==null?void 0:U.isRTL(q.floating)),Q=E(B),ue=j(B),ye=L(B)==="y",Ee=["left","top"].includes(Q)?-1:1,Ve=J&&ye?-1:1,Ne=C(k,S);let{mainAxis:Qe,crossAxis:Le,alignmentAxis:He}=typeof Ne=="number"?{mainAxis:Ne,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...Ne};return ue&&typeof He=="number"&&(Le=ue==="end"?He*-1:He),ye?{x:Le*Ve,y:Qe*Ee}:{x:Qe*Ee,y:Le*Ve}}var ke=function(S){return S===void 0&&(S=0),{name:"offset",options:S,async fn(k){const{x:B,y:U}=k,q=await ve(k,S);return{x:B+q.x,y:U+q.y,data:q}}}},_e=function(S){return S===void 0&&(S={}),{name:"shift",options:S,async fn(k){const{x:B,y:U,placement:q}=k,{mainAxis:J=!0,crossAxis:Q=!1,limiter:ue={fn:mt=>{let{x:et,y:vt}=mt;return{x:et,y:vt}}},...ye}=C(S,k),Ee={x:B,y:U},Ve=await ut(k,ye),Ne=L(E(q)),Qe=I(Ne);let Le=Ee[Qe],He=Ee[Ne];if(J){const mt=Qe==="y"?"top":"left",et=Qe==="y"?"bottom":"right",vt=Le+Ve[mt],ft=Le-Ve[et];Le=_(vt,Le,ft)}if(Q){const mt=Ne==="y"?"top":"left",et=Ne==="y"?"bottom":"right",vt=He+Ve[mt],ft=He-Ve[et];He=_(vt,He,ft)}const $e=ue.fn({...k,[Qe]:Le,[Ne]:He});return{...$e,data:{x:$e.x-B,y:$e.y-U}}}}};function we(S){return xt(S)?(S.nodeName||"").toLowerCase():"#document"}function ee(S){var k;return(S==null||(k=S.ownerDocument)==null?void 0:k.defaultView)||window}function Ge(S){var k;return(k=(xt(S)?S.ownerDocument:S.document)||window.document)==null?void 0:k.documentElement}function xt(S){return S instanceof Node||S instanceof ee(S).Node}function te(S){return S instanceof Element||S instanceof ee(S).Element}function ae(S){return S instanceof HTMLElement||S instanceof ee(S).HTMLElement}function Be(S){return typeof ShadowRoot>"u"?!1:S instanceof ShadowRoot||S instanceof ee(S).ShadowRoot}function ze(S){const{overflow:k,overflowX:B,overflowY:U,display:q}=K(S);return/auto|scroll|overlay|hidden|clip/.test(k+U+B)&&!["inline","contents"].includes(q)}function je(S){return["table","td","th"].includes(we(S))}function pe(S){const k=ce(),B=K(S);return B.transform!=="none"||B.perspective!=="none"||(B.containerType?B.containerType!=="normal":!1)||!k&&(B.backdropFilter?B.backdropFilter!=="none":!1)||!k&&(B.filter?B.filter!=="none":!1)||["transform","perspective","filter"].some(U=>(B.willChange||"").includes(U))||["paint","layout","strict","content"].some(U=>(B.contain||"").includes(U))}function It(S){let k=Pe(S);for(;ae(k)&&!z(k);){if(pe(k))return k;k=Pe(k)}return null}function ce(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function z(S){return["html","body","#document"].includes(we(S))}function K(S){return ee(S).getComputedStyle(S)}function Te(S){return te(S)?{scrollLeft:S.scrollLeft,scrollTop:S.scrollTop}:{scrollLeft:S.pageXOffset,scrollTop:S.pageYOffset}}function Pe(S){if(we(S)==="html")return S;const k=S.assignedSlot||S.parentNode||Be(S)&&S.host||Ge(S);return Be(k)?k.host:k}function xe(S){const k=Pe(S);return z(k)?S.ownerDocument?S.ownerDocument.body:S.body:ae(k)&&ze(k)?k:xe(k)}function Se(S,k,B){var U;k===void 0&&(k=[]),B===void 0&&(B=!0);const q=xe(S),J=q===((U=S.ownerDocument)==null?void 0:U.body),Q=ee(q);return J?k.concat(Q,Q.visualViewport||[],ze(q)?q:[],Q.frameElement&&B?Se(Q.frameElement):[]):k.concat(q,Se(q,[],B))}function Z(S){const k=K(S);let B=parseFloat(k.width)||0,U=parseFloat(k.height)||0;const q=ae(S),J=q?S.offsetWidth:B,Q=q?S.offsetHeight:U,ue=p(B)!==J||p(U)!==Q;return ue&&(B=J,U=Q),{width:B,height:U,$:ue}}function re(S){return te(S)?S:S.contextElement}function Oe(S){const k=re(S);if(!ae(k))return g(1);const B=k.getBoundingClientRect(),{width:U,height:q,$:J}=Z(k);let Q=(J?p(B.width):B.width)/U,ue=(J?p(B.height):B.height)/q;return(!Q||!Number.isFinite(Q))&&(Q=1),(!ue||!Number.isFinite(ue))&&(ue=1),{x:Q,y:ue}}var tt=g(0);function Je(S){const k=ee(S);return!ce()||!k.visualViewport?tt:{x:k.visualViewport.offsetLeft,y:k.visualViewport.offsetTop}}function Ze(S,k,B){return k===void 0&&(k=!1),!B||k&&B!==ee(S)?!1:k}function St(S,k,B,U){k===void 0&&(k=!1),B===void 0&&(B=!1);const q=S.getBoundingClientRect(),J=re(S);let Q=g(1);k&&(U?te(U)&&(Q=Oe(U)):Q=Oe(S));const ue=Ze(J,B,U)?Je(J):g(0);let ye=(q.left+ue.x)/Q.x,Ee=(q.top+ue.y)/Q.y,Ve=q.width/Q.x,Ne=q.height/Q.y;if(J){const Qe=ee(J),Le=U&&te(U)?ee(U):U;let He=Qe.frameElement;for(;He&&U&&Le!==Qe;){const $e=Oe(He),mt=He.getBoundingClientRect(),et=K(He),vt=mt.left+(He.clientLeft+parseFloat(et.paddingLeft))*$e.x,ft=mt.top+(He.clientTop+parseFloat(et.paddingTop))*$e.y;ye*=$e.x,Ee*=$e.y,Ve*=$e.x,Ne*=$e.y,ye+=vt,Ee+=ft,He=ee(He).frameElement}}return Ie({width:Ve,height:Ne,x:ye,y:Ee})}function lr(S){let{rect:k,offsetParent:B,strategy:U}=S;const q=ae(B),J=Ge(B);if(B===J)return k;let Q={scrollLeft:0,scrollTop:0},ue=g(1);const ye=g(0);if((q||!q&&U!=="fixed")&&((we(B)!=="body"||ze(J))&&(Q=Te(B)),ae(B))){const Ee=St(B);ue=Oe(B),ye.x=Ee.x+B.clientLeft,ye.y=Ee.y+B.clientTop}return{width:k.width*ue.x,height:k.height*ue.y,x:k.x*ue.x-Q.scrollLeft*ue.x+ye.x,y:k.y*ue.y-Q.scrollTop*ue.y+ye.y}}function yr(S){return Array.from(S.getClientRects())}function On(S){return St(Ge(S)).left+Te(S).scrollLeft}function Yt(S){const k=Ge(S),B=Te(S),U=S.ownerDocument.body,q=f(k.scrollWidth,k.clientWidth,U.scrollWidth,U.clientWidth),J=f(k.scrollHeight,k.clientHeight,U.scrollHeight,U.clientHeight);let Q=-B.scrollLeft+On(S);const ue=-B.scrollTop;return K(U).direction==="rtl"&&(Q+=f(k.clientWidth,U.clientWidth)-q),{width:q,height:J,x:Q,y:ue}}function qr(S,k){const B=ee(S),U=Ge(S),q=B.visualViewport;let J=U.clientWidth,Q=U.clientHeight,ue=0,ye=0;if(q){J=q.width,Q=q.height;const Ee=ce();(!Ee||Ee&&k==="fixed")&&(ue=q.offsetLeft,ye=q.offsetTop)}return{width:J,height:Q,x:ue,y:ye}}function En(S,k){const B=St(S,!0,k==="fixed"),U=B.top+S.clientTop,q=B.left+S.clientLeft,J=ae(S)?Oe(S):g(1),Q=S.clientWidth*J.x,ue=S.clientHeight*J.y,ye=q*J.x,Ee=U*J.y;return{width:Q,height:ue,x:ye,y:Ee}}function Ls(S,k,B){let U;if(k==="viewport")U=qr(S,B);else if(k==="document")U=Yt(Ge(S));else if(te(k))U=En(k,B);else{const q=Je(S);U={...k,x:k.x-q.x,y:k.y-q.y}}return Ie(U)}function mn(S,k){const B=Pe(S);return B===k||!te(B)||z(B)?!1:K(B).position==="fixed"||mn(B,k)}function Kn(S,k){const B=k.get(S);if(B)return B;let U=Se(S,[],!1).filter(ue=>te(ue)&&we(ue)!=="body"),q=null;const J=K(S).position==="fixed";let Q=J?Pe(S):S;for(;te(Q)&&!z(Q);){const ue=K(Q),ye=pe(Q);!ye&&ue.position==="fixed"&&(q=null),(J?!ye&&!q:!ye&&ue.position==="static"&&!!q&&["absolute","fixed"].includes(q.position)||ze(Q)&&!ye&&mn(S,Q))?U=U.filter(Ve=>Ve!==Q):q=ue,Q=Pe(Q)}return k.set(S,U),U}function Rs(S){let{element:k,boundary:B,rootBoundary:U,strategy:q}=S;const Q=[...B==="clippingAncestors"?Kn(k,this._c):[].concat(B),U],ue=Q[0],ye=Q.reduce((Ee,Ve)=>{const Ne=Ls(k,Ve,q);return Ee.top=f(Ne.top,Ee.top),Ee.right=h(Ne.right,Ee.right),Ee.bottom=h(Ne.bottom,Ee.bottom),Ee.left=f(Ne.left,Ee.left),Ee},Ls(k,ue,q));return{width:ye.right-ye.left,height:ye.bottom-ye.top,x:ye.left,y:ye.top}}function Yr(S){return Z(S)}function Bt(S,k,B){const U=ae(k),q=Ge(k),J=B==="fixed",Q=St(S,!0,J,k);let ue={scrollLeft:0,scrollTop:0};const ye=g(0);if(U||!U&&!J)if((we(k)!=="body"||ze(q))&&(ue=Te(k)),U){const Ee=St(k,!0,J,k);ye.x=Ee.x+k.clientLeft,ye.y=Ee.y+k.clientTop}else q&&(ye.x=On(q));return{x:Q.left+ue.scrollLeft-ye.x,y:Q.top+ue.scrollTop-ye.y,width:Q.width,height:Q.height}}function Xi(S,k){return!ae(S)||K(S).position==="fixed"?null:k?k(S):S.offsetParent}function Fs(S,k){const B=ee(S);if(!ae(S))return B;let U=Xi(S,k);for(;U&&je(U)&&K(U).position==="static";)U=Xi(U,k);return U&&(we(U)==="html"||we(U)==="body"&&K(U).position==="static"&&!pe(U))?B:U||It(S)||B}var Is=async function(S){let{reference:k,floating:B,strategy:U}=S;const q=this.getOffsetParent||Fs,J=this.getDimensions;return{reference:Bt(k,await q(B),U),floating:{x:0,y:0,...await J(B)}}};function Sa(S){return K(S).direction==="rtl"}var qi={convertOffsetParentRelativeRectToViewportRelativeRect:lr,getDocumentElement:Ge,getClippingRect:Rs,getOffsetParent:Fs,getElementRects:Is,getClientRects:yr,getDimensions:Yr,getScale:Oe,isElement:te,isRTL:Sa};function Ca(S,k){let B=null,U;const q=Ge(S);function J(){clearTimeout(U),B&&B.disconnect(),B=null}function Q(ue,ye){ue===void 0&&(ue=!1),ye===void 0&&(ye=1),J();const{left:Ee,top:Ve,width:Ne,height:Qe}=S.getBoundingClientRect();if(ue||k(),!Ne||!Qe)return;const Le=y(Ve),He=y(q.clientWidth-(Ee+Ne)),$e=y(q.clientHeight-(Ve+Qe)),mt=y(Ee),vt={rootMargin:-Le+"px "+-He+"px "+-$e+"px "+-mt+"px",threshold:f(0,h(1,ye))||1};let ft=!0;function Zt(Ct){const $t=Ct[0].intersectionRatio;if($t!==ye){if(!ft)return Q();$t?Q(!1,$t):U=setTimeout(()=>{Q(!1,1e-7)},100)}ft=!1}try{B=new IntersectionObserver(Zt,{...vt,root:q.ownerDocument})}catch{B=new IntersectionObserver(Zt,vt)}B.observe(S)}return Q(!0),J}function Ta(S,k,B,U){U===void 0&&(U={});const{ancestorScroll:q=!0,ancestorResize:J=!0,elementResize:Q=typeof ResizeObserver=="function",layoutShift:ue=typeof IntersectionObserver=="function",animationFrame:ye=!1}=U,Ee=re(S),Ve=q||J?[...Ee?Se(Ee):[],...Se(k)]:[];Ve.forEach(et=>{q&&et.addEventListener("scroll",B,{passive:!0}),J&&et.addEventListener("resize",B)});const Ne=Ee&&ue?Ca(Ee,B):null;let Qe=-1,Le=null;Q&&(Le=new ResizeObserver(et=>{let[vt]=et;vt&&vt.target===Ee&&Le&&(Le.unobserve(k),cancelAnimationFrame(Qe),Qe=requestAnimationFrame(()=>{Le&&Le.observe(k)})),B()}),Ee&&!ye&&Le.observe(Ee),Le.observe(k));let He,$e=ye?St(S):null;ye&&mt();function mt(){const et=St(S);$e&&(et.x!==$e.x||et.y!==$e.y||et.width!==$e.width||et.height!==$e.height)&&B(),$e=et,He=requestAnimationFrame(mt)}return B(),()=>{Ve.forEach(et=>{q&&et.removeEventListener("scroll",B),J&&et.removeEventListener("resize",B)}),Ne&&Ne(),Le&&Le.disconnect(),Le=null,ye&&cancelAnimationFrame(He)}}var Jn=(S,k,B)=>{const U=new Map,q={platform:qi,...B},J={...q.platform,_c:U};return ct(S,k,{...q,platform:J})};function Zn(S){S.magic("anchor",k=>{if(!k._x_anchor)throw"Alpine: No x-anchor directive found on element using $anchor...";return k._x_anchor}),S.interceptClone((k,B)=>{k&&k._x_anchor&&!B._x_anchor&&(B._x_anchor=k._x_anchor)}),S.directive("anchor",S.skipDuringClone((k,{expression:B,modifiers:U,value:q},{cleanup:J,evaluate:Q})=>{let{placement:ue,offsetValue:ye,unstyled:Ee}=Bs(U);k._x_anchor=S.reactive({x:0,y:0});let Ve=Q(B);if(!Ve)throw"Alpine: no element provided to x-anchor...";let Ne=()=>{let Le;Jn(Ve,k,{placement:ue,middleware:[be(),_e({padding:5}),ke(ye)]}).then(({x:He,y:$e})=>{Ee||$r(k,He,$e),JSON.stringify({x:He,y:$e})!==Le&&(k._x_anchor.x=He,k._x_anchor.y=$e),Le=JSON.stringify({x:He,y:$e})})},Qe=Ta(Ve,k,()=>Ne());J(()=>Qe())},(k,{expression:B,modifiers:U,value:q},{cleanup:J,evaluate:Q})=>{let{unstyled:ue}=Bs(U);k._x_anchor&&(ue||$r(k,k._x_anchor.x,k._x_anchor.y))}))}function $r(S,k,B){Object.assign(S.style,{left:k+"px",top:B+"px",position:"absolute"})}function Bs(S){let B=["top","top-start","top-end","right","right-start","right-end","bottom","bottom-start","bottom-end","left","left-start","left-end"].find(J=>S.includes(J)),U=0;if(S.includes("offset")){let J=S.findIndex(Q=>Q==="offset");U=S[J+1]!==void 0?Number(S[J+1]):U}let q=S.includes("no-style");return{placement:B,offsetValue:U,unstyled:q}}var Qn=Zn}}),m_=Xr({"node_modules/nprogress/nprogress.js"(n,e){(function(t,r){typeof define=="function"&&define.amd?define(r):typeof n=="object"?e.exports=r():t.NProgress=r()})(n,function(){var t={};t.version="0.2.0";var r=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};t.configure=function(g){var v,b;for(v in g)b=g[v],b!==void 0&&g.hasOwnProperty(v)&&(r[v]=b);return this},t.status=null,t.set=function(g){var v=t.isStarted();g=i(g,r.minimum,1),t.status=g===1?null:g;var b=t.render(!v),_=b.querySelector(r.barSelector),C=r.speed,E=r.easing;return b.offsetWidth,a(function(j){r.positionUsing===""&&(r.positionUsing=t.getPositioningCSS()),c(_,o(g,C,E)),g===1?(c(b,{transition:"none",opacity:1}),b.offsetWidth,setTimeout(function(){c(b,{transition:"all "+C+"ms linear",opacity:0}),setTimeout(function(){t.remove(),j()},C)},C)):setTimeout(j,C)}),this},t.isStarted=function(){return typeof t.status=="number"},t.start=function(){t.status||t.set(0);var g=function(){setTimeout(function(){t.status&&(t.trickle(),g())},r.trickleSpeed)};return r.trickle&&g(),this},t.done=function(g){return!g&&!t.status?this:t.inc(.3+.5*Math.random()).set(1)},t.inc=function(g){var v=t.status;return v?(typeof g!="number"&&(g=(1-v)*i(Math.random()*v,.1,.95)),v=i(v+g,0,.994),t.set(v)):t.start()},t.trickle=function(){return t.inc(Math.random()*r.trickleRate)},(function(){var g=0,v=0;t.promise=function(b){return!b||b.state()==="resolved"?this:(v===0&&t.start(),g++,v++,b.always(function(){v--,v===0?(g=0,t.done()):t.set((g-v)/g)}),this)}})(),t.render=function(g){if(t.isRendered())return document.getElementById("nprogress");h(document.documentElement,"nprogress-busy");var v=document.createElement("div");v.id="nprogress",v.innerHTML=r.template;var b=v.querySelector(r.barSelector),_=g?"-100":s(t.status||0),C=document.querySelector(r.parent),E;return c(b,{transition:"all 0 linear",transform:"translate3d("+_+"%,0,0)"}),r.showSpinner||(E=v.querySelector(r.spinnerSelector),E&&y(E)),C!=document.body&&h(C,"nprogress-custom-parent"),C.appendChild(v),v},t.remove=function(){f(document.documentElement,"nprogress-busy"),f(document.querySelector(r.parent),"nprogress-custom-parent");var g=document.getElementById("nprogress");g&&y(g)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var g=document.body.style,v="WebkitTransform"in g?"Webkit":"MozTransform"in g?"Moz":"msTransform"in g?"ms":"OTransform"in g?"O":"";return v+"Perspective"in g?"translate3d":v+"Transform"in g?"translate":"margin"};function i(g,v,b){return g<v?v:g>b?b:g}function s(g){return(-1+g)*100}function o(g,v,b){var _;return r.positionUsing==="translate3d"?_={transform:"translate3d("+s(g)+"%,0,0)"}:r.positionUsing==="translate"?_={transform:"translate("+s(g)+"%,0)"}:_={"margin-left":s(g)+"%"},_.transition="all "+v+"ms "+b,_}var a=(function(){var g=[];function v(){var b=g.shift();b&&b(v)}return function(b){g.push(b),g.length==1&&v()}})(),c=(function(){var g=["Webkit","O","Moz","ms"],v={};function b(j){return j.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(I,V){return V.toUpperCase()})}function _(j){var I=document.body.style;if(j in I)return j;for(var V=g.length,L=j.charAt(0).toUpperCase()+j.slice(1),P;V--;)if(P=g[V]+L,P in I)return P;return j}function C(j){return j=b(j),v[j]||(v[j]=_(j))}function E(j,I,V){I=C(I),j.style[I]=V}return function(j,I){var V=arguments,L,P;if(V.length==2)for(L in I)P=I[L],P!==void 0&&I.hasOwnProperty(L)&&E(j,L,P);else E(j,V[1],V[2])}})();function u(g,v){var b=typeof g=="string"?g:p(g);return b.indexOf(" "+v+" ")>=0}function h(g,v){var b=p(g),_=b+v;u(b,v)||(g.className=_.substring(1))}function f(g,v){var b=p(g),_;u(g,v)&&(_=b.replace(" "+v+" "," "),g.className=_.substring(1,_.length-1))}function p(g){return(" "+(g.className||"")+" ").replace(/\s+/gi," ")}function y(g){g&&g.parentNode&&g.parentNode.removeChild(g)}return t})}}),v_=Xr({"../alpine/packages/morph/dist/module.cjs.js"(n,e){var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(L,P)=>{for(var X in P)t(L,X,{get:P[X],enumerable:!0})},a=(L,P,X,ne)=>{if(P&&typeof P=="object"||typeof P=="function")for(let se of i(P))!s.call(L,se)&&se!==X&&t(L,se,{get:()=>P[se],enumerable:!(ne=r(P,se))||ne.enumerable});return L},c=L=>a(t({},"__esModule",{value:!0}),L),u={};o(u,{default:()=>V,morph:()=>I}),e.exports=c(u);function h(L,P,X){E();let ne,se,G,oe,ge,Re,Fe,Ie,Ce;function ct(te={}){let ae=ze=>ze.getAttribute("key"),Be=()=>{};oe=te.updating||Be,ge=te.updated||Be,Re=te.removing||Be,Fe=te.removed||Be,Ie=te.adding||Be,Ce=te.added||Be,se=te.key||ae,G=te.lookahead||!1}function ut(te,ae){if(be(te,ae))return ve(te,ae);let Be=!1,ze=!1;if(!p(oe,()=>ze=!0,te,ae,()=>Be=!0)){if(te.nodeType===1&&window.Alpine&&(window.Alpine.cloneNode(te,ae),te._x_teleport&&ae._x_teleport&&ut(te._x_teleport,ae._x_teleport)),v(ae)){ke(te,ae),ge(te,ae);return}Be||_e(te,ae),ge(te,ae),ze||we(te,ae)}}function be(te,ae){return te.nodeType!=ae.nodeType||te.nodeName!=ae.nodeName||ee(te)!=ee(ae)}function ve(te,ae){if(f(Re,te))return;let Be=ae.cloneNode(!0);f(Ie,Be)||(te.replaceWith(Be),Fe(te),Ce(Be))}function ke(te,ae){let Be=ae.nodeValue;te.nodeValue!==Be&&(te.nodeValue=Be)}function _e(te,ae){if(te._x_transitioning||te._x_isShown&&!ae._x_isShown||!te._x_isShown&&ae._x_isShown)return;let Be=Array.from(te.attributes),ze=Array.from(ae.attributes);for(let je=Be.length-1;je>=0;je--){let pe=Be[je].name;ae.hasAttribute(pe)||te.removeAttribute(pe)}for(let je=ze.length-1;je>=0;je--){let pe=ze[je].name,It=ze[je].value;te.getAttribute(pe)!==It&&te.setAttribute(pe,It)}}function we(te,ae){let Be=Ge(te.children),ze={},je=_(ae),pe=_(te);for(;je;){j(je,pe);let ce=ee(je),z=ee(pe);if(!pe)if(ce&&ze[ce]){let xe=ze[ce];te.appendChild(xe),pe=xe,z=ee(pe)}else{if(!f(Ie,je)){let xe=je.cloneNode(!0);te.appendChild(xe),Ce(xe)}je=C(ae,je);continue}let K=xe=>xe&&xe.nodeType===8&&xe.textContent==="[if BLOCK]><![endif]",Te=xe=>xe&&xe.nodeType===8&&xe.textContent==="[if ENDBLOCK]><![endif]";if(K(je)&&K(pe)){let xe=0,Se=pe;for(;pe;){let Ze=C(te,pe);if(K(Ze))xe++;else if(Te(Ze)&&xe>0)xe--;else if(Te(Ze)&&xe===0){pe=Ze;break}pe=Ze}let Z=pe;xe=0;let re=je;for(;je;){let Ze=C(ae,je);if(K(Ze))xe++;else if(Te(Ze)&&xe>0)xe--;else if(Te(Ze)&&xe===0){je=Ze;break}je=Ze}let Oe=je,tt=new b(Se,Z),Je=new b(re,Oe);we(tt,Je);continue}if(pe.nodeType===1&&G&&!pe.isEqualNode(je)){let xe=C(ae,je),Se=!1;for(;!Se&&xe;)xe.nodeType===1&&pe.isEqualNode(xe)&&(Se=!0,pe=xt(te,je,pe),z=ee(pe)),xe=C(ae,xe)}if(ce!==z){if(!ce&&z){ze[z]=pe,pe=xt(te,je,pe),ze[z].remove(),pe=C(te,pe),je=C(ae,je);continue}if(ce&&!z&&Be[ce]&&(pe.replaceWith(Be[ce]),pe=Be[ce],z=ee(pe)),ce&&z){let xe=Be[ce];if(xe)ze[z]=pe,pe.replaceWith(xe),pe=xe,z=ee(pe);else{ze[z]=pe,pe=xt(te,je,pe),ze[z].remove(),pe=C(te,pe),je=C(ae,je);continue}}}let Pe=pe&&C(te,pe);ut(pe,je),je=je&&C(ae,je),pe=Pe}let It=[];for(;pe;)f(Re,pe)||It.push(pe),pe=C(te,pe);for(;It.length;){let ce=It.shift();ce.remove(),Fe(ce)}}function ee(te){return te&&te.nodeType===1&&se(te)}function Ge(te){let ae={};for(let Be of te){let ze=ee(Be);ze&&(ae[ze]=Be)}return ae}function xt(te,ae,Be){if(!f(Ie,ae)){let ze=ae.cloneNode(!0);return te.insertBefore(ze,Be),Ce(ze),ze}return ae}return ct(X),ne=typeof P=="string"?g(P):P,window.Alpine&&window.Alpine.closestDataStack&&!L._x_dataStack&&(ne._x_dataStack=window.Alpine.closestDataStack(L),ne._x_dataStack&&window.Alpine.cloneNode(L,ne)),ut(L,ne),ne=void 0,L}h.step=()=>{},h.log=()=>{};function f(L,...P){let X=!1;return L(...P,()=>X=!0),X}function p(L,P,...X){let ne=!1;return L(...X,()=>ne=!0,P),ne}var y=!1;function g(L){const P=document.createElement("template");return P.innerHTML=L,P.content.firstElementChild}function v(L){return L.nodeType===3||L.nodeType===8}var b=class{constructor(L,P){this.startComment=L,this.endComment=P}get children(){let L=[],P=this.startComment.nextSibling;for(;P&&P!==this.endComment;)L.push(P),P=P.nextSibling;return L}appendChild(L){this.endComment.before(L)}get firstChild(){let L=this.startComment.nextSibling;if(L!==this.endComment)return L}nextNode(L){let P=L.nextSibling;if(P!==this.endComment)return P}insertBefore(L,P){return P.before(L),L}};function _(L){return L.firstChild}function C(L,P){let X;return L instanceof b?X=L.nextNode(P):X=P.nextSibling,X}function E(){if(y)return;y=!0;let L=Element.prototype.setAttribute,P=document.createElement("div");Element.prototype.setAttribute=function(ne,se){if(!ne.includes("@"))return L.call(this,ne,se);P.innerHTML=`<span ${ne}="${se}"></span>`;let G=P.firstElementChild.getAttributeNode(ne);P.firstElementChild.removeAttributeNode(G),this.setAttributeNode(G)}}function j(L,P){let X=P&&P._x_bindings&&P._x_bindings.id;X&&L.setAttribute&&(L.setAttribute("id",X),L.id=X)}function I(L){L.morph=h}var V=I}}),y_=Xr({"../alpine/packages/mask/dist/module.cjs.js"(n,e){var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o=(b,_)=>{for(var C in _)t(b,C,{get:_[C],enumerable:!0})},a=(b,_,C,E)=>{if(_&&typeof _=="object"||typeof _=="function")for(let j of i(_))!s.call(b,j)&&j!==C&&t(b,j,{get:()=>_[j],enumerable:!(E=r(_,j))||E.enumerable});return b},c=b=>a(t({},"__esModule",{value:!0}),b),u={};o(u,{default:()=>v,mask:()=>h,stripDown:()=>p}),e.exports=c(u);function h(b){b.directive("mask",(_,{value:C,expression:E},{effect:j,evaluateLater:I,cleanup:V})=>{let L=()=>E,P="";queueMicrotask(()=>{if(["function","dynamic"].includes(C)){let G=I(E);j(()=>{L=oe=>{let ge;return b.dontAutoEvaluateFunctions(()=>{G(Re=>{ge=typeof Re=="function"?Re(oe):Re},{scope:{$input:oe,$money:g.bind({el:_})}})}),ge},ne(_,!1)})}else ne(_,!1);if(_._x_model){if(_._x_model.get()===_.value||_._x_model.get()===null&&_.value==="")return;_._x_model.set(_.value)}});const X=new AbortController;V(()=>{X.abort()}),_.addEventListener("input",()=>ne(_),{signal:X.signal,capture:!0}),_.addEventListener("blur",()=>ne(_,!1),{signal:X.signal});function ne(G,oe=!0){let ge=G.value,Re=L(ge);if(!Re||Re==="false")return!1;if(P.length-G.value.length===1)return P=G.value;let Fe=()=>{P=G.value=se(ge,Re)};oe?f(G,Re,()=>{Fe()}):Fe()}function se(G,oe){if(G==="")return"";let ge=p(oe,G);return y(oe,ge)}}).before("model")}function f(b,_,C){let E=b.selectionStart,j=b.value;C();let I=j.slice(0,E),V=y(_,p(_,I)).length;b.setSelectionRange(V,V)}function p(b,_){let C=_,E="",j={9:/[0-9]/,a:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},I="";for(let V=0;V<b.length;V++){if(["9","a","*"].includes(b[V])){I+=b[V];continue}for(let L=0;L<C.length;L++)if(C[L]===b[V]){C=C.slice(0,L)+C.slice(L+1);break}}for(let V=0;V<I.length;V++){let L=!1;for(let P=0;P<C.length;P++)if(j[I[V]].test(C[P])){E+=C[P],C=C.slice(0,P)+C.slice(P+1),L=!0;break}if(!L)break}return E}function y(b,_){let C=Array.from(_),E="";for(let j=0;j<b.length;j++){if(!["9","a","*"].includes(b[j])){E+=b[j];continue}if(C.length===0)break;E+=C.shift()}return E}function g(b,_=".",C,E=2){if(b==="-")return"-";if(/^\D+$/.test(b))return"9";C==null&&(C=_===","?".":",");let j=(P,X)=>{let ne="",se=0;for(let G=P.length-1;G>=0;G--)P[G]!==X&&(se===3?(ne=P[G]+X+ne,se=0):ne=P[G]+ne,se++);return ne},I=b.startsWith("-")?"-":"",V=b.replaceAll(new RegExp(`[^0-9\\${_}]`,"g"),""),L=Array.from({length:V.split(_)[0].length}).fill("9").join("");return L=`${I}${j(L,C)}`,E>0&&b.includes(_)&&(L+=`${_}`+"9".repeat(E)),queueMicrotask(()=>{this.el.value.endsWith(_)||this.el.value[this.el.selectionStart-1]===_&&this.el.setSelectionRange(this.el.selectionStart-1,this.el.selectionStart-1)}),L}var v=h}}),b_=class{constructor(){this.arrays={}}add(n,e){this.arrays[n]||(this.arrays[n]=[]),this.arrays[n].push(e)}remove(n){this.arrays[n]&&delete this.arrays[n]}get(n){return this.arrays[n]||[]}each(n,e){return this.get(n).forEach(e)}},Nf=class{constructor(){this.arrays=new WeakMap}add(n,e){this.arrays.has(n)||this.arrays.set(n,[]),this.arrays.get(n).push(e)}remove(n){this.arrays.has(n)&&this.arrays.delete(n,[])}get(n){return this.arrays.has(n)?this.arrays.get(n):[]}each(n,e){return this.get(n).forEach(e)}};function wl(n,e,t={},r=!0){n.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:r,composed:!0,cancelable:!0}))}function xl(n,e,t){return n.addEventListener(e,t),()=>n.removeEventListener(e,t)}function Lc(n){return typeof n=="object"&&n!==null}function Oh(n){return Lc(n)&&!Zl(n)}function Zl(n){return Array.isArray(n)}function Hf(n){return typeof n=="function"}function Eh(n){return typeof n!="object"||n===null}function Ln(n){return JSON.parse(JSON.stringify(n))}function sn(n,e){return e===""?n:e.split(".").reduce((t,r)=>t?.[r],n)}function ba(n,e,t){let r=e.split(".");if(r.length===1)return n[e]=t;let i=r.shift(),s=r.join(".");n[i]===void 0&&(n[i]={}),ba(n[i],s,t)}function Rc(n,e,t={},r=""){if(n===e)return t;if(typeof n!=typeof e||Oh(n)&&Zl(e)||Zl(n)&&Oh(e)||Eh(n)||Eh(e))return t[r]=e,t;let i=Object.keys(n);return Object.entries(e).forEach(([s,o])=>{t={...t,...Rc(n[s],e[s],t,r===""?s:`${r}.${s}`)},i=i.filter(a=>a!==s)}),i.forEach(s=>{t[`${r}.${s}`]="__rm__"}),t}function Si(n){let e=Ah(n)?n[0]:n;return Ah(n)&&n[1],Lc(e)&&Object.entries(e).forEach(([t,r])=>{e[t]=Si(r)}),e}function Ah(n){return Array.isArray(n)&&n.length===2&&typeof n[1]=="object"&&Object.keys(n[1]).includes("s")}function Uf(){if(document.querySelector('meta[name="csrf-token"]'))return document.querySelector('meta[name="csrf-token"]').getAttribute("content");if(document.querySelector("[data-csrf]"))return document.querySelector("[data-csrf]").getAttribute("data-csrf");if(window.livewireScriptConfig.csrf??!1)return window.livewireScriptConfig.csrf;throw"Livewire: No CSRF token detected"}var yi;function __(){if(yi)return yi;if(window.livewireScriptConfig&&(window.livewireScriptConfig.nonce??!1))return yi=window.livewireScriptConfig.nonce,yi;const n=document.querySelector("style[data-livewire-style][nonce]");return n?(yi=n.nonce,yi):null}function w_(){return document.querySelector("[data-update-uri]")?.getAttribute("data-update-uri")??window.livewireScriptConfig.uri??null}function Wf(n){return!!n.match(/<script>Sfdump\(".+"\)<\/script>/)}function x_(n){let e=n.match(/.*<script>Sfdump\(".+"\)<\/script>/s);return[e,n.replace(e,"")]}var Sl=new WeakMap;function js(n){if(!Sl.has(n)){let e=new C_(n);Sl.set(n,e),e.registerListeners()}return Sl.get(n)}function S_(n,e,t,r){let i=js(t),s=()=>n.dispatchEvent(new CustomEvent("livewire-upload-start",{bubbles:!0,detail:{id:t.id,property:e}})),o=()=>n.dispatchEvent(new CustomEvent("livewire-upload-finish",{bubbles:!0,detail:{id:t.id,property:e}})),a=()=>n.dispatchEvent(new CustomEvent("livewire-upload-error",{bubbles:!0,detail:{id:t.id,property:e}})),c=()=>n.dispatchEvent(new CustomEvent("livewire-upload-cancel",{bubbles:!0,detail:{id:t.id,property:e}})),u=p=>{var y=Math.round(p.loaded*100/p.total);n.dispatchEvent(new CustomEvent("livewire-upload-progress",{bubbles:!0,detail:{progress:y}}))},h=p=>{p.target.files.length!==0&&(s(),p.target.multiple?i.uploadMultiple(e,p.target.files,o,a,u,c):i.upload(e,p.target.files[0],o,a,u,c))};n.addEventListener("change",h),t.$wire.$watch(e,p=>{n.isConnected&&((p===null||p==="")&&(n.value=""),n.multiple&&Array.isArray(p)&&p.length===0&&(n.value=""))});let f=()=>{n.value=null};n.addEventListener("click",f),n.addEventListener("livewire-upload-cancel",f),r(()=>{n.removeEventListener("change",h),n.removeEventListener("click",f)})}var C_=class{constructor(n){this.component=n,this.uploadBag=new kh,this.removeBag=new kh}registerListeners(){this.component.$wire.$on("upload:generatedSignedUrl",({name:n,url:e})=>{this.component,this.handleSignedUrl(n,e)}),this.component.$wire.$on("upload:generatedSignedUrlForS3",({name:n,payload:e})=>{this.component,this.handleS3PreSignedUrl(n,e)}),this.component.$wire.$on("upload:finished",({name:n,tmpFilenames:e})=>this.markUploadFinished(n,e)),this.component.$wire.$on("upload:errored",({name:n})=>this.markUploadErrored(n)),this.component.$wire.$on("upload:removed",({name:n,tmpFilename:e})=>this.removeBag.shift(n).finishCallback(e))}upload(n,e,t,r,i,s){this.setUpload(n,{files:[e],multiple:!1,finishCallback:t,errorCallback:r,progressCallback:i,cancelledCallback:s})}uploadMultiple(n,e,t,r,i,s){this.setUpload(n,{files:Array.from(e),multiple:!0,finishCallback:t,errorCallback:r,progressCallback:i,cancelledCallback:s})}removeUpload(n,e,t){this.removeBag.push(n,{tmpFilename:e,finishCallback:t}),this.component.$wire.call("_removeUpload",n,e)}setUpload(n,e){this.uploadBag.add(n,e),this.uploadBag.get(n).length===1&&this.startUpload(n,e)}handleSignedUrl(n,e){let t=new FormData;Array.from(this.uploadBag.first(n).files).forEach(s=>t.append("files[]",s,s.name));let r={Accept:"application/json"},i=Uf();i&&(r["X-CSRF-TOKEN"]=i),this.makeRequest(n,t,"post",e,r,s=>s.paths)}handleS3PreSignedUrl(n,e){let t=this.uploadBag.first(n).files[0],r=e.headers;"Host"in r&&delete r.Host;let i=e.url;this.makeRequest(n,t,"put",i,r,s=>[e.path])}makeRequest(n,e,t,r,i,s){let o=new XMLHttpRequest;o.open(t,r),Object.entries(i).forEach(([a,c])=>{o.setRequestHeader(a,c)}),o.upload.addEventListener("progress",a=>{a.detail={},a.detail.progress=Math.floor(a.loaded*100/a.total),this.uploadBag.first(n).progressCallback(a)}),o.addEventListener("load",()=>{if((o.status+"")[0]==="2"){let c=s(o.response&&JSON.parse(o.response));this.component.$wire.call("_finishUpload",n,c,this.uploadBag.first(n).multiple);return}let a=null;o.status===422&&(a=o.response),this.component.$wire.call("_uploadErrored",n,a,this.uploadBag.first(n).multiple)}),this.uploadBag.first(n).request=o,o.send(e)}startUpload(n,e){let t=e.files.map(r=>({name:r.name,size:r.size,type:r.type}));this.component.$wire.call("_startUpload",n,t,e.multiple),this.component}markUploadFinished(n,e){this.component;let t=this.uploadBag.shift(n);t.finishCallback(t.multiple?e:e[0]),this.uploadBag.get(n).length>0&&this.startUpload(n,this.uploadBag.last(n))}markUploadErrored(n){this.component,this.uploadBag.shift(n).errorCallback(),this.uploadBag.get(n).length>0&&this.startUpload(n,this.uploadBag.last(n))}cancelUpload(n,e=null){this.component;let t=this.uploadBag.first(n);t&&(t.request&&t.request.abort(),this.uploadBag.shift(n).cancelledCallback(),e&&e())}},kh=class{constructor(){this.bag={}}add(n,e){this.bag[n]||(this.bag[n]=[]),this.bag[n].push(e)}push(n,e){this.add(n,e)}first(n){return this.bag[n]?this.bag[n][0]:null}last(n){return this.bag[n].slice(-1)[0]}get(n){return this.bag[n]}shift(n){return this.bag[n].shift()}call(n,...e){(this.listeners[n]||[]).forEach(t=>{t(...e)})}has(n){return Object.keys(this.listeners).includes(n)}};function T_(n,e,t,r=()=>{},i=()=>{},s=()=>{},o=()=>{}){js(n).upload(e,t,r,i,s,o)}function O_(n,e,t,r=()=>{},i=()=>{},s=()=>{},o=()=>{}){js(n).uploadMultiple(e,t,r,i,s,o)}function E_(n,e,t,r=()=>{},i=()=>{}){js(n).removeUpload(e,t,r,i)}function A_(n,e,t=()=>{}){js(n).cancelUpload(e,t)}var Dh=lt(Dt());function zf(n,e){return e||(e=()=>{}),(t,r=!1)=>{let i=r,s=t,o=n.$wire,a=o.get(s);return Dh.default.interceptor((u,h,f,p,y)=>{if(typeof a>"u"){console.error(`Livewire Entangle Error: Livewire property ['${s}'] cannot be found on component: ['${n.name}']`);return}let g=Dh.default.entangle({get(){return o.get(t)},set(v){o.set(t,v,i)}},{get(){return h()},set(v){f(v)}});return e(()=>g()),k_(o.get(t))},u=>{Object.defineProperty(u,"live",{get(){return i=!0,u}})})(a)}}function k_(n){return typeof n=="object"?JSON.parse(JSON.stringify(n)):n}var Nn=[];function nt(n,e){return Nn[n]||(Nn[n]=[]),Nn[n].push(e),()=>{Nn[n]=Nn[n].filter(t=>t!==e)}}function _t(n,...e){let t=Nn[n]||[],r=[];for(let i=0;i<t.length;i++){let s=t[i](...e);Hf(s)&&r.push(s)}return i=>Xf(r,i)}async function Vf(n,...e){let t=Nn[n]||[],r=[];for(let i=0;i<t.length;i++){let s=await t[i](...e);Hf(s)&&r.push(s)}return i=>Xf(r,i)}function Xf(n,e){let t=e;for(let r=0;r<n.length;r++){let i=n[r](t);i!==void 0&&(t=i)}return t}function qf(n){let e=document.createElement("html");e.innerHTML=n,e.querySelectorAll("a").forEach(i=>i.setAttribute("target","_top"));let t=document.getElementById("livewire-error");typeof t<"u"&&t!=null?t.innerHTML="":(t=document.createElement("div"),t.id="livewire-error",t.style.position="fixed",t.style.width="100vw",t.style.height="100vh",t.style.padding="50px",t.style.backgroundColor="rgba(0, 0, 0, .6)",t.style.zIndex=2e5);let r=document.createElement("iframe");r.style.backgroundColor="#17161A",r.style.borderRadius="5px",r.style.width="100%",r.style.height="100%",t.appendChild(r),document.body.prepend(t),document.body.style.overflow="hidden",r.contentWindow.document.open(),r.contentWindow.document.write(e.outerHTML),r.contentWindow.document.close(),t.addEventListener("click",()=>Ph(t)),t.setAttribute("tabindex",0),t.addEventListener("keydown",i=>{i.key==="Escape"&&Ph(t)}),t.focus()}function Ph(n){n.outerHTML="",document.body.style.overflow="visible"}var D_=class{constructor(){this.commits=new Set}add(n){this.commits.add(n)}delete(n){this.commits.delete(n)}hasCommitFor(n){return!!this.findCommitByComponent(n)}findCommitByComponent(n){for(let[e,t]of this.commits.entries())if(t.component===n)return t}shouldHoldCommit(n){return!n.isolate}empty(){return this.commits.size===0}async send(){this.prepare(),await R_(this)}prepare(){this.commits.forEach(n=>n.prepare())}payload(){let n=[],e=[],t=[];return this.commits.forEach(s=>{let[o,a,c]=s.toRequestPayload();n.push(o),e.push(a),t.push(c)}),[n,s=>e.forEach(o=>o(s.shift())),()=>t.forEach(s=>s())]}},P_=class{constructor(n){this.component=n,this.isolate=!1,this.calls=[],this.receivers=[],this.resolvers=[]}addResolver(n){this.resolvers.push(n)}addCall(n,e,t){this.calls.push({path:"",method:n,params:e,handleReturn(r){t(r)}})}prepare(){_t("commit.prepare",{component:this.component})}toRequestPayload(){let n=Rc(this.component.canonical,this.component.ephemeral),e=this.component.mergeQueuedUpdates(n),t={snapshot:this.component.snapshotEncoded,updates:e,calls:this.calls.map(p=>({path:p.path,method:p.method,params:p.params}))},r=[],i=[],s=[],o=p=>r.forEach(y=>y(p)),a=()=>i.forEach(p=>p()),c=()=>s.forEach(p=>p()),u=_t("commit",{component:this.component,commit:t,succeed:p=>{r.push(p)},fail:p=>{i.push(p)},respond:p=>{s.push(p)}});return[t,p=>{let{snapshot:y,effects:g}=p;if(c(),this.component.mergeNewSnapshot(y,g,e),this.component.processEffects(this.component.effects),g.returns){let b=g.returns;this.calls.map(({handleReturn:C})=>C).forEach((C,E)=>{C(b[E])})}let v=JSON.parse(y);u({snapshot:v,effects:g}),this.resolvers.forEach(b=>b()),o(p)},()=>{c(),a()}]}},M_=class{constructor(){this.commits=new Set,this.pools=new Set}add(n){let e=this.findCommitOr(n,()=>{let t=new P_(n);return this.commits.add(t),t});return j_(e,()=>{this.findPoolWithComponent(e.component)||this.createAndSendNewPool()}),e}findCommitOr(n,e){for(let[t,r]of this.commits.entries())if(r.component===n)return r;return e()}findPoolWithComponent(n){for(let[e,t]of this.pools.entries())if(t.hasCommitFor(n))return t}createAndSendNewPool(){_t("commit.pooling",{commits:this.commits});let n=this.corraleCommitsIntoPools();this.commits.clear(),_t("commit.pooled",{pools:n}),n.forEach(e=>{e.empty()||(this.pools.add(e),e.send().then(()=>{this.pools.delete(e),this.sendAnyQueuedCommits()}))})}corraleCommitsIntoPools(){let n=new Set;for(let[e,t]of this.commits.entries()){let r=!1;if(n.forEach(i=>{i.shouldHoldCommit(t)&&(i.add(t),r=!0)}),!r){let i=new D_;i.add(t),n.add(i)}}return n}sendAnyQueuedCommits(){this.commits.size>0&&this.createAndSendNewPool()}},Cl=new WeakMap;function j_(n,e){Cl.has(n)||Cl.set(n,setTimeout(()=>{e(),Cl.delete(n)},5))}var Yf=new M_;async function $f(n){let e=Yf.add(n),t=new Promise(r=>{e.addResolver(r)});return t.commit=e,t}async function L_(n,e,t){let r=Yf.add(n),i=new Promise(s=>{r.addCall(e,t,o=>s(o))});return i.commit=r,i}async function R_(n){let[e,t,r]=n.payload(),i={method:"POST",body:JSON.stringify({_token:Uf(),components:e}),headers:{"Content-type":"application/json","X-Livewire":""}},s=[],o=[],a=[],c=C=>s.forEach(E=>E(C)),u=C=>o.forEach(E=>E(C)),h=C=>a.forEach(E=>E(C)),f=_t("request.profile",i),p=w_();_t("request",{url:p,options:i,payload:i.body,respond:C=>a.push(C),succeed:C=>s.push(C),fail:C=>o.push(C)});let y;try{y=await fetch(p,i)}catch{f({content:"{}",failed:!0}),r(),u({status:503,content:null,preventDefault:()=>{}});return}let g={status:y.status,response:y};h(g),y=g.response;let v=await y.text();if(!y.ok){f({content:"{}",failed:!0});let C=!1;return r(),u({status:y.status,content:v,preventDefault:()=>C=!0}),C?void 0:(y.status===419&&F_(),I_(v))}if(y.redirected&&(window.location.href=y.url),Wf(v)){let C;[C,v]=x_(v),qf(C),f({content:"{}",failed:!0})}else f({content:v,failed:!1});let{components:b,assets:_}=JSON.parse(v);await Vf("payload.intercept",{components:b,assets:_}),await t(b),c({status:y.status,json:JSON.parse(v)})}function F_(){confirm(`This page has expired.
Would you like to refresh the page?`)&&window.location.reload()}function I_(n){qf(n)}var Gf=lt(Dt()),Fc={},Kf;function Ot(n,e,t=null){Fc[n]=e}function B_(n){Kf=n}var Mh={on:"$on",el:"$el",id:"$id",js:"$js",get:"$get",set:"$set",call:"$call",hook:"$hook",commit:"$commit",watch:"$watch",entangle:"$entangle",dispatch:"$dispatch",dispatchTo:"$dispatchTo",dispatchSelf:"$dispatchSelf",upload:"$upload",uploadMultiple:"$uploadMultiple",removeUpload:"$removeUpload",cancelUpload:"$cancelUpload"};function N_(n,e){return new Proxy({},{get(t,r){if(r==="__instance")return n;if(r in Mh)return jh(n,Mh[r]);if(r in Fc)return jh(n,r);if(r in e)return e[r];if(!["then"].includes(r))return H_(n)(r)},set(t,r,i){return r in e&&(e[r]=i),!0}})}function jh(n,e){return Fc[e](n)}function H_(n){return Kf(n)}Gf.default.magic("wire",(n,{cleanup:e})=>{let t;return new Proxy({},{get(r,i){return t||(t=fn(n)),["$entangle","entangle"].includes(i)?zf(t,e):t.$wire[i]},set(r,i,s){return t||(t=fn(n)),t.$wire[i]=s,!0}})});Ot("__instance",n=>n);Ot("$get",n=>(e,t=!0)=>sn(t?n.reactive:n.ephemeral,e));Ot("$el",n=>n.el);Ot("$id",n=>n.id);Ot("$js",n=>{let e=n.addJsAction.bind(n),t=n.getJsActions();return Object.keys(t).forEach(r=>{e[r]=n.getJsAction(r)}),e});Ot("$set",n=>async(e,t,r=!0)=>(ba(n.reactive,e,t),r?(n.queueUpdate(e,t),await $f(n)):Promise.resolve()));Ot("$call",n=>async(e,...t)=>await n.$wire[e](...t));Ot("$entangle",n=>(e,t=!1)=>zf(n)(e,t));Ot("$toggle",n=>(e,t=!0)=>n.$wire.set(e,!n.$wire.get(e),t));Ot("$watch",n=>(e,t)=>{let r=()=>sn(n.reactive,e),i=Gf.default.watch(r,t);n.addCleanup(i)});Ot("$refresh",n=>n.$wire.$commit);Ot("$commit",n=>async()=>await $f(n));Ot("$on",n=>(...e)=>J_(n,...e));Ot("$hook",n=>(e,t)=>{let r=nt(e,({component:i,...s})=>{if(i===void 0)return t(s);if(i.id===n.id)return t({component:i,...s})});return n.addCleanup(r),r});Ot("$dispatch",n=>(...e)=>Zf(n,...e));Ot("$dispatchSelf",n=>(...e)=>Ai(n,...e));Ot("$dispatchTo",()=>(...n)=>Ic(...n));Ot("$upload",n=>(...e)=>T_(n,...e));Ot("$uploadMultiple",n=>(...e)=>O_(n,...e));Ot("$removeUpload",n=>(...e)=>E_(n,...e));Ot("$cancelUpload",n=>(...e)=>A_(n,...e));var Tl=new WeakMap;Ot("$parent",n=>{if(Tl.has(n))return Tl.get(n).$wire;let e=n.parent;return Tl.set(n,e),e.$wire});var Ei=new WeakMap;function U_(n,e,t){Ei.has(n)||Ei.set(n,{});let r=Ei.get(n);r[e]=t,Ei.set(n,r)}B_(n=>e=>async(...t)=>{if(t.length===1&&t[0]instanceof Event&&(t=[]),Ei.has(n)){let r=Ei.get(n);if(typeof r[e]=="function")return r[e](t)}return await L_(n,e,t)});var W_=class{constructor(n){if(n.__livewire)throw"Component already initialized";if(n.__livewire=this,this.el=n,this.id=n.getAttribute("wire:id"),this.__livewireId=this.id,this.snapshotEncoded=n.getAttribute("wire:snapshot"),this.snapshot=JSON.parse(this.snapshotEncoded),!this.snapshot)throw"Snapshot missing on Livewire component with id: "+this.id;this.name=this.snapshot.memo.name,this.effects=JSON.parse(n.getAttribute("wire:effects")),this.originalEffects=Ln(this.effects),this.canonical=Si(Ln(this.snapshot.data)),this.ephemeral=Si(Ln(this.snapshot.data)),this.reactive=Alpine.reactive(this.ephemeral),this.queuedUpdates={},this.jsActions={},this.$wire=N_(this,this.reactive),this.cleanups=[],this.processEffects(this.effects)}mergeNewSnapshot(n,e,t={}){let r=JSON.parse(n),i=Ln(this.canonical),s=this.applyUpdates(i,t),o=Si(Ln(r.data)),a=Rc(s,o);this.snapshotEncoded=n,this.snapshot=r,this.effects=e,this.canonical=Si(Ln(r.data));let c=Si(Ln(r.data));return Object.entries(a).forEach(([u,h])=>{let f=u.split(".")[0];this.reactive[f]=c[f]}),a}queueUpdate(n,e){this.queuedUpdates[n]=e}mergeQueuedUpdates(n){return Object.entries(this.queuedUpdates).forEach(([e,t])=>{Object.entries(n).forEach(([r,i])=>{r.startsWith(t)&&delete n[r]}),n[e]=t}),this.queuedUpdates=[],n}applyUpdates(n,e){for(let t in e)ba(n,t,e[t]);return n}replayUpdate(n,e){let t={...this.effects,html:e};this.mergeNewSnapshot(JSON.stringify(n),t),this.processEffects({html:e})}processEffects(n){_t("effects",this,n),_t("effect",{component:this,effects:n,cleanup:e=>this.addCleanup(e)})}get children(){let n=this.snapshot.memo;return Object.values(n.children).map(t=>t[1]).map(t=>X_(t))}get parent(){return fn(this.el.parentElement)}inscribeSnapshotAndEffectsOnElement(){let n=this.el;n.setAttribute("wire:snapshot",this.snapshotEncoded);let e=this.originalEffects.listeners?{listeners:this.originalEffects.listeners}:{};this.originalEffects.url&&(e.url=this.originalEffects.url),this.originalEffects.scripts&&(e.scripts=this.originalEffects.scripts),n.setAttribute("wire:effects",JSON.stringify(e))}addJsAction(n,e){this.jsActions[n]=e}hasJsAction(n){return this.jsActions[n]!==void 0}getJsAction(n){return this.jsActions[n].bind(this.$wire)}getJsActions(){return this.jsActions}addCleanup(n){this.cleanups.push(n)}cleanup(){for(delete this.el.__livewire;this.cleanups.length>0;)this.cleanups.pop()()}},dn={};function z_(n){let e=new W_(n);if(dn[e.id])throw"Component already registered";return _t("component.init",{component:e,cleanup:r=>e.addCleanup(r)}),dn[e.id]=e,e}function V_(n){let e=dn[n];e&&(e.cleanup(),delete dn[n])}function X_(n){let e=dn[n];if(!e)throw"Component not found: "+n;return e}function fn(n,e=!0){let t=Alpine.findClosest(n,r=>r.__livewire);if(!t){if(e)throw"Could not find Livewire component in DOM tree";return}return t.__livewire}function Jf(n){return Object.values(dn).filter(e=>n==e.name)}function q_(n){return Jf(n).map(e=>e.$wire)}function Y_(n){let e=dn[n];return e&&e.$wire}function $_(){return Object.values(dn)[0].$wire}function G_(){return Object.values(dn)}function Zf(n,e,t){_a(n.el,e,t)}function K_(n,e){_a(window,n,e)}function Ai(n,e,t){_a(n.el,e,t,!1)}function Ic(n,e,t){Jf(n).forEach(i=>{_a(i.el,e,t,!1)})}function J_(n,e,t){n.el.addEventListener(e,r=>{t(r.detail)})}function Z_(n,e){let t=r=>{r.__livewire&&e(r.detail)};return window.addEventListener(n,t),()=>{window.removeEventListener(n,t)}}function _a(n,e,t,r=!0){let i=new CustomEvent(e,{bubbles:r,detail:t});i.__livewire={name:e,params:t,receivedBy:[]},n.dispatchEvent(i)}var Ts=new Set;function fs(n){return n.match(new RegExp("wire:"))}function Ql(n,e){let[t,...r]=e.replace(new RegExp("wire:"),"").split(".");return new r0(t,r,e,n)}function vr(n,e){Ts.has(n)||(Ts.add(n),nt("directive.init",({el:t,component:r,directive:i,cleanup:s})=>{i.value===n&&e({el:t,directive:i,component:r,$wire:r.$wire,cleanup:s})}))}function Q_(n,e){Ts.has(n)||(Ts.add(n),nt("directive.global.init",({el:t,directive:r,cleanup:i})=>{r.value===n&&e({el:t,directive:r,cleanup:i})}))}function Bc(n){return new t0(n)}function e0(n){return Ts.has(n)}var t0=class{constructor(n){this.el=n,this.directives=this.extractTypeModifiersAndValue()}all(){return this.directives}has(n){return this.directives.map(e=>e.value).includes(n)}missing(n){return!this.has(n)}get(n){return this.directives.find(e=>e.value===n)}extractTypeModifiersAndValue(){return Array.from(this.el.getAttributeNames().filter(n=>fs(n)).map(n=>Ql(this.el,n)))}},r0=class{constructor(n,e,t,r){this.rawName=this.raw=t,this.el=r,this.eventContext,this.value=n,this.modifiers=e,this.expression=this.el.getAttribute(this.rawName)}get method(){const{method:n}=this.parseOutMethodAndParams(this.expression);return n}get params(){const{params:n}=this.parseOutMethodAndParams(this.expression);return n}parseOutMethodAndParams(n){let e=n,t=[];const r=e.match(/(.*?)\((.*)\)/s);return r&&(e=r[1],t=new Function("$event",`return (function () {
                for (var l=arguments.length, p=new Array(l), k=0; k<l; k++) {
                    p[k] = arguments[k];
                }
                return [].concat(p);
            })(${r[2]})`)(this.eventContext)),{method:e,params:t}}},n0=lt(u_()),i0=lt(h_()),s0=lt(d_()),o0=lt(f_()),a0=lt(g_()),l0=lt(p_()),ec=class{constructor(n,e){this.url=n,this.html=e}},Ur={currentKey:null,currentUrl:null,keys:[],lookup:{},limit:10,has(n){return this.lookup[n]!==void 0},retrieve(n){let e=this.lookup[n];if(e===void 0)throw"No back button cache found for current location: "+n;return e},replace(n,e){this.has(n)?this.lookup[n]=e:this.push(n,e)},push(n,e){this.lookup[n]=e;let t=this.keys.indexOf(n);t>-1&&this.keys.splice(t,1),this.keys.unshift(n),this.trim()},trim(){for(let n of this.keys.splice(this.limit))delete this.lookup[n]}};function c0(){let n=new URL(window.location.href,document.baseURI);Qf(n,document.documentElement.outerHTML)}function u0(n,e){let t=document.documentElement.outerHTML;Ur.replace(n,new ec(e,t))}function h0(n,e){let t;n(r=>t=r),window.addEventListener("popstate",r=>{let i=r.state||{},s=i.alpine||{};if(Object.keys(i).length!==0&&s.snapshotIdx)if(Ur.has(s.snapshotIdx)){let o=Ur.retrieve(s.snapshotIdx);e(o.html,o.url,Ur.currentUrl,Ur.currentKey)}else t(s.url)})}function d0(n,e){f0(e,n)}function f0(n,e){eg("pushState",n,e)}function Qf(n,e){eg("replaceState",n,e)}function eg(n,e,t){let r=e.toString()+"-"+Math.random();n==="pushState"?Ur.push(r,new ec(e,t)):Ur.replace(r=Ur.currentKey??r,new ec(e,t));let i=history.state||{};i.alpine||(i.alpine={}),i.alpine.snapshotIdx=r,i.alpine.url=e.toString();try{history[n](i,JSON.stringify(document.title),e),Ur.currentKey=r,Ur.currentUrl=e}catch(s){s instanceof DOMException&&s.name==="SecurityError"&&console.error("Livewire: You can't use wire:navigate with a link to a different root domain: "+e),console.error(s)}}function g0(n,e){let t=s=>!s.isTrusted,r=s=>s.which>1||s.altKey||s.ctrlKey||s.metaKey||s.shiftKey,i=s=>s.which!==13||s.altKey||s.ctrlKey||s.metaKey||s.shiftKey;n.addEventListener("click",s=>{if(t(s)){s.preventDefault(),e(o=>o());return}r(s)||s.preventDefault()}),n.addEventListener("mousedown",s=>{r(s)||(s.preventDefault(),e(o=>{let a=c=>{c.preventDefault(),o(),n.removeEventListener("mouseup",a)};n.addEventListener("mouseup",a)}))}),n.addEventListener("keydown",s=>{i(s)||(s.preventDefault(),e(o=>o()))})}function p0(n,e=60,t){n.addEventListener("mouseenter",r=>{let i=setTimeout(()=>{t(r)},e),s=()=>{clearTimeout(i),n.removeEventListener("mouseleave",s)};n.addEventListener("mouseleave",s)})}function Lh(n){return ji(n.getAttribute("href"))}function ji(n){return n!==null&&new URL(n,document.baseURI)}function wa(n){return n.pathname+n.search+n.hash}function m0(n,e){let t=wa(n);tg(t,(r,i)=>{e(r,i)})}function tg(n,e){let t={headers:{"X-Livewire-Navigate":""}};_t("navigate.request",{url:n,options:t});let r;fetch(n,t).then(i=>{let s=ji(n);return r=ji(i.url),s.pathname+s.search===r.pathname+r.search&&(r.hash=s.hash),i.text()}).then(i=>{e(i,r)})}var hr={};function Rh(n,e){let t=wa(n);hr[t]||(hr[t]={finished:!1,html:null,whenFinished:()=>{}},tg(t,(r,i)=>{e(r,i)}))}function Fh(n,e,t){let r=hr[wa(e)];r.html=n,r.finished=!0,r.finalDestination=t,r.whenFinished()}function v0(n,e,t){let r=wa(n);if(!hr[r])return t();if(hr[r].finished){let i=hr[r].html,s=hr[r].finalDestination;return delete hr[r],e(i,s)}else hr[r].whenFinished=()=>{let i=hr[r].html,s=hr[r].finalDestination;delete hr[r],e(i,s)}}var Nc=lt(Dt());function Ih(n){Nc.default.mutateDom(()=>{n.querySelectorAll("[data-teleport-template]").forEach(e=>e._x_teleport.remove())})}function Bh(n){Nc.default.mutateDom(()=>{n.querySelectorAll("[data-teleport-target]").forEach(e=>e.remove())})}function Nh(n){Nc.default.walk(n,(e,t)=>{e._x_teleport&&(e._x_teleportPutBack(),t())})}function y0(n){return n.hasAttribute("data-teleport-target")}function Hh(){document.body.setAttribute("data-scroll-x",document.body.scrollLeft),document.body.setAttribute("data-scroll-y",document.body.scrollTop),document.querySelectorAll(["[x-navigate\\:scroll]","[wire\\:scroll]"]).forEach(n=>{n.setAttribute("data-scroll-x",n.scrollLeft),n.setAttribute("data-scroll-y",n.scrollTop)})}function Uh(){let n=e=>{e.hasAttribute("data-scroll-x")?(e.scrollTo({top:Number(e.getAttribute("data-scroll-y")),left:Number(e.getAttribute("data-scroll-x")),behavior:"instant"}),e.removeAttribute("data-scroll-x"),e.removeAttribute("data-scroll-y")):window.scrollTo({top:0,left:0,behavior:"instant"})};queueMicrotask(()=>{queueMicrotask(()=>{n(document.body),document.querySelectorAll(["[x-navigate\\:scroll]","[wire\\:scroll]"]).forEach(n)})})}var tc=lt(Dt()),ys={};function Wh(n){ys={},document.querySelectorAll("[x-persist]").forEach(e=>{ys[e.getAttribute("x-persist")]=e,n(e),tc.default.mutateDom(()=>{e.remove()})})}function zh(n){let e=[];document.querySelectorAll("[x-persist]").forEach(t=>{let r=ys[t.getAttribute("x-persist")];r&&(e.push(t.getAttribute("x-persist")),r._x_wasPersisted=!0,n(r,t),tc.default.mutateDom(()=>{t.replaceWith(r)}))}),Object.entries(ys).forEach(([t,r])=>{e.includes(t)||tc.default.destroyTree(r)}),ys={}}function b0(n){return n.hasAttribute("x-persist")}var xa=lt(m_());xa.default.configure({minimum:.1,trickleSpeed:200,showSpinner:!1,parent:"body"});S0();var rc=!1;function _0(){rc=!0,setTimeout(()=>{rc&&xa.default.start()},150)}function w0(){rc=!1,xa.default.done()}function x0(){xa.default.remove()}function S0(){let n=document.createElement("style");n.innerHTML=`/* Make clicks pass-through */

    #nprogress {
      pointer-events: none;
    }

    #nprogress .bar {
      background: var(--livewire-progress-bar-color, #29d);

      position: fixed;
      z-index: 1031;
      top: 0;
      left: 0;

      width: 100%;
      height: 2px;
    }

    /* Fancy blur effect */
    #nprogress .peg {
      display: block;
      position: absolute;
      right: 0px;
      width: 100px;
      height: 100%;
      box-shadow: 0 0 10px var(--livewire-progress-bar-color, #29d), 0 0 5px var(--livewire-progress-bar-color, #29d);
      opacity: 1.0;

      -webkit-transform: rotate(3deg) translate(0px, -4px);
          -ms-transform: rotate(3deg) translate(0px, -4px);
              transform: rotate(3deg) translate(0px, -4px);
    }

    /* Remove these to get rid of the spinner */
    #nprogress .spinner {
      display: block;
      position: fixed;
      z-index: 1031;
      top: 15px;
      right: 15px;
    }

    #nprogress .spinner-icon {
      width: 18px;
      height: 18px;
      box-sizing: border-box;

      border: solid 2px transparent;
      border-top-color: var(--livewire-progress-bar-color, #29d);
      border-left-color: var(--livewire-progress-bar-color, #29d);
      border-radius: 50%;

      -webkit-animation: nprogress-spinner 400ms linear infinite;
              animation: nprogress-spinner 400ms linear infinite;
    }

    .nprogress-custom-parent {
      overflow: hidden;
      position: relative;
    }

    .nprogress-custom-parent #nprogress .spinner,
    .nprogress-custom-parent #nprogress .bar {
      position: absolute;
    }

    @-webkit-keyframes nprogress-spinner {
      0%   { -webkit-transform: rotate(0deg); }
      100% { -webkit-transform: rotate(360deg); }
    }
    @keyframes nprogress-spinner {
      0%   { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    `;let e=__();e&&(n.nonce=e),document.head.appendChild(n)}function Vh(n){rg()&&n.querySelectorAll(":popover-open").forEach(e=>{e.setAttribute("data-navigate-popover-open","");let t=e.getAnimations();e._pausedAnimations=t.map(r=>({keyframes:r.effect.getKeyframes(),options:{duration:r.effect.getTiming().duration,easing:r.effect.getTiming().easing,fill:r.effect.getTiming().fill,iterations:r.effect.getTiming().iterations},currentTime:r.currentTime,playState:r.playState})),t.forEach(r=>r.pause())})}function Xh(n){rg()&&n.querySelectorAll("[data-navigate-popover-open]").forEach(e=>{e.removeAttribute("data-navigate-popover-open"),queueMicrotask(()=>{e.isConnected&&(e.showPopover(),e.getAnimations().forEach(t=>t.finish()),e._pausedAnimations&&(e._pausedAnimations.forEach(({keyframes:t,options:r,currentTime:i,now:s,playState:o})=>{let a=e.animate(t,r);a.currentTime=i}),delete e._pausedAnimations))})})}function rg(){return typeof document.createElement("div").showPopover=="function"}var Ol=[],ng=["data-csrf","aria-hidden"];function qh(n,e){let t=new DOMParser().parseFromString(n,"text/html"),r=t.documentElement,i=document.adoptNode(t.body),s=document.adoptNode(t.head);Ol=Ol.concat(Array.from(document.body.querySelectorAll("script")).map(c=>ag(lg(c.outerHTML,ng))));let o=()=>{};T0(r),O0(s).finally(()=>{o()}),C0(i,Ol);let a=document.body;document.body.replaceWith(i),Alpine.destroyTree(a),e(c=>o=c)}function C0(n,e){n.querySelectorAll("script").forEach(t=>{if(t.hasAttribute("data-navigate-once")){let r=ag(lg(t.outerHTML,ng));if(e.includes(r))return}t.replaceWith(ig(t))})}function T0(n){let e=document.documentElement;Array.from(n.attributes).forEach(t=>{const r=t.name,i=t.value;e.getAttribute(r)!==i&&e.setAttribute(r,i)}),Array.from(e.attributes).forEach(t=>{n.hasAttribute(t.name)||e.removeAttribute(t.name)})}function O0(n){let e=Array.from(document.head.children),t=e.map(s=>s.outerHTML),r=document.createDocumentFragment(),i=[];for(let s of Array.from(n.children))if($h(s))if(t.includes(s.outerHTML))r.appendChild(s);else if(sg(s)&&A0(s,e)&&setTimeout(()=>window.location.reload()),og(s))try{i.push(E0(ig(s)))}catch{}else document.head.appendChild(s);for(let s of Array.from(document.head.children))$h(s)||s.remove();for(let s of Array.from(n.children))s.tagName.toLowerCase()!=="noscript"&&document.head.appendChild(s);return Promise.all(i)}async function E0(n){return new Promise((e,t)=>{n.src?(n.onload=()=>e(),n.onerror=()=>t()):e(),document.head.appendChild(n)})}function ig(n){let e=document.createElement("script");e.textContent=n.textContent,e.async=n.async;for(let t of n.attributes)e.setAttribute(t.name,t.value);return e}function sg(n){return n.hasAttribute("data-navigate-track")}function A0(n,e){let[t,r]=Yh(n);return e.some(i=>{if(!sg(i))return!1;let[s,o]=Yh(i);if(s===t&&r!==o)return!0})}function Yh(n){return(og(n)?n.src:n.href).split("?")}function $h(n){return n.tagName.toLowerCase()==="link"&&n.getAttribute("rel").toLowerCase()==="stylesheet"||n.tagName.toLowerCase()==="style"||n.tagName.toLowerCase()==="script"}function og(n){return n.tagName.toLowerCase()==="script"}function ag(n){return n.split("").reduce((e,t)=>(e=(e<<5)-e+t.charCodeAt(0),e&e),0)}function lg(n,e){let t=n;return e.forEach(r=>{const i=new RegExp(`${r}="[^"]*"|${r}='[^']*'`,"g");t=t.replace(i,"")}),t=t.replaceAll(" ",""),t.trim()}var El=!0;function k0(n){n.navigate=t=>{let r=ji(t);Jr("alpine:navigate",{url:r,history:!1,cached:!1})||e(r)},n.navigate.disableProgressBar=()=>{El=!1},n.addInitSelector(()=>`[${n.prefixed("navigate")}]`),n.directive("navigate",(t,{modifiers:r})=>{r.includes("hover")&&p0(t,60,()=>{let s=Lh(t);s&&Rh(s,(o,a)=>{Fh(o,s,a)})}),g0(t,s=>{let o=Lh(t);o&&(Rh(o,(a,c)=>{Fh(a,o,c)}),s(()=>{Jr("alpine:navigate",{url:o,history:!1,cached:!1})||e(o)}))})});function e(t,r=!0){El&&_0(),D0(t,(i,s)=>{Jr("alpine:navigating"),Hh(),El&&w0(),P0(),c0(),Gh(n,o=>{Wh(a=>{Ih(a),Vh(a)}),r?d0(i,s):Qf(s,i),qh(i,a=>{Bh(document.body),zh((c,u)=>{Nh(c),Xh(c)}),Uh(),a(()=>{o(()=>{setTimeout(()=>{}),Kh(n),Jr("alpine:navigated")})})})})})}h0(t=>{t(r=>{let i=ji(r);if(Jr("alpine:navigate",{url:i,history:!0,cached:!1}))return;e(i,!1)})},(t,r,i,s)=>{let o=ji(r);Jr("alpine:navigate",{url:o,history:!0,cached:!0})||(Hh(),Jr("alpine:navigating"),u0(i,s),Gh(n,c=>{Wh(u=>{Ih(u),Vh(u)}),qh(t,()=>{x0(),Bh(document.body),zh((u,h)=>{Nh(u),Xh(u)}),Uh(),c(()=>{Kh(n),Jr("alpine:navigated")})})}))}),setTimeout(()=>{Jr("alpine:navigated")})}function D0(n,e){v0(n,e,()=>{m0(n,e)})}function Gh(n,e){n.stopObservingMutations(),e(t=>{n.startObservingMutations(),queueMicrotask(()=>{t()})})}function Jr(n,e){let t=new CustomEvent(n,{cancelable:!0,bubbles:!0,detail:e});return document.dispatchEvent(t),t.defaultPrevented}function Kh(n){n.initTree(document.body,void 0,(e,t)=>{e._x_wasPersisted&&t()})}function P0(){let n=function(e,t){Alpine.walk(e,(r,i)=>{b0(r)&&i(),y0(r)?i():t(r,i)})};Alpine.destroyTree(document.body,n)}function M0(n){n.magic("queryString",(e,{interceptor:t})=>{let r,i=!1,s=!1;return t((o,a,c,u,h)=>{let f=r||u,{initial:p,replace:y,push:g,pop:v}=nc(f,o,i);return c(p),s?(n.effect(()=>g(a())),v(async b=>{c(b),await Promise.resolve()})):n.effect(()=>y(a())),p},o=>{o.alwaysShow=()=>(i=!0,o),o.usePush=()=>(s=!0,o),o.as=a=>(r=a,o)})}),n.history={track:nc}}function nc(n,e,t=!1,r=null){let{has:i,get:s,set:o,remove:a}=L0(),c=new URL(window.location.href),u=i(c,n),h=u?s(c,n):e,f=JSON.stringify(h),p=[!1,null,void 0].includes(r)?e:JSON.stringify(r),y=_=>JSON.stringify(_)===f,g=_=>JSON.stringify(_)===p;t&&(c=o(c,n,h)),Jh(c,n,{value:h});let v=!1,b=(_,C)=>{if(v)return;let E=new URL(window.location.href);!t&&!u&&y(C)||C===void 0||!t&&g(C)?E=a(E,n):E=o(E,n,C),_(E,n,{value:C})};return{initial:h,replace(_){b(Jh,_)},push(_){b(j0,_)},pop(_){let C=E=>{!E.state||!E.state.alpine||Object.entries(E.state.alpine).forEach(([j,{value:I}])=>{if(j!==n)return;v=!0;let V=_(I);V instanceof Promise?V.finally(()=>v=!1):v=!1})};return window.addEventListener("popstate",C),()=>window.removeEventListener("popstate",C)}}}function Jh(n,e,t){let r=window.history.state||{};r.alpine||(r.alpine={}),r.alpine[e]=Hc(t);try{window.history.replaceState(r,"",n.toString())}catch(i){console.error(i)}}function j0(n,e,t){let r=window.history.state||{};r.alpine||(r.alpine={}),r={alpine:{...r.alpine,[e]:Hc(t)}};try{window.history.pushState(r,"",n.toString())}catch(i){console.error(i)}}function Hc(n){if(n!==void 0)return JSON.parse(JSON.stringify(n))}function L0(){return{has(n,e){let t=n.search;if(!t)return!1;let r=Lo(t,e);return Object.keys(r).includes(e)},get(n,e){let t=n.search;return t?Lo(t,e)[e]:!1},set(n,e,t){let r=Lo(n.search,e);return r[e]=cg(Hc(t)),n.search=Zh(r),n},remove(n,e){let t=Lo(n.search,e);return delete t[e],n.search=Zh(t),n}}}function cg(n){if(!Lc(n))return n;for(let e in n)n[e]===null?delete n[e]:n[e]=cg(n[e]);return n}function Zh(n){let e=i=>typeof i=="object"&&i!==null,t=(i,s={},o="")=>(Object.entries(i).forEach(([a,c])=>{let u=o===""?a:`${o}[${a}]`;c===null?s[u]="":e(c)?s={...s,...t(c,s,u)}:s[u]=encodeURIComponent(c).replaceAll("%20","+").replaceAll("%2C",",")}),s),r=t(n);return Object.entries(r).map(([i,s])=>`${i}=${s}`).join("&")}function Lo(n,e){if(n=n.replace("?",""),n==="")return{};let t=(s,o,a)=>{let[c,u,...h]=s.split(".");if(!u)return a[s]=o;a[c]===void 0&&(a[c]=isNaN(u)?{}:[]),t([u,...h].join("."),o,a[c])},r=n.split("&").map(s=>s.split("=")),i=Object.create(null);return r.forEach(([s,o])=>{if(typeof o>"u")return;o=decodeURIComponent(o.replaceAll("+","%20"));let a=decodeURIComponent(s);if(!(a.includes("[")&&a.startsWith(e)))i[s]=o;else{let u=a.replaceAll("[",".").replaceAll("]","");t(u,o,i)}}),i}var R0=lt(v_()),F0=lt(y_()),jt=lt(Dt());function I0(){setTimeout(()=>B0()),wl(document,"livewire:init"),wl(document,"livewire:initializing"),jt.default.plugin(R0.default),jt.default.plugin(M0),jt.default.plugin(o0.default),jt.default.plugin(a0.default),jt.default.plugin(n0.default),jt.default.plugin(l0.default),jt.default.plugin(i0.default),jt.default.plugin(s0.default),jt.default.plugin(k0),jt.default.plugin(F0.default),jt.default.addRootSelector(()=>"[wire\\:id]"),jt.default.onAttributesAdded((n,e)=>{if(!Array.from(e).some(r=>fs(r.name)))return;let t=fn(n,!1);t&&e.forEach(r=>{if(!fs(r.name))return;let i=Ql(n,r.name);_t("directive.init",{el:n,component:t,directive:i,cleanup:s=>{jt.default.onAttributeRemoved(n,i.raw,s)}})})}),jt.default.interceptInit(jt.default.skipDuringClone(n=>{if(!Array.from(n.attributes).some(r=>fs(r.name)))return;if(n.hasAttribute("wire:id")){let r=z_(n);jt.default.onAttributeRemoved(n,"wire:id",()=>{V_(r.id)})}let e=Array.from(n.getAttributeNames()).filter(r=>fs(r)).map(r=>Ql(n,r));e.forEach(r=>{_t("directive.global.init",{el:n,directive:r,cleanup:i=>{jt.default.onAttributeRemoved(n,r.raw,i)}})});let t=fn(n,!1);t&&(_t("element.init",{el:n,component:t}),e.forEach(r=>{_t("directive.init",{el:n,component:t,directive:r,cleanup:i=>{jt.default.onAttributeRemoved(n,r.raw,i)}})}))})),jt.default.start(),setTimeout(()=>window.Livewire.initialRenderIsFinished=!0),wl(document,"livewire:initialized")}function B0(){let n=document.querySelector("script[data-update-uri][data-csrf]");if(!n)return;let e=n.closest("[wire\\:id]");e&&console.warn("Livewire: missing closing tags found. Ensure your template elements contain matching closing tags.",e)}var Uc=lt(Dt());nt("effect",({component:n,effects:e})=>{N0(n,e.listeners||[])});function N0(n,e){e.forEach(t=>{let r=i=>{i.__livewire&&i.__livewire.receivedBy.push(n),n.$wire.call("__dispatch",t,i.detail||{})};window.addEventListener(t,r),n.addCleanup(()=>window.removeEventListener(t,r)),n.el.addEventListener(t,i=>{i.__livewire&&(i.bubbles||(i.__livewire&&i.__livewire.receivedBy.push(n.id),n.$wire.call("__dispatch",t,i.detail||{})))})})}var Qh=lt(Dt()),bi=new WeakMap,ta=new Set;nt("payload.intercept",async({assets:n})=>{if(n)for(let[e,t]of Object.entries(n))await W0(e,async()=>{await z0(t)})});nt("component.init",({component:n})=>{let e=n.snapshot.memo.assets;e&&e.forEach(t=>{ta.has(t)||ta.add(t)})});nt("effect",({component:n,effects:e})=>{let t=e.scripts;t&&Object.entries(t).forEach(([r,i])=>{H0(n,r,()=>{let s=U0(i);Qh.default.dontAutoEvaluateFunctions(()=>{Qh.default.evaluate(n.el,s,{$wire:n.$wire,$js:n.$wire.$js})})})})});function H0(n,e,t){if(bi.has(n)&&bi.get(n).includes(e))return;t(),bi.has(n)||bi.set(n,[]);let r=bi.get(n);r.push(e),bi.set(n,r)}function U0(n){let t=/<script\b[^>]*>([\s\S]*?)<\/script>/gm.exec(n);return t&&t[1]?t[1].trim():""}async function W0(n,e){ta.has(n)||(await e(),ta.add(n))}async function z0(n){let e=new DOMParser().parseFromString(n,"text/html"),t=document.adoptNode(e.head);for(let r of t.children)try{await V0(r)}catch{}}async function V0(n){return new Promise((e,t)=>{if(X0(n)){let r=q0(n);r.src?(r.onload=()=>e(),r.onerror=()=>t()):e(),document.head.appendChild(r)}else document.head.appendChild(n),e()})}function X0(n){return n.tagName.toLowerCase()==="script"}function q0(n){let e=document.createElement("script");e.textContent=n.textContent,e.async=n.async;for(let t of n.attributes)e.setAttribute(t.name,t.value);return e}var ic=lt(Dt());ic.default.magic("js",n=>fn(n).$wire.js);nt("effect",({component:n,effects:e})=>{let t=e.js,r=e.xjs;t&&Object.entries(t).forEach(([i,s])=>{U_(n,i,()=>{ic.default.evaluate(n.el,s)})}),r&&r.forEach(({expression:i,params:s})=>{s=Object.values(s),ic.default.evaluate(n.el,i,{scope:n.jsActions,params:s})})});var Y0=lt(Dt());function $0(n,e,t){let r=e.parentElement?e.parentElement.tagName.toLowerCase():"div",i=document.createElement(r);i.innerHTML=t;let s;try{s=fn(e.parentElement)}catch{}s&&(i.__livewire=s);let o=i.firstElementChild;o.__livewire=n,_t("morph",{el:e,toEl:o,component:n}),Y0.default.morph(e,o,{updating:(a,c,u,h,f)=>{if(!_i(a)){if(_t("morph.updating",{el:a,toEl:c,component:n,skip:h,childrenOnly:u,skipChildren:f}),a.__livewire_replace===!0&&(a.innerHTML=c.innerHTML),a.__livewire_replace_self===!0)return a.outerHTML=c.outerHTML,h();if(a.__livewire_ignore===!0)return h();if(a.__livewire_ignore_self===!0&&u(),a.__livewire_ignore_children===!0)return f();if(ed(a)&&a.getAttribute("wire:id")!==n.id)return h();ed(a)&&(c.__livewire=n)}},updated:a=>{_i(a)||_t("morph.updated",{el:a,component:n})},removing:(a,c)=>{_i(a)||_t("morph.removing",{el:a,component:n,skip:c})},removed:a=>{_i(a)||_t("morph.removed",{el:a,component:n})},adding:a=>{_t("morph.adding",{el:a,component:n})},added:a=>{_i(a)||(fn(a).id,_t("morph.added",{el:a}))},key:a=>{if(!_i(a))return a.hasAttribute("wire:key")?a.getAttribute("wire:key"):a.hasAttribute("wire:id")?a.getAttribute("wire:id"):a.id},lookahead:!1}),_t("morphed",{el:e,component:n})}function _i(n){return typeof n.hasAttribute!="function"}function ed(n){return n.hasAttribute("wire:id")}nt("effect",({component:n,effects:e})=>{let t=e.html;t&&queueMicrotask(()=>{queueMicrotask(()=>{$0(n,n.el,t)})})});nt("effect",({component:n,effects:e})=>{G0(n,e.dispatches||[])});function G0(n,e){e.forEach(({name:t,params:r={},self:i=!1,to:s})=>{i?Ai(n,t,r):s?Ic(s,t,r):Zf(n,t,r)})}var K0=lt(Dt()),sc=new b_;nt("directive.init",({el:n,directive:e,cleanup:t,component:r})=>setTimeout(()=>{e.value==="submit"&&n.addEventListener("submit",()=>{let i=e.expression.startsWith("$parent")?r.parent.id:r.id,s=J0(n);sc.add(i,s)})}));nt("commit",({component:n,respond:e})=>{e(()=>{sc.each(n.id,t=>t()),sc.remove(n.id)})});function J0(n){let e=[];return K0.default.walk(n,(t,r)=>{if(n.contains(t)){if(t.hasAttribute("wire:ignore"))return r();Z0(t)?e.push(ew(t)):Q0(t)&&e.push(tw(t))}}),()=>{for(;e.length>0;)e.shift()()}}function Z0(n){let e=n.tagName.toLowerCase();return e==="select"||e==="button"&&n.type==="submit"||e==="input"&&(n.type==="checkbox"||n.type==="radio")}function Q0(n){return["input","textarea"].includes(n.tagName.toLowerCase())}function ew(n){let e=n.disabled?()=>{}:()=>n.disabled=!1;return n.disabled=!0,e}function tw(n){let e=n.readOnly?()=>{}:()=>n.readOnly=!1;return n.readOnly=!0,e}nt("commit.pooling",({commits:n})=>{n.forEach(e=>{let t=e.component;ug(t,r=>{r.$wire.$commit()})})});nt("commit.pooled",({pools:n})=>{rw(n).forEach(t=>{let r=t.component;ug(r,i=>{nw(n,r,i)})})});function rw(n){let e=[];return n.forEach(t=>{t.commits.forEach(r=>{e.push(r)})}),e}function nw(n,e,t){let r=td(n,e),i=td(n,t),s=i.findCommitByComponent(t);i.delete(s),r.add(s),n.forEach(o=>{o.empty()&&n.delete(o)})}function td(n,e){for(let[t,r]of n.entries())if(r.hasCommitFor(e))return r}function ug(n,e){hg(n,t=>{(iw(t)||sw(t))&&e(t)})}function iw(n){return!!n.snapshot.memo.props}function sw(n){return!!n.snapshot.memo.bindings}function hg(n,e){n.children.forEach(t=>{e(t),hg(t,e)})}nt("commit",({succeed:n})=>{n(({effects:e})=>{let t=e.download;if(!t)return;let r=window.webkitURL||window.URL,i=r.createObjectURL(ow(t.content,t.contentType)),s=document.createElement("a");s.style.display="none",s.href=i,s.download=t.name,document.body.appendChild(s),s.click(),setTimeout(function(){r.revokeObjectURL(i)},0)})});function ow(n,e="",t=512){const r=atob(n),i=[];e===null&&(e="");for(let s=0;s<r.length;s+=t){let o=r.slice(s,s+t),a=new Array(o.length);for(let u=0;u<o.length;u++)a[u]=o.charCodeAt(u);let c=new Uint8Array(a);i.push(c)}return new Blob(i,{type:e})}var oc=new WeakSet,ac=new WeakSet;nt("component.init",({component:n})=>{let e=n.snapshot.memo;e.lazyLoaded!==void 0&&(ac.add(n),e.lazyIsolated!==void 0&&e.lazyIsolated===!1&&oc.add(n))});nt("commit.pooling",({commits:n})=>{n.forEach(e=>{ac.has(e.component)&&(oc.has(e.component)?(e.isolate=!1,oc.delete(e.component)):e.isolate=!0,ac.delete(e.component))})});var rd=lt(Dt());nt("effect",({component:n,effects:e,cleanup:t})=>{let r=e.url;r&&Object.entries(r).forEach(([i,s])=>{let{name:o,as:a,use:c,alwaysShow:u,except:h}=aw(i,s);a||(a=o);let f=[!1,null,void 0].includes(h)?sn(n.ephemeral,o):h,{replace:p,push:y,pop:g}=nc(a,f,u,h);if(c==="replace"){let v=rd.default.effect(()=>{p(sn(n.reactive,o))});t(()=>rd.default.release(v))}else if(c==="push"){let v=nt("commit",({component:_,succeed:C})=>{if(n!==_)return;let E=sn(n.canonical,o);C(()=>{let j=sn(n.canonical,o);JSON.stringify(E)!==JSON.stringify(j)&&y(j)})}),b=g(async _=>{await n.$wire.set(o,_),document.querySelectorAll("input").forEach(C=>{C._x_forceModelUpdate&&C._x_forceModelUpdate(C._x_model.get())})});t(()=>{v(),b()})}})});function aw(n,e){let t={use:"replace",alwaysShow:!1};return typeof e=="string"?{...t,name:e,as:e}:{...{...t,name:n,as:n},...e}}nt("request",({options:n})=>{window.Echo&&(n.headers["X-Socket-ID"]=window.Echo.socketId())});nt("effect",({component:n,effects:e})=>{(e.listeners||[]).forEach(r=>{if(r.startsWith("echo")){if(typeof window.Echo>"u"){console.warn("Laravel Echo cannot be found");return}let i=r.split(/(echo:|echo-)|:|,/);i[1]=="echo:"&&i.splice(2,0,"channel",void 0),i[2]=="notification"&&i.push(void 0,void 0);let[s,o,a,c,u,h,f]=i;if(["channel","private","encryptedPrivate"].includes(a)){let p=y=>Ai(n,r,[y]);window.Echo[a](u).listen(f,p),n.addCleanup(()=>{window.Echo[a](u).stopListening(f,p)})}else if(a=="presence")if(["here","joining","leaving"].includes(f))window.Echo.join(u)[f](p=>{Ai(n,r,[p])});else{let p=y=>Ai(n,r,[y]);window.Echo.join(u).listen(f,p),n.addCleanup(()=>{window.Echo.leaveChannel(u)})}else a=="notification"?window.Echo.private(u).notification(p=>{Ai(n,r,[p])}):console.warn("Echo channel type not yet supported")}})});var dg=new WeakSet;nt("component.init",({component:n})=>{n.snapshot.memo.isolate===!0&&dg.add(n)});nt("commit.pooling",({commits:n})=>{n.forEach(e=>{dg.has(e.component)&&(e.isolate=!0)})});cw()&&Alpine.navigate.disableProgressBar();document.addEventListener("alpine:navigate",n=>Wc("livewire:navigate",n));document.addEventListener("alpine:navigating",n=>Wc("livewire:navigating",n));document.addEventListener("alpine:navigated",n=>Wc("livewire:navigated",n));function Wc(n,e){let t=new CustomEvent(n,{cancelable:!0,bubbles:!0,detail:e.detail});document.dispatchEvent(t),t.defaultPrevented&&e.preventDefault()}function lw(n,e,t){n.redirectUsingNavigate?Alpine.navigate(e):t()}function cw(){return!!(document.querySelector("[data-no-progress-bar]")||window.livewireScriptConfig&&window.livewireScriptConfig.progressBar===!1)}nt("effect",({effects:n})=>{if(!n.redirect)return;let e=n.redirect;lw(n,e,()=>{window.location.href=e})});var Al=lt(Dt());nt("morph.added",({el:n})=>{n.__addedByMorph=!0});vr("transition",({el:n,directive:e,component:t,cleanup:r})=>{for(let o=0;o<n.attributes.length;o++)if(n.attributes[o].name.startsWith("wire:show")){Al.default.bind(n,{[e.rawName.replace("wire:transition","x-transition")]:e.expression});return}let i=Al.default.reactive({state:!n.__addedByMorph});Al.default.bind(n,{[e.rawName.replace("wire:","x-")]:"","x-show"(){return i.state}}),n.__addedByMorph&&setTimeout(()=>i.state=!0);let s=[];s.push(nt("morph.removing",({el:o,skip:a})=>{a(),o.addEventListener("transitionend",()=>{o.remove()}),i.state=!1,s.push(nt("morph",({component:c})=>{c===t&&(o.remove(),s.forEach(u=>u()))}))})),r(()=>s.forEach(o=>o()))});var uw=new Nf;function hw(n,e){uw.each(n,t=>{t.callback(),t.callback=()=>{}}),e()}var nd=lt(Dt());nt("directive.init",({el:n,directive:e,cleanup:t,component:r})=>{if(["snapshot","effects","model","init","loading","poll","ignore","id","data","key","target","dirty"].includes(e.value)||e0(e.value))return;let i=e.rawName.replace("wire:","x-on:");e.value==="submit"&&!e.modifiers.includes("prevent")&&(i=i+".prevent");let s=nd.default.bind(n,{[i](o){let a=()=>{hw(r,()=>{nd.default.evaluate(n,"$wire."+e.expression,{scope:{$event:o}})})};n.__livewire_confirm?n.__livewire_confirm(()=>{a()},()=>{o.stopImmediatePropagation()}):a()}});t(s)});var ki=lt(Dt());ki.default.addInitSelector(()=>"[wire\\:navigate]");ki.default.addInitSelector(()=>"[wire\\:navigate\\.hover]");ki.default.interceptInit(ki.default.skipDuringClone(n=>{n.hasAttribute("wire:navigate")?ki.default.bind(n,{"x-navigate":!0}):n.hasAttribute("wire:navigate.hover")&&ki.default.bind(n,{"x-navigate.hover":!0})}));document.addEventListener("alpine:navigating",()=>{Livewire.all().forEach(n=>{n.inscribeSnapshotAndEffectsOnElement()})});vr("confirm",({el:n,directive:e})=>{let t=e.expression,r=e.modifiers.includes("prompt");t=t.replaceAll("\\n",`
`),t===""&&(t="Are you sure?"),n.__livewire_confirm=(i,s)=>{if(r){let[o,a]=t.split("|");a?prompt(o)===a?i():s():console.warn("Livewire: Must provide expectation with wire:confirm.prompt")}else confirm(t)?i():s()}});var dw=lt(Dt());dw.default.addInitSelector(()=>"[wire\\:current]");var lc=new Map;document.addEventListener("livewire:navigated",()=>{lc.forEach(n=>n(new URL(window.location.href)))});Q_("current",({el:n,directive:e,cleanup:t})=>{let r=e.expression,i={exact:e.modifiers.includes("exact"),strict:e.modifiers.includes("strict")};if(r.startsWith("#")||!n.hasAttribute("href"))return;let s=n.getAttribute("href"),o=new URL(s,window.location.href),a=r.split(" ").filter(String),c=u=>{fw(o,u,i)?(n.classList.add(...a),n.setAttribute("data-current","")):(n.classList.remove(...a),n.removeAttribute("data-current"))};c(new URL(window.location.href)),lc.set(n,c),t(()=>lc.delete(n))});function fw(n,e,t){if(n.hostname!==e.hostname)return!1;let r=t.strict?n.pathname:n.pathname.replace(/\/+$/,""),i=t.strict?e.pathname:e.pathname.replace(/\/+$/,"");if(t.exact)return r===i;let s=r.split("/"),o=i.split("/");for(let a=0;a<s.length;a++)if(s[a]!==o[a])return!1;return!0}function Vn(n,e,t,r=null){if(t=e.modifiers.includes("remove")?!t:t,e.modifiers.includes("class")){let i=e.expression.split(" ").filter(String);t?n.classList.add(...i):n.classList.remove(...i)}else if(e.modifiers.includes("attr"))t?n.setAttribute(e.expression,!0):n.removeAttribute(e.expression);else{let i=r??window.getComputedStyle(n,null).getPropertyValue("display"),s=["inline","block","table","flex","grid","inline-flex"].filter(o=>e.modifiers.includes(o))[0]||"inline-block";s=e.modifiers.includes("remove")&&!t?i:s,n.style.display=t?s:"none"}}var cc=new Set,uc=new Set;window.addEventListener("offline",()=>cc.forEach(n=>n()));window.addEventListener("online",()=>uc.forEach(n=>n()));vr("offline",({el:n,directive:e,cleanup:t})=>{let r=()=>Vn(n,e,!0),i=()=>Vn(n,e,!1);cc.add(r),uc.add(i),t(()=>{cc.delete(r),uc.delete(i)})});vr("loading",({el:n,directive:e,component:t,cleanup:r})=>{let{targets:i,inverted:s}=yw(n),[o,a]=gw(e),c=pw(t,i,s,[()=>o(()=>Vn(n,e,!0)),()=>a(()=>Vn(n,e,!1))]),u=mw(t,i,[()=>o(()=>Vn(n,e,!0)),()=>a(()=>Vn(n,e,!1))]);r(()=>{c(),u()})});function gw(n){if(!n.modifiers.includes("delay")||n.modifiers.includes("none"))return[s=>s(),s=>s()];let e=200,t={shortest:50,shorter:100,short:150,default:200,long:300,longer:500,longest:1e3};Object.keys(t).some(s=>{if(n.modifiers.includes(s))return e=t[s],!0});let r,i=!1;return[s=>{r=setTimeout(()=>{s(),i=!0},e)},async s=>{i?(await s(),i=!1):clearTimeout(r)}]}function pw(n,e,t,[r,i]){return nt("commit",({component:s,commit:o,respond:a})=>{s===n&&(e.length>0&&vw(o,e)===t||(r(),a(()=>{i()})))})}function mw(n,e,[t,r]){let i=c=>{let{id:u,property:h}=c.detail;return u!==n.id||e.length>0&&!e.map(f=>f.target).includes(h)},s=xl(window,"livewire-upload-start",c=>{i(c)||t()}),o=xl(window,"livewire-upload-finish",c=>{i(c)||r()}),a=xl(window,"livewire-upload-error",c=>{i(c)||r()});return()=>{s(),o(),a()}}function vw(n,e){let{updates:t,calls:r}=n;return e.some(({target:i,params:s})=>{if(s)return r.some(({method:a,params:c})=>i===a&&s===fg(JSON.stringify(c)));if(Object.keys(t).some(a=>a.includes(".")&&a.split(".")[0]===i?!0:a===i)||r.map(a=>a.method).includes(i))return!0})}function yw(n){let e=Bc(n),t=[],r=!1;if(e.has("target")){let i=e.get("target"),s=i.expression;i.modifiers.includes("except")&&(r=!0),s.includes("(")&&s.includes(")")?t.push({target:i.method,params:fg(JSON.stringify(i.params))}):s.includes(",")?s.split(",").map(o=>o.trim()).forEach(o=>{t.push({target:o})}):t.push({target:s})}else{let i=["init","dirty","offline","target","loading","poll","ignore","key","id"];e.all().filter(s=>!i.includes(s.value)).map(s=>s.expression.split("(")[0]).forEach(s=>t.push({target:s}))}return{targets:t,inverted:r}}function fg(n){return btoa(encodeURIComponent(n))}vr("stream",({el:n,directive:e,cleanup:t})=>{let{expression:r,modifiers:i}=e,s=nt("stream",({name:o,content:a,replace:c})=>{o===r&&(i.includes("replace")||c?n.innerHTML=a:n.innerHTML=n.innerHTML+a)});t(s)});nt("request",({respond:n})=>{n(e=>{let t=e.response;t.headers.has("X-Livewire-Stream")&&(e.response={ok:!0,redirected:!1,status:200,async text(){let r=await bw(t,i=>{_t("stream",i)});return Wf(r)&&(this.ok=!1),r}})})});async function bw(n,e){let t=n.body.getReader(),r="";for(;;){let{done:i,value:s}=await t.read(),a=new TextDecoder().decode(s),[c,u]=_w(r+a);if(c.forEach(h=>{e(h)}),r=u,i)return r}}function _w(n){let e=/({"stream":true.*?"endStream":true})/g,t=n.match(e),r=[];if(t)for(let s=0;s<t.length;s++)r.push(JSON.parse(t[s]).body);let i=n.replace(e,"");return[r,i]}vr("replace",({el:n,directive:e})=>{e.modifiers.includes("self")?n.__livewire_replace_self=!0:n.__livewire_replace=!0});vr("ignore",({el:n,directive:e})=>{e.modifiers.includes("self")?n.__livewire_ignore_self=!0:e.modifiers.includes("children")?n.__livewire_ignore_children=!0:n.__livewire_ignore=!0});var id=lt(Dt());id.default.interceptInit(n=>{n.hasAttribute("wire:cloak")&&id.default.mutateDom(()=>n.removeAttribute("wire:cloak"))});var gg=new Nf;nt("commit",({component:n,respond:e})=>{e(()=>{setTimeout(()=>{gg.each(n,t=>t(!1))})})});vr("dirty",({el:n,directive:e,component:t})=>{let r=ww(n),i=!1,s=n.style.display,o=a=>{Vn(n,e,a,s),i=a};gg.add(t,o),Alpine.effect(()=>{let a=!1;if(r.length===0)a=JSON.stringify(t.canonical)!==JSON.stringify(t.reactive);else for(let c=0;c<r.length&&!a;c++){let u=r[c];a=JSON.stringify(sn(t.canonical,u))!==JSON.stringify(sn(t.reactive,u))}i!==a&&o(a),i=a})});function ww(n){let e=Bc(n),t=[];return e.has("model")&&t.push(e.get("model").expression),e.has("target")&&(t=t.concat(e.get("target").expression.split(",").map(r=>r.trim()))),t}var xw=lt(Dt());vr("model",({el:n,directive:e,component:t,cleanup:r})=>{let{expression:i,modifiers:s}=e;if(!i)return console.warn("Livewire: [wire:model] is missing a value.",n);if(pg(t,i))return console.warn('Livewire: [wire:model="'+i+'"] property does not exist on component: ['+t.name+"]",n);if(n.type&&n.type.toLowerCase()==="file")return S_(n,i,t,r);let o=s.includes("live"),a=s.includes("lazy")||s.includes("change"),c=s.includes("blur"),u=s.includes("debounce"),h=i.startsWith("$parent")?()=>t.$wire.$parent.$commit():()=>t.$wire.$commit(),f=Cw(n)&&!u&&o?Tw(h,150):h;xw.default.bind(n,{"@change"(){a&&h()},"@blur"(){c&&h()},["x-model"+Sw(s)](){return{get(){return sn(t.$wire,i)},set(p){ba(t.$wire,i,p),o&&!a&&!c&&f()}}}})});function Sw(n){return n=n.filter(e=>!["lazy","defer"].includes(e)),n.length===0?"":"."+n.join(".")}function Cw(n){return["INPUT","TEXTAREA"].includes(n.tagName.toUpperCase())&&!["checkbox","radio"].includes(n.type)}function pg(n,e){if(e.startsWith("$parent")){let r=fn(n.el.parentElement,!1);return r?pg(r,e.split("$parent.")[1]):!0}let t=e.split(".")[0];return!Object.keys(n.canonical).includes(t)}function Tw(n,e){var t;return function(){var r=this,i=arguments,s=function(){t=null,n.apply(r,i)};clearTimeout(t),t=setTimeout(s,e)}}var Ow=lt(Dt());vr("init",({el:n,directive:e})=>{let t=e.expression??"$refresh";Ow.default.evaluate(n,`$wire.${t}`)});var Ew=lt(Dt());vr("poll",({el:n,directive:e})=>{let t=Bw(e.modifiers,2e3),{start:r,pauseWhile:i,throttleWhile:s,stopWhen:o}=kw(()=>{Aw(n,e)},t);r(),s(()=>Mw()&&Lw(e)),i(()=>Rw(e)&&Fw(n)),i(()=>jw(n)),i(()=>Pw()),o(()=>Iw(n))});function Aw(n,e){Ew.default.evaluate(n,e.expression?"$wire."+e.expression:"$wire.$commit()")}function kw(n,e=2e3){let t=[],r=[],i=[];return{start(){let s=Dw(e,()=>{if(i.some(o=>o()))return s();t.some(o=>o())||r.some(o=>o())&&Math.random()<.95||n()})},pauseWhile(s){t.push(s)},throttleWhile(s){r.push(s)},stopWhen(s){i.push(s)}}}var Rn=[];function Dw(n,e){if(!Rn[n]){let t={timer:setInterval(()=>t.callbacks.forEach(r=>r()),n),callbacks:new Set};Rn[n]=t}return Rn[n].callbacks.add(e),()=>{Rn[n].callbacks.delete(e),Rn[n].callbacks.size===0&&(clearInterval(Rn[n].timer),delete Rn[n])}}var zc=!1;window.addEventListener("offline",()=>zc=!0);window.addEventListener("online",()=>zc=!1);function Pw(){return zc}var mg=!1;document.addEventListener("visibilitychange",()=>{mg=document.hidden},!1);function Mw(){return mg}function jw(n){return!Bc(n).has("poll")}function Lw(n){return!n.modifiers.includes("keep-alive")}function Rw(n){return n.modifiers.includes("visible")}function Fw(n){let e=n.getBoundingClientRect();return!(e.top<(window.innerHeight||document.documentElement.clientHeight)&&e.left<(window.innerWidth||document.documentElement.clientWidth)&&e.bottom>0&&e.right>0)}function Iw(n){return n.isConnected===!1}function Bw(n,e){let t,r=n.find(s=>s.match(/([0-9]+)ms/)),i=n.find(s=>s.match(/([0-9]+)s/));return r?t=Number(r.replace("ms","")):i&&(t=Number(i.replace("s",""))*1e3),t||e}var kl=lt(Dt());kl.default.interceptInit(n=>{for(let e=0;e<n.attributes.length;e++)if(n.attributes[e].name.startsWith("wire:show")){let{name:t,value:r}=n.attributes[e],i=t.split("wire:show")[1],s=r.startsWith("!")?"!$wire."+r.slice(1).trim():"$wire."+r.trim();kl.default.bind(n,{["x-show"+i](){return kl.default.evaluate(n,s)}})}});var Dl=lt(Dt());Dl.default.interceptInit(n=>{for(let e=0;e<n.attributes.length;e++)if(n.attributes[e].name.startsWith("wire:text")){let{name:t,value:r}=n.attributes[e],i=t.split("wire:text")[1],s=r.startsWith("!")?"!$wire."+r.slice(1).trim():"$wire."+r.trim();Dl.default.bind(n,{["x-text"+i](){return Dl.default.evaluate(n,s)}})}});var vg={directive:vr,dispatchTo:Ic,start:I0,first:$_,find:Y_,getByName:q_,all:G_,hook:nt,trigger:_t,triggerAsync:Vf,dispatch:K_,on:Z_,get navigate(){return Uc.default.navigate}},Vc=n=>console.warn(`Detected multiple instances of ${n} running`);window.Livewire&&Vc("Livewire");window.Alpine&&Vc("Alpine");window.Livewire=vg;window.Alpine=Uc.default;window.livewireScriptConfig===void 0&&(window.Alpine.__fromLivewire=!0,document.addEventListener("DOMContentLoaded",()=>{window.Alpine.__fromLivewire===void 0&&Vc("Alpine"),vg.start()}));var yg=Uc.default;/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT *//*! Bundled license information:

tabbable/dist/index.js:
  (*!
  * tabbable 5.3.3
  * @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
  *)

focus-trap/dist/focus-trap.js:
  (*!
  * focus-trap 6.9.4
  * @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
  *)
*/window.axios=kt;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";window.Alpine=yg;yg.start();xp();Sp();Cp();Op.themeChange();document.addEventListener("DOMContentLoaded",()=>{Rp()});Ep();document.startViewTransition||document.body.classList.add("no-transitions");document.addEventListener("DOMContentLoaded",()=>{Dp(),kp()});
